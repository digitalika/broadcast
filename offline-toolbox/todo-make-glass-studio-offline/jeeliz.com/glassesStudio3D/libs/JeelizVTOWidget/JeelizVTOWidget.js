 /**
 * Jeeliz Glasses VTO Widget - https://github.com/jeeliz/jeelizGlassesVTOWidget
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

"use strict";var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.owns=function(sa,wa){return Object.prototype.hasOwnProperty.call(sa,wa)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(sa,wa,Fa){if(sa==Array.prototype||sa==Object.prototype)return sa;sa[wa]=Fa.value;return sa};
$jscomp.getGlobal=function(sa){sa=["object"==typeof globalThis&&globalThis,sa,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var wa=0;wa<sa.length;++wa){var Fa=sa[wa];if(Fa&&Fa.Math==Math)return Fa}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;
$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(sa,wa){var Fa=$jscomp.propertyToPolyfillSymbol[wa];if(null==Fa)return sa[wa];Fa=sa[Fa];return void 0!==Fa?Fa:sa[wa]};$jscomp.polyfill=function(sa,wa,Fa,Qa){wa&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(sa,wa,Fa,Qa):$jscomp.polyfillUnisolated(sa,wa,Fa,Qa))};
$jscomp.polyfillUnisolated=function(sa,wa,Fa,Qa){Fa=$jscomp.global;sa=sa.split(".");for(Qa=0;Qa<sa.length-1;Qa++){var Aa=sa[Qa];if(!(Aa in Fa))return;Fa=Fa[Aa]}sa=sa[sa.length-1];Qa=Fa[sa];wa=wa(Qa);wa!=Qa&&null!=wa&&$jscomp.defineProperty(Fa,sa,{configurable:!0,writable:!0,value:wa})};
$jscomp.polyfillIsolated=function(sa,wa,Fa,Qa){var Aa=sa.split(".");sa=1===Aa.length;Qa=Aa[0];Qa=!sa&&Qa in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var zb=0;zb<Aa.length-1;zb++){var ra=Aa[zb];if(!(ra in Qa))return;Qa=Qa[ra]}Aa=Aa[Aa.length-1];Fa=$jscomp.IS_SYMBOL_NATIVE&&"es6"===Fa?Qa[Aa]:null;wa=wa(Fa);null!=wa&&(sa?$jscomp.defineProperty($jscomp.polyfills,Aa,{configurable:!0,writable:!0,value:wa}):wa!==Fa&&($jscomp.propertyToPolyfillSymbol[Aa]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(Aa):
$jscomp.POLYFILL_PREFIX+Aa,Aa=$jscomp.propertyToPolyfillSymbol[Aa],$jscomp.defineProperty(Qa,Aa,{configurable:!0,writable:!0,value:wa})))};$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(sa,wa){for(var Fa=1;Fa<arguments.length;Fa++){var Qa=arguments[Fa];if(Qa)for(var Aa in Qa)$jscomp.owns(Qa,Aa)&&(sa[Aa]=Qa[Aa])}return sa};$jscomp.polyfill("Object.assign",function(sa){return sa||$jscomp.assign},"es6","es3");
$jscomp.arrayIteratorImpl=function(sa){var wa=0;return function(){return wa<sa.length?{done:!1,value:sa[wa++]}:{done:!0}}};$jscomp.arrayIterator=function(sa){return{next:$jscomp.arrayIteratorImpl(sa)}};$jscomp.makeIterator=function(sa){var wa="undefined"!=typeof Symbol&&Symbol.iterator&&sa[Symbol.iterator];return wa?wa.call(sa):$jscomp.arrayIterator(sa)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(sa){function wa(){this.batch_=null}function Fa(ra){return ra instanceof Aa?ra:new Aa(function(Ga,Na){Ga(ra)})}if(sa&&!$jscomp.FORCE_POLYFILL_PROMISE)return sa;wa.prototype.asyncExecute=function(ra){if(null==this.batch_){this.batch_=[];var Ga=this;this.asyncExecuteFunction(function(){Ga.executeBatch_()})}this.batch_.push(ra)};var Qa=$jscomp.global.setTimeout;wa.prototype.asyncExecuteFunction=function(ra){Qa(ra,0)};wa.prototype.executeBatch_=function(){for(;this.batch_&&
this.batch_.length;){var ra=this.batch_;this.batch_=[];for(var Ga=0;Ga<ra.length;++Ga){var Na=ra[Ga];ra[Ga]=null;try{Na()}catch($a){this.asyncThrow_($a)}}}this.batch_=null};wa.prototype.asyncThrow_=function(ra){this.asyncExecuteFunction(function(){throw ra;})};var Aa=function(ra){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var Ga=this.createResolveAndReject_();try{ra(Ga.resolve,Ga.reject)}catch(Na){Ga.reject(Na)}};Aa.prototype.createResolveAndReject_=function(){function ra($a){return function(kb){Na||
(Na=!0,$a.call(Ga,kb))}}var Ga=this,Na=!1;return{resolve:ra(this.resolveTo_),reject:ra(this.reject_)}};Aa.prototype.resolveTo_=function(ra){if(ra===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(ra instanceof Aa)this.settleSameAsPromise_(ra);else{a:switch(typeof ra){case "object":var Ga=null!=ra;break a;case "function":Ga=!0;break a;default:Ga=!1}Ga?this.resolveToNonPromiseObj_(ra):this.fulfill_(ra)}};Aa.prototype.resolveToNonPromiseObj_=function(ra){var Ga=void 0;
try{Ga=ra.then}catch(Na){this.reject_(Na);return}"function"==typeof Ga?this.settleSameAsThenable_(Ga,ra):this.fulfill_(ra)};Aa.prototype.reject_=function(ra){this.settle_(2,ra)};Aa.prototype.fulfill_=function(ra){this.settle_(1,ra)};Aa.prototype.settle_=function(ra,Ga){if(0!=this.state_)throw Error("Cannot settle("+ra+", "+Ga+"): Promise already settled in state"+this.state_);this.state_=ra;this.result_=Ga;this.executeOnSettledCallbacks_()};Aa.prototype.executeOnSettledCallbacks_=function(){if(null!=
this.onSettledCallbacks_){for(var ra=0;ra<this.onSettledCallbacks_.length;++ra)zb.asyncExecute(this.onSettledCallbacks_[ra]);this.onSettledCallbacks_=null}};var zb=new wa;Aa.prototype.settleSameAsPromise_=function(ra){var Ga=this.createResolveAndReject_();ra.callWhenSettled_(Ga.resolve,Ga.reject)};Aa.prototype.settleSameAsThenable_=function(ra,Ga){var Na=this.createResolveAndReject_();try{ra.call(Ga,Na.resolve,Na.reject)}catch($a){Na.reject($a)}};Aa.prototype.then=function(ra,Ga){function Na(ob,Ab){return"function"==
typeof ob?function(Qb){try{$a(ob(Qb))}catch(Ib){kb(Ib)}}:Ab}var $a,kb,Rb=new Aa(function(ob,Ab){$a=ob;kb=Ab});this.callWhenSettled_(Na(ra,$a),Na(Ga,kb));return Rb};Aa.prototype.catch=function(ra){return this.then(void 0,ra)};Aa.prototype.callWhenSettled_=function(ra,Ga){function Na(){switch($a.state_){case 1:ra($a.result_);break;case 2:Ga($a.result_);break;default:throw Error("Unexpected state: "+$a.state_);}}var $a=this;null==this.onSettledCallbacks_?zb.asyncExecute(Na):this.onSettledCallbacks_.push(Na)};
Aa.resolve=Fa;Aa.reject=function(ra){return new Aa(function(Ga,Na){Na(ra)})};Aa.race=function(ra){return new Aa(function(Ga,Na){for(var $a=$jscomp.makeIterator(ra),kb=$a.next();!kb.done;kb=$a.next())Fa(kb.value).callWhenSettled_(Ga,Na)})};Aa.all=function(ra){var Ga=$jscomp.makeIterator(ra),Na=Ga.next();return Na.done?Fa([]):new Aa(function($a,kb){function Rb(Qb){return function(Ib){ob[Qb]=Ib;Ab--;0==Ab&&$a(ob)}}var ob=[],Ab=0;do ob.push(void 0),Ab++,Fa(Na.value).callWhenSettled_(Rb(ob.length-1),kb),
Na=Ga.next();while(!Na.done)})};return Aa},"es6","es3");$jscomp.polyfill("Math.log2",function(sa){return sa?sa:function(wa){return Math.log(wa)/Math.LN2}},"es6","es3");$jscomp.polyfill("Promise.prototype.finally",function(sa){return sa?sa:function(wa){return this.then(function(Fa){return Promise.resolve(wa()).then(function(){return Fa})},function(Fa){return Promise.resolve(wa()).then(function(){throw Fa;})})}},"es9","es3");
$jscomp.polyfill("Math.sign",function(sa){return sa?sa:function(wa){wa=Number(wa);return 0===wa||isNaN(wa)?wa:0<wa?1:-1}},"es6","es3");
var JeelizVTOWidget=function(){function sa(){Oa.mode=lb.realtime;Oa.isRT=!0;ya.adjust=document.getElementById("JeelizVTOWidgetAdjust");if(ya.adjust){ya.adjustNotice=document.getElementById("JeelizVTOWidgetAdjustNotice");ya.adjustExit=document.getElementById("JeelizVTOWidgetAdjustExit");ya.changeModelContainer=document.getElementById("JeelizVTOWidgetChangeModelContainer");ya.buttonResizeCanvas=document.getElementById("buttonResizeCanvas");var W=ya.adjust;W&&W.addEventListener("click",Rb,!1);(W=ya.adjustExit)&&
W.addEventListener("click",ob,!1);[ya.adjust,ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Fa)}Sb.enabled&&Ra.do_instantDetection(Sb.interval,Sb.callback);Yb&&(Yb(!0),Yb=null)}function wa(){var W=document.createElement("style");W.setAttribute("type","text/css");W.innerHTML="._jeelizVTOForceHide { display: none!important }._jeelizVTOForceShow { display: revert!important }";var Da=document.getElementsByTagName("head");1<=Da.length?Da[0].appendChild(W):document.body.appendChild(W)}function Fa(W){W&&
(W.classList.remove("_jeelizVTOForceHide"),"none"===window.getComputedStyle(W).display&&W.classList.add("_jeelizVTOForceShow"))}function Qa(W){W&&(W.classList.add("_jeelizVTOForceHide"),W.classList.remove("_jeelizVTOForceShow"))}function Aa(W,Da){if(W)for(var Ka in Da)W.style[Ka]=Da[Ka]}function zb(W){if(W)return W.clientWidth}function ra(W){if(W)return W.clientHeight}function Ga(W){return new Promise(function(Da,Ka){var La=new XMLHttpRequest;La.open("GET",W,!0);La.onreadystatechange=function(){if(4===
La.readyState)if(200===La.status||0===La.status)try{var Xa=JSON.parse(La.responseText);Da(Xa)}catch(Ta){Ka("INVALID JSON")}else Ka("HTTP ERROR "+La.status)};La.send()})}function Na(){$a("INVALID_SKU")}function $a(W){rc.error?rc.error(W):console.log("ERROR:",W)}function kb(){var W=zb(ya.container),Da=ra(ya.container),Ka=Math.abs(ib.displayHeight-Da);1>=Math.abs(ib.displayWidth-W)&&1>=Ka?console.log("INFO in JeelizVTOWidget.resize: resolution difference too small abord resize"):(ib.displayWidth=W,ib.displayHeight=
Da,console.log("INFO in JeelizVTOWidget.resize: width = "+ib.displayWidth.toString()+" height = "+ib.displayHeight.toString()+" oFactor = "+(1).toString()),ib.cvWidth=Math.round(1*ib.displayWidth),ib.cvHeight=Math.round(1*ib.displayHeight),Aa(ya.cv,{width:ib.displayWidth.toString()+"px",height:ib.displayHeight.toString()+"px"}),ya.cv.width=ib.cvWidth,ya.cv.height=ib.cvHeight,Ra&&(Oa.mode===lb.notLoaded?Ra.set_size(ib.cvWidth,ib.cvHeight,!1):Ra.resize(ib.cvWidth,ib.cvHeight,!1)))}function Rb(){[ya.adjust,
ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Qa);Oa.mode=lb.adjust;[ya.adjustNotice,ya.adjustExit].forEach(Fa);ya.cv.style.cursor="move";Ra.switch_modeInteractor("movePinch");Ib("ADJUST_START")}function ob(){[ya.adjustNotice,ya.adjustExit].forEach(Qa);[ya.adjust,ya.changeModelContainer,ya.buttonResizeCanvas].forEach(Fa);ya.cv.style.cursor="auto";Oa.mode=Oa.realtime;Ra.switch_modeInteractor("idle");Ib("ADJUST_END")}function Ab(){if(!ya.trackIframe){var W=fc.appstaticURL+"jeewidget/";ya.trackIframe=
document.createElement("iframe");ya.trackIframe.width="10";ya.trackIframe.height="10";ya.trackIframe.src=W+"trackIframe.html";Aa(ya.trackIframe,{position:"absolute",zIndex:-1,bottom:"0px",right:"0px"});ya.container.appendChild(ya.trackIframe)}}function Qb(W,Da,Ka,La){Ra.load_model(Da.mod+".json",Da.mats,function(){Oa.mode=lb.realtime;Ka&&Ka();ub.toggle_loading(!1);if(ya.trackIframe){var Xa=location.href.split("?").shift().split("://").pop();Xa=Xa.split("/").shift();Xa=Xa.split("www.").pop();try{ya.trackIframe.contentWindow.postMessage({action:"COUNTTRYONSESSION",
domain:Xa,sku:W},"*")}catch(Ta){}}},W,La)}function Ib(W){(W=Bc[W])&&W()}var Ra=function(){function W(a,c){return a[0]*(1-c)+a[1]*c}function Da(a,c){var d=new XMLHttpRequest;d.open("GET",a,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||c(d.responseText)};d.send()}function Ka(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Ka(a[d],c);return a}function La(a){return.5>a?4*a*a*a:
(a-1)*(2*a-2)*(2*a-2)+1}function Xa(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}function Ta(a,c){var d=
c%8;return a[(c-d)/8]>>7-d&1}function Jb(a,c,d){var e=1,q=0;for(d=c+d-1;d>=c;--d)q+=e*Ta(a,d),e*=2;return q}function Ja(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),e=0;e<c;++e)d[e]=a.charCodeAt(e);return d}function eb(a){return"string"===typeof a?JSON.parse(a):a}function qb(a){return"undefined"===typeof eb(a).nb?rb(a):vb(a)}function vb(a){var c=eb(a);a=c.nb;if(0===a)return new Uint8Array(c.nb);var d=c.n;c=Ja(c);
for(var e=new Uint32Array(d),q=0;q<d;++q)e[q]=Jb(c,q*a,a);return e}function rb(a){var c=eb(a);a=c.ne;var d=c.nf,e=c.n;c=Ja(c);for(var q=new Float32Array(e),l=new Float32Array(d),w=a+d+1,n=0;n<e;++n){var t=w*n,r=0===Ta(c,t)?1:-1,v=Jb(c,t+1,a);t=t+1+a;for(var D=l.length,z=0,G=t;G<t+D;++G)l[z]=Ta(c,G),++z;for(D=t=0;D<d;++D)t+=l[D]*Math.pow(2,-D-1);q[n]=0===t&&0===v?0:r*(1+t)*Math.pow(2,1+v-Math.pow(2,a-1))}return q}function gc(a){var c=null,d=null,e=null,q=0,l=this;this.m=function(w){this.Nn(w.Cd);e.Qk({Wf:w.Wf,
Ci:w.Ci||!1,Tf:w.Tf})};this.Hl=function(w){return c[w]};this.Nn=function(w){var n=null;q=w.length;c=w.map(function(t,r){t=Object.assign({},t,{index:r,parent:l,Pd:n,qm:r===q-1});return n=0===r?Uc.instance(t):Vc.instance(t)});d=c[0];e=c[q-1];c.forEach(function(t,r){0!==r&&t.$m()})};this.wa=function(w){w.h(0);var n=w;c.forEach(function(t){n=t.wa(n,!1)});return n};this.Kh=function(){return d.M()};this.bf=function(){return e.Kl()};this.Gh=function(){return e.Gh()};this.v=function(){c&&(c.forEach(function(w){w.v()}),
e=d=c=null,q=0)};"undefined"!==typeof a&&this.m(a)}function Bb(a,c){a[c]=!0;a.setAttribute(c,"true")}function Tb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Zb(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function $b(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function ac(a){if(!a)return a;
var c=null;if(a.video){var d=function(e){return e&&"object"===typeof e?Object.assign({},e):e};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&bc(c,a.deviceId);return c}function bc(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)}
function hc(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}function ic(a){function c(z){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(G,x){return Math.abs(G-z)-Math.abs(x-z)})}function d(z){var G=ac(a);z=z(G);q.push(z);e(z)}function e(z){if(z.video&&z.video.facingMode&&z.video.facingMode.exact){var G=z.video.facingMode.exact;z=ac(z);delete z.video.facingMode.exact;z.video.facingMode.ideal=G;q.push(z)}}var q=[];if(!a||!a.video)return q;
e(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var l=c(a.video.width.ideal).slice(0,3),w=c(a.video.height.ideal).slice(0,3),n={},t=0;for(n.hb=void 0;t<l.length;n={hb:n.hb},++t){n.hb=l[t];var r={},v=0;for(r.gb=void 0;v<w.length;r={gb:r.gb},++v)if(r.gb=w[v],n.hb!==a.video.width.ideal||r.gb!==a.video.height.ideal){var D=Math.max(n.hb,r.gb)/Math.min(n.hb,r.gb);D<4/3-.1||D>16/9+.1||d(function(z,G){return function(x){x.video.width.ideal=z.hb;x.video.height.ideal=G.gb;
return x}}(n,r))}}}d(function(z){return hc(z)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(z){delete z.video.width.ideal;delete z.video.height.ideal;return z}),d(function(z){delete z.video.width;delete z.video.height;return z}));a.video.facingMode&&(d(function(z){delete z.video.facingMode;return z}),a.video.width&&a.video.height&&d(function(z){hc(z);delete z.video.facingMode;return z}));q.push({audio:a.audio,video:!0});return q}function cc(a){try{var c=window.matchMedia("(orientation: portrait)").matches?
!0:!1}catch(e){c=window.innerHeight>window.innerWidth}if(c&&a&&a.video){c=a.video.width;var d=a.video.height;c&&d&&c.ideal&&d.ideal&&c.ideal>d.ideal&&(a.video.height=c,a.video.width=d)}}function Lb(a){a.volume=0;Bb(a,"muted");if($b()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;Bb(a,"muted")},
5)}}function jc(a){var c=Ca.element,d=Ca.hh;return null===c?Promise.resolve():new Promise(function(e,q){if(c.srcObject&&c.srcObject.getVideoTracks){var l=c.srcObject.getVideoTracks();1!==l.length?q("INVALID_TRACKNUMBER"):(l=l[0],a?Cc(c,e,q,d):(l.stop(),e()))}else q("BAD_IMPLEMENTATION")})}function Dc(a,c,d,e){function q(w){l||(l=!0,d(w))}var l=!1;navigator.mediaDevices.getUserMedia(e).then(function(w){function n(){setTimeout(function(){if(a.currentTime){var r=a.videoHeight;if(0===a.videoWidth||0===
r)q("VIDEO_NULLSIZE");else{var v={Lk:null,sg:null,Lm:null};try{var D=w.getVideoTracks()[0];D&&(v.Lm=D,v.Lk=D.getCapabilities(),v.sg=D.getSettings())}catch(z){}$b()||Tb()?a.parentNode&&null!==a.parentNode?(l||c(a,w,v),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),Lb(a),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";Lb(a);setTimeout(function(){a.play();l||c(a,w,v)},100)},80)):l||c(a,w,v)}}else q("VIDEO_NOTSTARTED")},
700)}function t(){a.removeEventListener("loadeddata",t,!1);var r=a.play();Lb(a);"undefined"===typeof r?n():r.then(function(){n()}).catch(function(){q("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=w:(a.src=window.URL.createObjectURL(w),a.videoStream=w);Lb(a);a.addEventListener("loadeddata",t,!1)}).catch(function(w){q(w)})}function Cc(a,c,d,e){if(a)if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){if(e&&e.video&&Tb()){var q=Zb();0!==q[0]&&(12>q[0]||12===q[0]&&
2>q[1])&&cc(e)}Bb(a,"autoplay");Bb(a,"playsinline");e&&e.audio?a.volume=0:Bb(a,"muted");Dc(a,c,function(){function l(n){if(0===n.length)d("INVALID_FALLBACKCONSTRAINTS");else{var t=n.shift();Dc(a,c,function(){l(n)},t)}}var w=ic(e);l(w)},e)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}function Wc(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&
d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}function Xc(){function a(N){N=N?kc.Ue:1;B.width=N*L.width;B.height=N*L.height;return B}function c(N){for(var V="",ia=N.length-1;0<=ia;--ia){var va=N[ia],Ia="http"===va.substring(0,4).toLowerCase();V=va+V;if(Ia)break}return V}function d(){++ta;2===ta&&(z(),A(!0),K(),la.sj(),l(),S.Sc.forEach(function(N){N()}),S.Sc.splice(0),T.model&&!S.isBusy&&la.si(T.model))}
function e(N,V,ia){return new Promise(function(va){xa.rj(V);Ba.ba();Ha.isEnabled=!0;qa.isEnabled=!1;Ha.Ia||(Ha.Ia=dc.instance({}));N.Lh()&&(Ha.Ia.gj(N.Lh()),xa.ra(Ha.Ia));N.set();qa.isEnabled=!1;w();var Ia=jb.Ih(ia);setTimeout(function(){Ha.isEnabled=!1;xa.rj(!1);va(Ia)},1)})}function q(N,V){return new Promise(function(ia){qa.Wb=N;qa.isEnabled=!0;qa.J=function(){var va=Ec.instance(V());qa.J=null;ia(va)}})}function l(){S.load_model=function(N,V,ia,va,Ia,cb){if(S.isBusy)return!1;S.isBusy=!0;if(T.model)S.set_model(N,
function(){var Va=V;if(Ia){Va=V.slice(0);var Mb=fb.Ll().map(function(Yc){return Yc.toLowerCase()}),sc;for(sc in Ia){var Fc=Mb.indexOf(sc.toLowerCase());-1!==Fc&&(Va[Fc]=Ia[sc])}}S.set_materials(Va,function(){S.isBusy=!1;ia&&ia()})},function(){S.isBusy=!1;cb&&cb()});else{var Wa=c([L.aa,L.ua,L.Hd+"/"]);va=V.map(function(Va){return Wa+Va});T.model={url:c([L.aa,L.ua,L.Id+"/"+N]),Gc:va,Cb:!1,Bb:!1};la.si(T.model,function(){S.isBusy=!1;ia&&ia()})}return!0};S.set_offset=function(N){fa=N;la.ee()};S.set_scale=
function(N){ka=N;la.fe()};S.set_rx=function(N){O=N;la.Ej()};S.switch_shadow=xa.xg;S.switch_bgBlur=xa.wg;S.set_zoom=xa.jg;S.is_viewer3D=function(){return ha===Y.Da};S.switch_viewer3D=function(N,V){if(ha===Y.hc||ha===Y.ic||ha===Y.V&&!N||ha===Y.Da&&N||qa.isEnabled)return!1;if(ha===Y.sa)return oa!==Y.Da||N?oa===Y.V&&N?(oa=Y.Da,xa.ra(U.xb),xa.Ya(1),V&&V(),!0):!1:(oa=Y.V,xa.ra(U.eb),xa.Ya(0),V&&V(),!0);var ia=0,va=-1,Ia=0;ha===Y.V?(ha=Y.hc,va=L.Jo):ha===Y.Da&&(ha=Y.ic,va=L.Mo);var cb=tc.Ze();X=setInterval(function(){var Wa=
tc.Ze();ia+=(Wa-cb)/va;1<=ia&&(ia=1,ha===Y.hc?(ha=Y.Da,xa.ra(U.xb)):(ha=Y.V,xa.ra(U.eb)),V&&V(),clearInterval(X),X=null);var Va=ha===Y.ic||ha===Y.V?1-L.Ho(ia):L.Go(ia);xa.Ya(Va);ha!==Y.ic&&ha!==Y.hc||0!==Ia++%2||(xa.ra(U.Nf),U.Nf.Un(Va));cb=Wa},.016);return!0};S.capture_image=function(N,V,ia,va){qa.Wb=N;qa.isEnabled=!0;"undefined"===typeof isAllocate&&(ia=!1);(va="undefined"===typeof va?!1:va)&&xa.Zd(!1);D();qa.J=function(){xa.Pi(0);b.flush();var Ia=jb.Ih(ia);V(Ia);va&&xa.Zd(!0)}};S.capture_detection=
function(N,V){var ia=null===M.yb?M.cb:M.Pc;q(N,function(){return{wc:y.kc.clone(),Of:fb.Oh(),Kf:fb.Mh(),background:ia.clone(),Ia:za.Ma.Ph().clone(),Jf:ma}}).then(V)};S.process_image=function(N){function V(){return new Promise(function(cb,Wa){qa.Hg=Ia.updateLightInterval;q(Ia.nSteps,function(){return{wc:y.kc.clone(),Of:!1,Kf:!1,background:L.cq?!1:M.cb.clone(!0),Ia:za.Ma.Ph().clone()}}).then(function(Va){qa.Hg=3;Va?1>=Va.Yb().wc.data[0]?Wa("FACE_NOT_FOUND"):e(Va,Ia.isMask,!0).then(function(Mb){cb(Mb)}):
Wa("CRITICAL")});w()})}function ia(){return new Promise(function(cb,Wa){fetch_modelBySKU(Ia.modelSKU,Ia.glassesDBURL).then(function(Va){S.load_model(Va.Tp,Va.Sp,function(){cb()},Ia.modelSKU,null,function(){Wa("CANNOT_LOAD_MODEL")})}).catch(function(Va){Wa(Va)})})}function va(){return new Promise(function(cb){var Wa=new Image;Wa.onload=function(){var Va=Wa.width,Mb=Wa.height;if(Va!==L.width||Mb!==L.height)Ca.yd&&(Ca.element.width=Va,Ca.element.height=Mb),k(Va,Mb,Ia.overSamplingFactor);Ca.vh.drawImage(Wa,
0,0);D();cb()};Wa.src=Ia.imageBase64})}var Ia=Object.assign({imageBase64:null,nSteps:50,updateLightInterval:3,overSamplingFactor:2,modelSKU:"undef",glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",isMask:!0},N);if(L.zd)throw Error("This feature cannot be called");return new Promise(function(cb,Wa){return ia().then(va).then(function(){V().then(cb).catch(Wa)}).catch(Wa).catch(Wa)})};S.process_offlineRendering=function(N,V,ia,va,Ia){la.vn();va&&(S.Qj.drawImage(jb.ob(),0,0),jb.ob().parentNode.insertBefore(S.zb,
jb.ob()),S.zb.setAttribute("class","jeefitMask"));S.set_model(V,function(){S.set_materials(ia,function(){setTimeout(function(){e(N,va).then(Ia);la.sn(va?function(){jb.ob().parentNode.removeChild(S.zb)}:!1)},1)})})};S.serialize_detection=function(N){return N.Yb()};S.unserialize_detection=function(N,V,ia){return Ec.Oc(N,V,ia)};S.do_instantDetection=function(N,V){Gc.m(y.kc);Gc.start(N,V)};S.relieve_DOM=function(N,V){if(m.Qb)return!1;t(V||160);ua=!1;Q&&clearTimeout(Q);Q=setTimeout(function(){t(L.ya);
Q=!1;v()},N);return!0};S.switch_slow=function(N,V){if(m.Qb)return!1;"undefined"===typeof V&&(V=L.Xj);Q&&(t(L.ya),v(),clearTimeout(Q),Q=!1);N?ua=!1:v();t(N?V:L.ya);return!0};S.switch_deepSleep=function(N){if(pa===N)return!1;pa=!1;S.switch_sleep(N);pa=N;return!0};S.switch_sleep=function(N,V){function ia(){S.isBusy=!1;N?(oa=ha,ha=Y.sa):(ha=oa,w())}if(m.Qb||pa||S.isBusy)return V?Promise.reject():null;if(N&&ha===Y.sa||!N&&ha!==Y.sa)return V?Promise.resolve(!1):!1;X&&(clearInterval(X),X=null);ha===Y.ic?
(ha=Y.V,xa.ra(U.eb),xa.Ya(0)):ha===Y.hc&&(ha=Y.Da,xa.ra(U.xb),xa.Ya(1));wb.stop();var va=null;S.isBusy=!0;V?va=jc(!N).then(ia):ia();return V?va:!0};S.set_modelStandalone=function(N,V){xa.$d(!1);uc.instance({url:N.model,Gc:N.materials,Cb:!1,Bb:!1,J:function(ia){Cb=[0,0,0];Kb=1;Ma=h=p=0;Db=L.Ec;S.ready&&la.ge();V&&V();n(ia);la.ug();xa.$d(!0)}})};S.start_rendering=la.ug;S.update_material=function(N,V){fb&&fb.uo(N,V)};S.set_model=function(N,V,ia){fb&&(N=c([L.aa,L.ua,L.Id+"/",N]),fb.replace(N,function(){V&&
V(fb.Pk())},ia))};S.set_tweaker=function(N,V){function ia(va){S.Vg(va);V&&V()}"string"===typeof N?Da(L.aa+L.ua+L.no+"/"+N,ia):ia(N)};S.Vg=function(N){N&&(N.preOffset&&(Cb=N.preOffset),N.preScale&&(Kb=N.preScale),N.rx&&(p=N.rx),N.beginBendZ&&(h=N.beginBendZ),N.bendStrength&&(Ma=N.bendStrength),N.maskBranchStartEnd&&(Db=N.maskBranchStartEnd),S.ready&&la.ge())};S.set_materials=function(N,V){if(fb){var ia=c([L.aa,L.ua,L.Hd+"/"]);N=N.map(function(va){var Ia=va;"string"===typeof va&&(Ia=ia+va,Ia=Ia.replace(/([^:])\/\//,
"$1/"));return Ia});fb.kg(N,V)}}}function w(){Eb.reset();wb.stop();Ba.ba();r(0)}function n(N){fb&&(xa.mn(fb),fb.remove());xa.Tj(N);fb=N}function t(N){R=N;wb.update({ya:R})}function r(N){na=-1;qa.isEnabled?na=qa.Wb:Ha.isEnabled?na=Ha.Wb:ua?(D(),na=ha===Y.V?Eb.T():1):(na=L.Qc[0],D());Ba.ba();if(!Ha.isEnabled)for(var V=0;V<na;++V)ba.set("s54"),M.tf.N(),M.cb.h(0),y.Hc.h(1),Z.l(!1,!1),ea.wa(M.tf),qa.isEnabled&&0===(V+1)%qa.Hg&&f();qa.isEnabled?(qa.J&&qa.J(),qa.isEnabled=!1,b.flush(),ha!==Y.sa&&wb.dg(r)):
(xa.animate(N),M.$f&&P-U.oi>U.tj&&L.Ub&&ha===Y.V&&(Ba.ba(),f(),Ba.$()),Ha.isEnabled||(ua&&(Eb.xj(),V=Eb.Hh(1),Pa=W(L.Vj,V),L.Ub&&ha===Y.V&&(U.tj=W(L.ri,V),U.Yd=W(L.Em,V),U.Yd=Math.min(U.Yd,.5))),P=N,ha!==Y.sa&&wb.dg(r)))}function v(){P=tc.Ze();ua=!0}function D(){var N=15;if(!Ca.yd){var V=Ca.element.currentTime;N=V-ab;0>N&&(ab=V);if(1E3*N<L.Bo)return}Ca.ja.refresh();ab+=N;Ca.hd=N;J=!0;Ba.ba();ba.set("s0");y.ag.N();y.Hc.zk(0);Z.l(!0,!0);ba.set("s52");M.cb.N();Ca.ja.h(0);Z.l(!1,!1);null!==M.yb&&(ba.set("s53"),
M.Pc.o(),M.cb.h(0),M.yb.h(1),Z.l(!1,!1))}function z(){M.Ij=aa.instance({isPot:!0,isLinear:!0,isFloat:!1,url:L.aa+L.ua+L.Co});var N={isPot:!1,isLinear:!0,isFloat:!1,width:B.width,height:B.height};M.cb=aa.instance(N);M.Pc=aa.instance(N);m.uj.push(M.cb,M.Pc);M.tf=aa.instance({isPot:!0,isFloat:!1,width:ea.Kh()});L.Ed&&(sb=aa.instance({isPot:!1,isFloat:!1,isLinear:!0,url:(L.If||-1!==L.Hf.indexOf("//")?"":L.aa+L.ua)+L.Hf}))}function G(){function N(){return{width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,
.5,.5,0,0,0,0,0,0,0,0,0])}}var V={width:3,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0])};y.Hc=Hc.instance(N());y.ag=aa.instance(N());y.kc=aa.instance(N());y.Md=Hc.instance(N());y.Oe=aa.instance(V);V={width:2,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0,0,0,0,0])};y.Lg=aa.instance(V);y.ie=aa.instance(V);U.Nd=aa.instance({width:1,height:1,isFloat:!0,isPot:!1,array:new Float32Array([0,0,0,0])})}function x(N){M.$f=N;if(J){J=!1;ba.set("s60");y.Lg.N();y.ie.h(2);
var V=W(L.Bk,Eb.Hh(.5));ba.G("u64",V);y.ag.h(1);ba.G("u65",1E3*Ca.hd);Z.l(!1,!1);ba.set("s61");y.ie.o();y.Lg.h(0);Z.l(!1,!1)}N.h(0);y.Hc.cj(1);b.viewport(0,0,1,1);ba.set("s55");ba.qg("u44",Ic.get(0));Z.l(!1,!1);ba.set("s56");b.viewport(1,0,2,1);Z.l(!1,!1);y.Oe.N();ba.set("s57");ba.O("u55",L.we[0]*Pa,L.we[1]);y.Hc.h(0);y.Md.h(1);Z.l(!1,!1);ba.set("s58");y.Md.cj(1);y.Oe.h(0);y.ie.h(2);y.Hc.h(3);Z.l(!1,!1);ba.set("s59");y.Md.h(0);y.kc.o();Z.l(!1,!1)}function f(){U.oi=P;U.Nd.N();ba.set(E.ei?"s63":"s62");
M.$f.h(0);Z.l(!1,!1);za.Ma.Gj(Ca.ja,U.Nd,U.Yd)}function g(){var N=L.aa,V=L.qe.split("://").shift();if("http"===V||"https"===V)N="";N+=L.qe;"json"!==N.split(".").pop()&&(N+=L.neuralNetworkPath);Da(N,function(ia){ia=JSON.parse(ia);if(ia.exportData){var va=ia.exportData;E.Wa=E.Wa||va.rotationEulerAnglesFactors;E.xc=E.xc||va.deformScaleXFactor;E.pa=E.pa||va.translationScalingFactors;E.uh=va.dyOffset||0;E.sh=va.dsOffset||0;E.ei=va.isLThetaSplitCosSin||!1}ea=new gc({Cd:ia.layers,Wf:"gpuRawAvg",Tf:x});d()})}
function A(N){a(N);N=L.width;var V=L.height;H.kb[0]=1;H.kb[1]=N/V;Ic.m({Ld:L.scanOverlapFactors,zi:L.scanNScaleLevels,ta:N,mf:V,Vi:L.scanScale0Factor,pa:E.pa,eg:!0});bb=N>V?[N/V,1]:[1,V/N];m.Ga=!0}function K(){ba.j("s54",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u38",value:1},{type:"2f",name:"u39",value:H.kb},{type:"1f",name:"u40",value:E.xc},{type:"1f",name:"u42",value:E.uh},{type:"1f",name:"u41",value:E.sh}]);ba.j("s55",[{type:"1i",name:"u43",value:0},{type:"1i",name:"u38",value:1},{type:"1f",
name:"u48",value:L.lo},{type:"1f",name:"u49",value:L.Yk},{type:"3f",name:"u45",value:[E.pa[0]*H.kb[0],E.pa[1]*H.kb[1],E.pa[2]]},{type:"3f",name:"u46",value:[L.jc[0][0],L.jc[1][0],L.jc[2][0]]},{type:"3f",name:"u47",value:[L.jc[0][1],L.jc[1][1],L.jc[2][1]]}]);ba.j("s56",[{type:"1i",name:"u43",value:0},{type:"1i",name:"u38",value:1},{type:"2f",name:"u52",value:L.cn},{type:"3f",name:"u50",value:E.Wa},{type:"3f",name:"u51",value:L.wj},{type:"1f",name:"u53",value:L.ul}]);ba.j("s57",[{type:"1i",name:"u38",
value:0},{type:"1i",name:"u54",value:1},{type:"2f",name:"u55",value:L.we},{type:"1f",name:"u56",value:L.tn},{type:"1f",name:"u57",value:L.bn}]);ba.j("s58",[{type:"1i",name:"u54",value:1},{type:"1i",name:"u58",value:0},{type:"1i",name:"u59",value:2},{type:"1i",name:"u60",value:3},{type:"2f",name:"u39",value:H.kb},{type:"1f",name:"u62",value:ea.Kh()},{type:"2f",name:"u61",value:L.pn}]);ba.j("s59",[{type:"1i",name:"u38",value:0},{type:"1f",name:"u63",value:L.wn}]);ba.j("s60",[{type:"1i",name:"u43",value:0},
{type:"1i",name:"u38",value:1},{type:"1i",name:"u59",value:2},{type:"3f",name:"u50",value:E.Wa},{type:"3f",name:"u51",value:L.wj}]);ba.j("s61",[{type:"1i",name:"u59",value:0},{type:"2f",name:"u67",value:L.mo},{type:"2f",name:"u68",value:L.un}]);ba.j("s62",[{type:"1i",name:"u43",value:0}]);ba.j("s63",[{type:"1i",name:"u43",value:0}]);ba.j("s53",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u69",value:1}])}function k(N,V,ia){var va=0===ia,Ia=a(va);L.width=N;L.height=V;A(va);K();m.uj.forEach(function(cb){cb.resize(N,
V)});ia=va?1:ia;ca.resize(Ia.width*ia,Ia.height*ia);la.Nc();gb.rg(Ca.element.videoWidth||Ca.element.width,Ca.element.videoHeight||Ca.element.height);gb.yg();gb.sj()}var p,h,H={kb:[-1,-1]},I=null,F=[.5,0,0,.5],B={width:-1,height:-1},m={bb:null,Qb:!1,Ga:!1,uj:[]},u=[0,L.Od[1],L.Od[2]],E={Wa:[-L.Wa[0],-L.Wa[1],L.Wa[2]],xc:L.xc,pa:L.pa,uh:0,sh:0,ei:!1},R=L.ya,Q=null,ea=null;a(!0);var fa=[0,0,0],ka=1,O=0,M={cb:null,Pc:null,tf:null,Ij:null,$f:null,yb:null},y={ag:null,kc:null,Md:null,Oe:null,Lg:null,ie:null},
P=0,J=!1,U={eb:null,xb:null,Nf:null,oi:0,tj:L.ri[1],Yd:.1,Nd:null},ta=0,ja=!1,ua=!0,Pa=1,na=-1,Y={sa:-1,V:0,Da:1,hc:2,ic:3},ha=Y.V,X=null,oa=Y.V,pa=!1,qa={isEnabled:!1,Wb:1,Hg:3,J:null},Ha={isEnabled:!1,Ia:null,Wb:0},sb=null,bb=-1,Ya=!1,Za=!1,mb=!1,lc=[0,0,0],xb=1,Fb,Nb,Ob,Cb=[0,0,0],Kb=1,Ma=h=p=0,Db=L.Ec,da=[0,0,0],ma={scale:1,offsetX:0,offsetY:0},ab=0,la={m:function(){ba.ve([{id:"s52",name:"_",s:"attribute vec2 a0;uniform mat2 u37;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u37*a0;}",
I:["a0"],R:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u37"],precision:"lowp"},{id:"s54",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",s:"attribute vec2 a0;uniform sampler2D u38;uniform vec2 u39;uniform float u40,u41,u42;const vec2 h=vec2(.16,.5),i=vec2(.5,.5),j=vec2(.84,.5),q=vec2(.5,.5);varying vec2 vv0;void main(){vec4 b=texture2D(u38,h);vec2 c=b.gb,a=b.a*u39;vec4 l=texture2D(u38,i);float m=l.y;vec2 n=vec2(mix(1.,1./cos(m),u40),1.);a*=n,a*=1.+u41;vec2 o=a0*.5;float d=texture2D(u38,j).r,e=cos(d),f=sin(d);mat2 g=mat2(e,f,-f,e);vec2 p=g*o;c+=vec2(-.5,-.5)*a*(g*vec2(0.,u42)),vv0=c+p*a,gl_Position=vec4(a0,0.,1.);}",
I:["a0"],R:[2],i:"u1 u38 u39 u40 u41 u42".split(" "),precision:"lowp"},{id:"s55",name:"_",s:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u43,u38;uniform vec3 u44,u45,u46,u47;uniform float u48,u49;const vec4 e=vec4(.25,.25,.25,.25);const vec2 f=vec2(.16,.5),g=vec2(.5,.5),h=vec2(.83,.5);const vec3 i=vec3(1.,1.,1.);void main(){vec4 j=texture2D(u43,vec2(.625,.625)),k=texture2D(u43,vec2(.875,.625));float l=dot(j-k,e);bool m=l>u49;vec4 a=texture2D(u38,f);m?a.r=2.:a.r>u48?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a=vec4(1.,u44);else{float n=dot(e,texture2D(u43,vec2(.875,.875))),o=dot(e,texture2D(u43,vec2(.125,.625))),p=dot(e,texture2D(u43,vec2(.375,.625))),b=texture2D(u38,h).r,c=cos(b),d=sin(b);vec2 q=mat2(c,d,-d,c)*vec2(n,o);float r=texture2D(u38,g).a;vec3 s=mix(u46,u47,r*i);a.r*=step(1.9,a.r),a.gba+=vec3(q,p)*u45*s*a.a;}gl_FragColor=a;}",
i:"u43 u38 u44 u48 u45 u49 u46 u47".split(" ")},{id:"s56",name:"_",g:"uniform sampler2D u43,u38;uniform vec3 u50,u51;uniform vec2 u52;uniform float u53;const vec4 v=vec4(1.,1.,1.,1.),f=vec4(0.,0.,0.,0.),e=vec4(.25,.25,.25,.25);const vec2 g=vec2(.16,.5),h=vec2(.5,.5),i=vec2(.84,.5);varying vec2 vv0;void main(){float k=step(vv0.x,.5);vec4 l=texture2D(u38,g);if(l.r<1.9){gl_FragColor=f;return;}float m=dot(texture2D(u43,vec2(.125,.125)),e),a=smoothstep(u52.x,u52.y,m);vec4 n=texture2D(u38,h);float o=n.a;a=mix(a,o,.3);float p=dot(e,texture2D(u43,vec2(.125,.875))),q=dot(e,texture2D(u43,vec2(.375,.875))),r=dot(e,texture2D(u43,vec2(.625,.875)));vec3 s=vec3(p,q,r),b=u51+s*u50;float c=texture2D(u38,i).r,d=b.z*u53;c+=d,b.z-=d;vec4 t=vec4(b,a),u=vec4(c,0.,0.,0.);gl_FragColor=mix(u,t,k);}",
i:"u43 u38 u52 u50 u51 u53".split(" ")},{id:"s57",name:"_",g:"uniform sampler2D u38,u54;uniform vec2 u55;uniform float u56,u57;const vec4 f=vec4(1.,1.,1.,1.),h=vec4(1.,0.,0.,0.),i=vec4(0.,0.,0.,1.);const vec2 g=vec2(.5,.5);varying vec2 vv0;void main(){vec4 c=texture2D(u38,vv0),d=texture2D(u54,vv0),o=texture2D(u38,g),j=texture2D(u54,g);float k=pow(j.a,u57),l=mix(u55.x,u55.y,1.-k),a=step(.34,vv0.x)*step(vv0.x,.66);vec4 m=mix(h,i,a),b=max(l*f,m);b*=mix(f,u56*vec4(1.,1.,1.,0.)+vec4(0.,0.,0.,1.),a);vec4 n=c-d;gl_FragColor=n*b;}",
i:["u38","u54","u55","u56","u57"],precision:"highp"},{id:"s58",name:"_",g:"uniform sampler2D u54,u58,u59,u60;uniform vec2 u39,u61;uniform float u62;const vec4 u=vec4(1.,1.,1.,1.);const vec2 g=vec2(.25,.5),h=vec2(.75,.5),f=vec2(.16,.5),i=vec2(.5,.5);varying vec2 vv0;void main(){float j=step(.33,vv0.x)*step(vv0.x,.66),v=step(.66,vv0.x);vec4 k=texture2D(u60,i);float a=k.a;a*=texture2D(u59,g).a,a*=texture2D(u59,h).a;vec4 l=texture2D(u54,vv0),m=texture2D(u58,vv0),b=l+m;b.a=mix(b.a,a,j);vec4 c=texture2D(u54,f),n=texture2D(u60,f);vec2 o=c.gb,p=n.gb;float q=c.a;vec2 d=u62*abs(o-p)/(u39*q);float r=max(d.x,d.y),s=smoothstep(u61.x,u61.y,r);vec4 t=texture2D(u60,vv0);gl_FragColor=mix(b,t,s);}",
i:"u54 u58 u59 u60 u39 u62 u61".split(" "),precision:"highp"},{id:"s59",name:"_",g:"uniform sampler2D u38;uniform float u63;const vec4 g=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u38,vv0);float b=step(vv0.x,.33),c=texture2D(u38,f).g;a.a+=b*a.a*u63*abs(sin(c)),gl_FragColor=a;}",i:["u38","u63"],precision:"highp"},{id:"s60",name:"_",g:"uniform sampler2D u38,u59,u43;uniform vec3 u50,u51;uniform float u64,u65;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(1.,1.,1.);const vec2 h=vec2(.5,.5);const vec3 i=vec3(1.,1.,4.);varying vec2 vv0;void main(){vec4 c=texture2D(u38,h);float d=step(vv0.x,.5),a=1.-d;vec4 j=texture2D(u59,vv0);float t=c.a;vec2 k=mix(vec2(.875,.875),vec2(.125,.875),a),l=mix(vec2(.125,.625),vec2(.375,.875),a),m=mix(vec2(.375,.625),vec2(.625,.875),a);float n=dot(e,texture2D(u43,k)),o=dot(e,texture2D(u43,l)),p=dot(e,texture2D(u43,m));vec3 q=mix(i,u50,a),b=q*vec3(n,o,p),r=c.rgb;b=mix(b,u51+b-r,a)/u65;vec4 s=mix(vec4(b,0.),j,vec4(u64*g,0.));gl_FragColor=s;}",
i:"u38 u59 u43 u64 u65 u50 u51".split(" "),precision:"highp"},{id:"s61",name:"_",g:"uniform sampler2D u59;uniform vec2 u67,u68;const vec4 h=vec4(.25,.25,.25,.25);varying vec2 vv0;void main(){float a=step(.5,vv0.x),c=mix(u67.x,u68.x,a),d=mix(u67.y,u68.y,a);vec3 b=texture2D(u59,vv0).rgb;float f=length(b),g=1.-smoothstep(c,d,f);gl_FragColor=vec4(b,g);}",i:["u59","u67","u68"],precision:"highp"},{id:"s62",name:"_",s:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u43;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415;void main(){float a=dot(texture2D(u43,vec2(.375,.375)),e),b=dot(texture2D(u43,vec2(.625,.375)),e),c=f/2.*dot(texture2D(u43,vec2(.875,.375)),e),d=.75*f*dot(texture2D(u43,vec2(.125,.375)),e);gl_FragColor=vec4(d,a,b,c);}",
i:["u43"]},{id:"s63",name:"_",s:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u43;const vec4 e=vec4(.25,.25,.25,.25);const float f=3.1415,g=1e-7;void main(){float b=dot(texture2D(u43,vec2(.875,.375)),e),c=dot(texture2D(u43,vec2(.375,.125)),e),d=f/2.*dot(texture2D(u43,vec2(.625,.375)),e),a=dot(texture2D(u43,vec2(.125,.375)),e),h=dot(texture2D(u43,vec2(.375,.375)),e);a+=(step(0.,a)-.5)*g;float i=atan(h,a);gl_FragColor=vec4(i,b,c,d);}",i:["u43"]},{id:"s53",name:"_",
g:"uniform sampler2D u1,u69;varying vec2 vv0;vec4 i(vec4 a,sampler2D g){mediump float b=a.b*63.;mediump vec2 c;c.y=floor(floor(b)/8.),c.x=floor(b)-c.y*8.;mediump vec2 d;d.y=floor(ceil(b)/8.),d.x=ceil(b)-d.y*8.;highp vec2 e;e.x=c.x*.125+9.765625e-4+.123047*a.r,e.y=c.y*.125+9.765625e-4+.123047*a.g;highp vec2 f;f.x=d.x*.125+9.765625e-4+.123047*a.r,f.y=d.y*.125+9.765625e-4+.123047*a.g;lowp vec4 j=texture2D(g,e),k=texture2D(g,f),l=mix(j,k,fract(b));return l;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=i(a,u69);}",
i:["u1","u69"]}]);G();g();wb.m({di:!1,ya:R});Eb.m({Qf:0,n:L.Qc[1]-L.Qc[0]+1,pi:L.Qc[0]});S.set_videoRotation=function(N){db.rotate=N;S.ready&&(gb.rg(Ca.element.videoWidth,Ca.element.videoHeight),gb.yg())};S.set_viewRotation=function(){};S.set_LUT=function(N){return new Promise(function(V){N?aa.instance({url:N,isFloat:!1,isFlipY:!1,J:function(ia){M.yb=ia;la.Nc();V()}}):(M.yb=null,la.Nc(),V())})};S.resize=function(N,V,ia){function va(){wb.stop();m.bb&&(clearTimeout(m.bb),m.bb=null);if(!m.Qb)if(L.width===
Ia&&L.height===cb)w();else if(ha!==Y.V&&ha!==Y.Da)m.bb=setTimeout(va,L.Ti);else{var Wa="undefined"===typeof tb?!1:tb.get_mode(),Va=ha;ha=Y.sa;m.Qb=!0;qa.isEnabled=!0;qa.J=function(){qa.isEnabled=!1;m.Qb=!1;v();t(L.ya);Q&&clearTimeout(Q);Q=!1;ha=Va};k(Ia,cb,0);w();ha===Y.Da&&(ha=Y.V,S.switch_viewer3D(!0,!1));Wa&&tb.switch_mode(Wa)}}if(S.ready){m.bb&&(clearTimeout(m.bb),m.bb=null);wb.stop();ia=ia?kc.Ue:1;var Ia=N*ia,cb=V*ia;m.bb=setTimeout(va,L.Ti)}}},Ml:function(){return B},v:function(){wb.v();return new Promise(function(N){S.switch_sleep(!0,
!0).finally(function(){ea&&ea.v();ca.v();jb.v();b&&(b=null);ea=null;L.If=!1;fb=null;ua=!0;Pa=1;na=-1;ha=Y.V;X=null;oa=Y.V;Object.assign(Ca,Jc);Object.assign(L,Kc);N()}).catch(function(V){throw Error(V);})})},Nc:function(){xa.aj(y.kc,null===M.yb?M.cb:M.Pc,U.Nd,M.Ij)},Jl:function(){return ma},hj:function(N){ma=N},ee:function(){da[0]=fa[0]-ma.offsetX;da[1]=fa[1]+ma.offsetY;da[2]=fa[2];xa.Cn(u,Cb,da)},fe:function(){xa.Dn(ka*L.Ym,Kb,ma.scale)},Ej:function(){xa.En(O+p)},ro:function(){xa.An(L.Xc+h,L.Eb+
Ma)},to:function(){xa.Bn(Db)},ge:function(){la.ee();la.fe();la.Ej();la.ro();la.to()},vn:function(){wb.stop();X&&(clearInterval(X),X=null);Ha.isEnabled=!0;Ha.Wb=0;Ya=xa.Il();Za=fb.Oh();mb=fb.Mh();xb=Kb;lc=Cb;Fb=Db;Nb=h;Ob=Ma;qa.isEnabled=!1;xa.Zd(!1)},sn:function(N){function V(){2===++ia&&(Ha.isEnabled=!1,Kb=xb,Cb=lc,Db=Fb,h=Nb,Ma=Ob,la.ge(),xa.ra(Ya),w(),N&&N())}var ia=0;ha===Y.hc?ha=Y.Da:ha===Y.ic&&(ha=Y.V);xa.Ya(ha===Y.V?0:1);fb.replace(Za,V);fb.kg(mb,V);la.Nc();xa.Zd(!0)},sj:function(){var N=Math.tan(Ca.Kb/
2);xa.$i({We:L.We/N,xn:N,an:Ca.Ki,Ba:L.Ba,Pf:L.Pf,Lj:H.kb,Pj:L.Fo,zc:L.zc,lf:L.lf,jf:L.jf,kf:L.kf,Ec:Db,xe:L.xe,Je:L.Je,cg:L.cg,dc:L.dc,$n:L.mj,ao:L.nj,Xd:L.Xd,ec:L.ec,bd:L.bd,Me:L.Me,Le:L.Le,Ke:L.Ke,Ae:L.Ae,ze:L.aa+L.ua+L.ze,Xc:L.Xc+h,Eb:L.Eb+Ma,gf:L.gf,Qg:L.Qg,Pg:L.Pg,le:L.le,Lo:L.Ko,ke:Ca.ke,Ed:L.Ed,Gm:sb,Dd:L.Dd,Fd:L.Fd,Gf:L.Gf,Fm:bb,zg:L.zg})},Mk:function(){var N=db.pe,V=db.oe,ia=1/Math.tan(Ca.Kb/2),va=jb.X()/jb.M();Ca.Ki=[ia,0,0,0,0,ia/va,0,0,0,0,-(V+N)/(V-N),-1,0,0,-2*N*V/(V-N),0];Ca.ke=1/
Math.tan(L.Io*Math.PI/360)/ia},rg:function(N,V){I=[.5,.5];N=V/N;V=jb.X()/jb.M();90===Math.abs(db.rotate)&&(N=1/N);N>V?I[1]*=V/N:I[0]*=N/V;F[0]=0;F[1]=0;F[2]=0;F[3]=0;switch(db.rotate){case 0:F[0]=I[0];F[3]=I[1];break;case 180:F[0]=-I[0];F[3]=-I[1];break;case 90:F[1]=I[0];F[2]=-I[1];break;case -90:F[1]=-I[0],F[2]=I[1]}L.fi||(F[0]*=-1,F[1]*=-1);Ca.Kb=2*Math.atan(2*I[0]*Math.tan((1<N?db.FOVmobile:db.FOVdesktop)*Math.PI/180/2));la.Mk()},yg:function(){ba.j("s52",[{type:"1i",name:"u1",value:0},{type:"mat2",
name:"u37",value:F}])},rf:function(N,V){la.cm(N,V);la.m();if(!la.dm())return S.jb&&S.jb("GL_INCOMPATIBLE","Cannot init JEELIZVTO"),!1;la.Xh();return!0},cm:function(N,V){S.Ab=document.createElement("canvas");S.zb=document.createElement("canvas");S.zb.width=L.width;S.zb.height=L.height;S.Qj=S.zb.getContext("2d");S.replace_video=function(ia){Ca.element=ia;Ca.Fg.ha=Ca.element;return!0};S.pc=S.Ab.getContext("2d");S.capture_background=function(ia,va){ia="undefined"===typeof ia?N:ia;va="undefined"===typeof va?
V:va;S.Ab.width=ia;S.Ab.height=va;var Ia=ia/va,cb=0,Wa=0;if(N/V>Ia){var Va=V*Ia;Ia=V;cb=Math.round((N-Va)/2)}else Va=N,Ia=N/Ia,Wa=Math.round((V-Ia)/2);S.pc.save();S.pc.translate(ia,0);S.pc.scale(-1,1);S.pc.drawImage(Ca.element,cb,Wa,Va,Ia,0,0,ia,va);S.pc.restore();ia=document.createElement("canvas");ia.width=S.Ab.width;ia.height=S.Ab.height;ia.getContext("2d").drawImage(S.Ab,0,0);return ia}},Xh:function(){window.CanvasListeners&&(tb.init({oa:jb.ob()}),S.init_listeners=la.Xh,S.add_listener=tb.add_listener,
S.remove_listener=tb.remove_listener,S.animate_swipe=tb.animate_swipe,S.switch_modeInteractor=tb.switch_mode,S.get_modeInteractor=tb.get_mode,tb.add_listener("move",function(N,V){ha===Y.V&&(L.Hm&&(ma.offsetX-=V[0]*L.ui,ma.offsetX=Math.min(Math.max(ma.offsetX,-L.Gd),L.Gd)),ma.offsetY-=V[1]*L.ui,ma.offsetY=Math.min(Math.max(ma.offsetY,-L.Gd),L.Gd),la.ee())},!0).add_listener("pinch",function(N,V){ha===Y.V&&(ma.scale+=V*L.Im,ma.scale=Math.min(Math.max(ma.scale,L.vi[0]),L.vi[1]),la.fe())},!0))},dm:function(){return ca.m({xd:!1,
Kk:!1,expand:!1,oa:jb.ob(),Lb:jb,onload:function(){U.xb=dc.instance({Db:L.aa+L.ua+hb.Do,rc:L.aa+L.ua+hb.Eo,qc:hb.Jj,sc:hb.Kj});L.Ub?(U.eb=dc.instance({}),za.Ma.ra(U.eb)):U.eb=U.xb;xa.ra(U.eb);U.Nf=L.Ub?Zc.instance({Dm:U.eb,Bm:U.xb}):U.xb;d()}})},ug:function(){ja||(la.Nc(),L.Ub&&(Ba.reset(),za.Ma.Dk(Ca.ja),za.Ma.Ck()),S.ready=!0,P=0,L.zd&&w(),ta=0,ja=!0,ca.Kg(kc.tl),la.ge(),xa.ho(),S.Tc.forEach(function(N){N()}),S.Tc.splice(0))},si:function(N,V){N=uc.instance({J:function(){la.ug();V&&V()},url:N.url,
Gc:N.Gc,Cb:N.Cb,Bb:N.Bb});n(N)},ko:function(){if(L.Ub){var N=Object.assign({},hb,{Xb:L.aa+L.ua+hb.Xb});za.Ma.lg(N)}}};return la}function $c(){S.se&&S.se();Ca.yd=!1;var a={width:{min:db.minWidth,max:db.maxWidth,ideal:db.idealWidth},height:{min:db.minHeight,max:db.maxHeight,ideal:db.idealHeight},facingMode:{ideal:"user"}},c={video:a,audio:!1};Ca.hh=c;a&&-1!==Ca.deviceId&&bc(c,Ca.deviceId);Cc(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?document.createElement("video"):!1,function(d){S.te&&
S.te(d);Lc(d)},function(d){S.jb&&S.jb("WEBCAM_UNAVAILABLE",d)},c)}function Lc(a){Ca.element=a;a=Ca.element.videoWidth||Ca.element.width;var c=Ca.element.videoHeight||Ca.element.height;Ca.Fg={ha:Ca.element,isPot:!1,isFloat:!1,isFlipY:!0};Ca.ja=aa.instance(Ca.Fg);gb.rg(a,c);gb.rf(a,c)&&gb.yg()}function ad(){var a=document.createElement("canvas");a.width=L.width;a.height=L.height;Ca.vh=a.getContext("2d");Ca.yd=!0;Lc(a)}function Ub(a){return 3===arguments.length?this.lb(arguments):this.set(a)}function Mc(a,
c){c=Math.floor(c);a.r=(c>>16&255)/255;a.W=(c>>8&255)/255;a.b=(c&255)/255}function bd(a,c){function d(n){void 0!==n&&1>parseFloat(n)&&console.warn("JETHREE.Color: Alpha component of "+c+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(c)){var q=e[2];switch(e[1]){case "rgb":case "rgba":if(e=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(q)){a.r=Math.min(255,parseInt(e[1],10))/255;a.W=Math.min(255,parseInt(e[2],10))/255;a.b=Math.min(255,parseInt(e[3],10))/
255;d(e[5]);return}if(e=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(q)){a.r=Math.min(100,parseInt(e[1],10))/100;a.W=Math.min(100,parseInt(e[2],10))/100;a.b=Math.min(100,parseInt(e[3],10))/100;d(e[5]);return}break;case "hsl":case "hsla":if(e=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(q)){q=parseFloat(e[1])/360;var l=parseInt(e[2],10)/100,w=parseInt(e[3],10)/100;d(e[5]);a.zn(q,l,w);return}}}else if(e=/^#([A-Fa-f0-9]+)$/.exec(c)){e=
e[1];q=e.length;if(3===q){a.r=parseInt(e.charAt(0)+e.charAt(0),16)/255;a.W=parseInt(e.charAt(1)+e.charAt(1),16)/255;a.b=parseInt(e.charAt(2)+e.charAt(2),16)/255;return}if(6===q){a.r=parseInt(e.charAt(0)+e.charAt(1),16)/255;a.W=parseInt(e.charAt(2)+e.charAt(3),16)/255;a.b=parseInt(e.charAt(4)+e.charAt(5),16)/255;return}}c&&0<c.length&&(e=cd[c],void 0!==e?Mc(a,e):console.warn("JETHREE.Color: Unknown color "+c))}function mc(a,c,d,e){this.B=a||0;this.C=c||0;this.D=d||0;this.P=void 0!==e?e:1}function Nc(a,
c,d){var e=c.B,q=c.C,l=c.D;c=c.P;var w=d.B,n=d.C,t=d.D;d=d.P;a.B=e*d+c*w+q*t-l*n;a.C=q*d+c*n+l*w-e*t;a.D=l*d+c*t+e*n-q*w;a.P=c*d-e*w-q*n-l*t;return a}function Vb(a,c){this.x=a||0;this.y=c||0}function Sa(a,c,d){this.x=a||0;this.y=c||0;this.z=d||0}function Oc(a,c){var d=a.x,e=a.y,q=a.z;a.x=e*c.z-q*c.y;a.y=q*c.x-d*c.z;a.z=d*c.y-e*c.x}function Wb(a,c,d,e){this.B=a||0;this.C=c||0;this.D=d||0;this.Na=e||Wb.Mj}function vc(a,c){this.min=void 0!==a?a:new Sa(Infinity,Infinity,Infinity);this.max=void 0!==c?
c:new Sa(-Infinity,-Infinity,-Infinity)}function nc(a){return(new Sa).Uc(a.min,a.max).Aa(.5)}function dd(a,c){a.min.min(c);a.max.max(c)}function Xb(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("JETHREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Pc(a,c,d){var e=c.elements,q=d.elements;d=a.elements;c=e[0];var l=e[4],w=e[8],n=e[12],t=e[1],r=e[5],v=e[9],D=e[13],z=e[2],G=e[6],x=e[10],f=e[14],g=e[3],A=e[7],
K=e[11];e=e[15];var k=q[0],p=q[4],h=q[8],H=q[12],I=q[1],F=q[5],B=q[9],m=q[13],u=q[2],E=q[6],R=q[10],Q=q[14],ea=q[3],fa=q[7],ka=q[11];q=q[15];d[0]=c*k+l*I+w*u+n*ea;d[4]=c*p+l*F+w*E+n*fa;d[8]=c*h+l*B+w*R+n*ka;d[12]=c*H+l*m+w*Q+n*q;d[1]=t*k+r*I+v*u+D*ea;d[5]=t*p+r*F+v*E+D*fa;d[9]=t*h+r*B+v*R+D*ka;d[13]=t*H+r*m+v*Q+D*q;d[2]=z*k+G*I+x*u+f*ea;d[6]=z*p+G*F+x*E+f*fa;d[10]=z*h+G*B+x*R+f*ka;d[14]=z*H+G*m+x*Q+f*q;d[3]=g*k+A*I+K*u+e*ea;d[7]=g*p+A*F+K*E+e*fa;d[11]=g*h+A*B+K*R+e*ka;d[15]=g*H+A*m+K*Q+e*q;return a}
function wc(a,c,d,e,q,l){this.a=a;this.b=c;this.c=d;this.Ka=e instanceof Sa?e:new Sa;this.je=Array.isArray(e)?e:[];this.color=q instanceof Ub?q:new Ub;this.Ng=Array.isArray(q)?q:[];this.Vb=void 0!==l?l:0}function ed(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);var q=e.withCredentials=!1;e.onreadystatechange=function(){404!==e.status||q||(q=!0,d&&d(404));if(4===e.readyState&&200===e.status){var l=null;try{l=JSON.parse(e.responseText)}catch(w){d&&d(-1)}c&&l&&c(l)}};e.onerror=function(){d&&d(0)};
e.send()}function xc(a,c,d){"object"===typeof a?c(a):ed(a,c,d)}function fd(a,c){for(var d=new Sa,e=new Sa,q=0,l=c.length;q<l;q++){var w=c[q],n=a[w.a],t=a[w.b];d.ab(a[w.c],t);e.ab(n,t);Oc(d,e);0!==d.zf()&&(d.normalize(),w.Ka.K(d))}}function gd(a,c){for(var d=Array(a.length),e=0,q=a.length;e<q;++e)d[e]=new Sa;e=new Sa;q=new Sa;for(var l=0,w=c.length;l<w;++l){var n=c[l],t=a[n.a],r=a[n.b];e.ab(a[n.c],r);q.ab(t,r);Oc(e,q);d[n.a].add(e);d[n.b].add(e);d[n.c].add(e)}e=0;for(a=a.length;e<a;++e)d[e].normalize();
a=0;for(e=c.length;a<e;++a)q=c[a],l=q.je,3===l.length?(l[0].K(d[q.a]),l[1].K(d[q.b]),l[2].K(d[q.c])):(l[0]=d[q.a].clone(),l[1]=d[q.b].clone(),l[2]=d[q.c].clone());return d}function hd(a,c,d,e){function q(H){p.K(c[H]);h.K(p);var I=n[H];K.K(I);K.sub(p.Aa(p.dd(I))).normalize();var F=h.x,B=h.y,m=h.z,u=I.x,E=I.y;I=I.z;k.x=B*I-m*E;k.y=m*u-F*I;k.z=F*E-B*u;F=0>k.dd(t[H])?-1:1;w[4*H]=K.x;w[4*H+1]=K.y;w[4*H+2]=K.z;w[4*H+3]=F}for(var l=a.length,w=new Float32Array(4*l),n=Array(l),t=Array(l),r=0;r<l;r++)n[r]=
new Sa,t[r]=new Sa;var v=new Sa,D=new Sa,z=new Sa,G=new Vb,x=new Vb,f=new Vb,g=new Sa,A=new Sa;e.forEach(function(H){var I=H.a,F=H.b;H=H.c;v.K(a[I]);D.K(a[F]);z.K(a[H]);G.K(d[I]);x.K(d[F]);f.K(d[H]);var B=D.x-v.x,m=z.x-v.x,u=D.y-v.y,E=z.y-v.y,R=D.z-v.z,Q=z.z-v.z,ea=x.x-G.x,fa=f.x-G.x,ka=x.y-G.y,O=f.y-G.y,M=1/(ea*O-fa*ka);g.set((O*B-ka*m)*M,(O*u-ka*E)*M,(O*R-ka*Q)*M);A.set((ea*m-fa*B)*M,(ea*E-fa*u)*M,(ea*Q-fa*R)*M);n[I].add(g);n[F].add(g);n[H].add(g);t[I].add(A);t[F].add(A);t[H].add(A)});var K=new Sa,
k=new Sa,p=new Sa,h=new Sa;e.forEach(function(H){q(H.a);q(H.b);q(H.c)});return w}function Qc(a,c,d,e){return Math.sqrt((a-d)*(a-d)+(c-e)*(c-e))}var T={kh:!0,kp:!1,lp:!1,Xk:!1,jh:!1,jp:!1,Ja:!1,xd:!1,Up:!1,aa:"",xi:"",rk:700,qk:200,lh:!1,xo:!1,yo:!1,wo:!1,Yj:3,Hb:!1,Wg:!0,Db:"images/backgrounds/interior2.jpg",rc:"images/backgrounds/interior_light.jpg",tk:[256,256,512,512],qc:2.1,sc:8,sk:[64,128,256,256],jm:[60,96,160,250],im:[8,12,18,40],Ic:2.2,Xf:1,Be:300,$g:500,Ce:50,Ek:0,Fk:0,Zo:45,ap:1,$o:1E3,
ah:20,No:10,Oo:10,Po:5,Xm:.1,Ei:20,Hi:100,Ii:100,Wm:-Math.PI/3,Vm:Math.PI/3,Gi:0,vj:0,hd:[40,32,16,16],Wj:[0,.87,.92,.9],Sm:2,Om:100,da:!1,Zj:16,$j:.4,bk:[.72,.73,.72,.74],lk:1.2,ik:[.5,.5,.5,1],nk:140,mk:280,pk:1.2,ck:20,dk:40,kk:[6,9,9,12],hk:[.03,.02,.02,.018],gk:[.35,.35,.4,.5],ek:[.2,.2,.2,.2],ak:[.1,.15,.15,.15],jk:[200,200,150,120],fk:[1,2,3,5],bo:1.1,nq:[.25,.5,1,2],oq:256,mq:256,lq:200,co:[40,80,200,500],eo:[35,45,80,120],Rk:!0,Sk:"CCW"},Rc={},ba=function(){function a(m,u,E){u=m.createShader(u);
m.shaderSource(u,E);m.compileShader(u);return m.getShaderParameter(u,m.COMPILE_STATUS)?u:null}function c(m,u,E){u=a(m,m.VERTEX_SHADER,u);E=a(m,m.FRAGMENT_SHADER,E);m===b&&n.push(u,E);var R=m.createProgram();m.attachShader(R,u);m.attachShader(R,E);m.linkProgram(R);return R}function d(m){return["float","sampler2D","int"].map(function(u){return"precision "+m+" "+u+";\n"}).join("")}function e(m,u){u.Z=u.Z?!0:!1;if(!u.Z){u.s=u.s||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";
u.I=u.I||["a0"];u.R=u.R||[2];u.precision=u.precision||z;u.id=v++;void 0!==u.Wi&&(u.Wi.forEach(function(Q,ea){u.g=u.g.replace(Q,u.Ca[ea])}),u.Wi.splice(0));u.Og=0;u.R.forEach(function(Q){u.Og+=4*Q});var E=d(u.precision);u.ma=c(m,E+u.s,E+u.g);u.A={};u.i.forEach(function(Q){u.A[Q]=m.getUniformLocation(u.ma,Q)});u.attributes={};u.va=[];u.I.forEach(function(Q){var ea=m.getAttribLocation(u.ma,Q);u.attributes[Q]=ea;u.va.push(ea)});if(u.u){m.useProgram(u.ma);r=u;t=u.id;for(var R in u.u)m.uniform1i(u.A[R],
u.u[R])}u.Ga=!0}}function q(m){pb.kj(B);t!==m.id&&(B.H(),t=m.id,r=m,b.useProgram(m.ma),m.va.forEach(function(u){0!==u&&b.enableVertexAttribArray(u)}))}function l(m,u,E){e(m,u,E);m.useProgram(u.ma);m.enableVertexAttribArray(u.attributes.a0);t=-1;return r=u}function w(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],u:{u1:0}}}var n=[],t=-1,r=null,v=0,D=!1,z="highp",G=["u1"],x=["u0"],f={u1:0},g={u0:0},A={u1:0,u2:1},K={u1:0,u3:1},k=["u1","u3","u4"],
p={u5:0},h={s0:w(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:G,u:f,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],u:A},s3:{g:"uniform sampler2D u1;uniform vec2 u6,u7;varying vec2 vv0;void main(){vec2 a=vv0*u6+u7;gl_FragColor=texture2D(u1,a);}",i:["u1","u6","u7"],u:f,Z:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:G,u:f},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],u:A},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:G,u:f},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:G,u:f},s8:{g:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u6;}",
i:["u0","u6"],u:g},s9:{g:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u6,f);gl_FragColor=b*g;}",i:["u0","u6"],u:g},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:G,u:f},s11:{g:"uniform sampler2D u1,u8;uniform float u9;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u8,vv0);gl_FragColor=mix(b,a,u9*f);}",
i:["u1","u8","u9"],u:{u1:0,u8:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u10)+texture2D(u1,vv0+u10*vec2(1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,1.)));}",i:["u1","u10"],u:f},s13:{g:"uniform sampler2D u1;uniform vec4 u11;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u11);gl_FragColor=j(a);}",
i:["u1","u11"],u:f},s14:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:x,u:g,Z:!0},s15:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:x,u:g},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:x,u:g},
s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:x,u:g},s18:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:x,u:g},s19:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:x,u:g,Z:!0},s20:{g:"uniform sampler2D u0,u12;uniform float u13;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u12,e);float b=u13*u13;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u12","u13"],u:{u0:0,u12:1},Z:!0},s21:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),f=floor(u14.x*fract(b*u14.y)),g=(f*u14.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u14"],u:f},s22:{g:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u15","u16","u17"],u:{u16:0,u15:1,
u17:2},Z:!0},s23:{g:"uniform float u18,u19;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 c=fract(vv0*u18),a=vv0;float b=u18*u19;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u15,a),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u16","u15","u18","u19"],u:{u16:0,u15:1}},s24:{g:"uniform float u18,u19;uniform sampler2D u15,u16,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u18),d=vv0;float h=u18*u19;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u15,d),m=texture2D(u16,c),a=texture2D(u23,d);a=floor(.5+a*255.);vec4 n=texture2D(u20,c),o=texture2D(u21,c),p=texture2D(u22,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:"u15 u16 u18 u19 u23 u20 u21 u22".split(" "),u:{u16:0,u15:1,u23:3,u20:4,u21:5,u22:6},Z:!0},s25:{g:"uniform sampler2D u15,u16,u3;uniform float u18,u24,u25,u19;uniform vec2 u26;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u24*vv0),d=u24*vv0-c;float g=u18/u24;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u24;float m=u24*u19/u18;vec2 b=m*h;b=floor(u26*b+.5*(u19-1.)*(f-u26));vec2 a=(b+i*u25)/u19;a+=.25/u19;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u15,j),o=texture2D(u16,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u25*u25+q)*k.x*k.y;}",
i:"u15 u16 u18 u24 u25 u19 u3 u26".split(" "),u:{u16:0,u15:1,u3:2}},s26:{g:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",i:["u15","u16"],u:{u16:0,u15:1},Z:!0},s27:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:k,u:K},s28:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:k,u:K,Z:!0},s29:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:k,u:K,Z:!0},s30:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:G,u:f,precision:"lowp"},s31:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u27"],u:f,precision:"lowp"},s32:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u27"],u:f,precision:"lowp"},s33:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u28"],u:A,Z:!0},s34:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u28"],u:A,Z:!0},s35:{g:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u10*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*h),d=texture2D(u5,a+u10*i),j=texture2D(u5,a+u10),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u10"],u:p},s36:{g:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*k),d=texture2D(u5,a+u10*l),g=texture2D(u5,a+u10),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u10*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u10*m),d=f(a+u10*2.),g=f(a+u10*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u10"],
u:p,Z:!0},s37:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],u:f,precision:"lowp",Z:!0},s38:{g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u10)+2002./e*texture2D(u1,vv0-2.*u10)+3003./e*texture2D(u1,vv0-u10)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u10)+2002./e*texture2D(u1,vv0+2.*u10)+1001./e*texture2D(u1,vv0+3.*u10);gl_FragColor=a;}",i:["u10","u1"],
u:f,precision:"lowp",Z:!0},s39:{g:"uniform sampler2D u1,u12,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u12,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u12","u29"],u:{u1:0,u12:1,u29:2},Z:!0}},H={s40:{g:"uniform float u18,u30;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u18","u15","u16","u3","u30"],Ca:["1.1111","gl_FragColor\\*=2.2222;"]},s41:{g:"uniform float u18,u30,u19;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u19,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u19;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u19,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u18 u19 u15 u16 u3 u30".split(" "),Ca:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},I=null,F=null,B={Tb:function(){return D},m:function(){if(!D){I=Ka(h,2);F=Ka(H,2);z="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var m in I)e(b,I[m],m);ba.set("s0");b.enableVertexAttribArray(0);D=!0}},ve:function(m){m.forEach(function(u){B.na(u)})},na:function(m){I[m.id]=m;e(b,m,m.id)},gm:function(m,
u,E){u||(u=m);I[u]=Object.create(F[m]);I[u].pm=!0;F[m].Ca&&F[m].Ca.forEach(function(R,Q){I[u].g=I[u].g.replace(new RegExp(R,"g"),E[Q])});e(b,I[u],u)},set:function(m){var u=I[m];u.Z&&(u.Z=!1,e(b,u,m));q(u)},ub:function(m){return l(m,w(),"s42")},Td:function(m){return l(m,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:z},"s43")},sl:function(m){return"undefined"===typeof I[m]?!1:I[m].Ga},H:function(){-1!==t&&(t=-1,r.va.forEach(function(m){0!==m&&b.disableVertexAttribArray(m)}))},Vd:function(){var m=
0;r.va.forEach(function(u,E){E=r.R[E];b.vertexAttribPointer(u,E,b.FLOAT,!1,r.Og,m);m+=4*E})},rl:function(){b.enableVertexAttribArray(0)},ac:function(){B.bc(b)},bc:function(m){m.vertexAttribPointer(r.va[0],2,m.FLOAT,!1,8,0)},Ud:function(m,u){b.uniform1i(r.A[m],u)},G:function(m,u){b.uniform1f(r.A[m],u)},O:function(m,u,E){b.uniform2f(r.A[m],u,E)},og:function(m,u){b.uniform2fv(r.A[m],u)},qg:function(m,u){b.uniform3fv(r.A[m],u)},pg:function(m,u,E,R){b.uniform3f(r.A[m],u,E,R)},Wn:function(m,u,E,R,Q){b.uniform4f(r.A[m],
u,E,R,Q)},xa:function(m,u){b.uniform4fv(r.A[m],u)},Xn:function(m,u){b.uniformMatrix2fv(r.A[m],!1,u)},Yn:function(m,u){b.uniformMatrix3fv(r.A[m],!1,u)},Lc:function(m,u){b.uniformMatrix4fv(r.A[m],!1,u)},j:function(m,u){B.set(m);u.forEach(function(E){switch(E.type){case "4f":b.uniform4fv(r.A[E.name],E.value);break;case "3f":b.uniform3fv(r.A[E.name],E.value);break;case "2f":b.uniform2fv(r.A[E.name],E.value);break;case "1f":b.uniform1f(r.A[E.name],E.value);break;case "1i":b.uniform1i(r.A[E.name],E.value);
break;case "mat2":b.uniformMatrix2fv(r.A[E.name],!1,E.value);break;case "mat3":b.uniformMatrix3fv(r.A[E.name],!1,E.value);break;case "mat4":b.uniformMatrix4fv(r.A[E.name],!1,E.value)}})},zp:function(){return"lowp"},v:function(){B.H();b.disableVertexAttribArray(0);for(var m in I){var u=I[m];u.Ga&&(u.Ga=!1,b.deleteProgram(u.ma));u.pm&&delete I[m]}n.forEach(function(E){b.deleteShader(E)});n.splice(0);v=0;D=!1;r=null;t=-1}};return B}(),b=null,jb=function(){function a(x){console.log("ERROR in ContextFF: ",
x);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(x,f,g){x.setAttribute("width",f);x.setAttribute("height",g)}function e(x){function f(){Gb.v();Ea.reset();A.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var g=document.createElement("canvas");d(g,5,5);var A=null;try{A=g.getContext("webgl2",x)}catch(K){return!1}if(!A)return!1;q(A);Ea.wh(A);x=Ea.Ne(A);if(!x.Ra&&!x.Ta)return f(),!1;x=Gb.bh(A,x);f();return x?!0:!1}function q(x){x.clearColor(0,
0,0,0);x.disable(x.DEPTH_TEST);x.disable(x.BLEND);x.disable(x.DITHER);x.disable(x.STENCIL_TEST);x.disable(x.CULL_FACE);x.GENERATE_MIPMAP_HINT&&x.hint(x.GENERATE_MIPMAP_HINT,x.FASTEST);x.disable(x.SAMPLE_ALPHA_TO_COVERAGE);x.disable(x.SAMPLE_COVERAGE);x.depthFunc(x.LEQUAL);x.clearDepth(1)}var l=null,w=null,n=null,t=null,r=!0,v=null,D=null,z=[],G={M:function(){return l.width},X:function(){return l.height},ob:function(){return l},wl:function(){return b},ia:function(){return r},flush:function(){b.flush()},
Hp:function(){Ba.ba();G.qn()},qn:function(){aa.reset();Z.reset();ba.H();ba.rl();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Z.$c();ba.ac()},Bl:function(){v||(v=new Uint8Array(l.width*l.height*4));b.readPixels(0,0,l.width,l.height,b.RGBA,b.UNSIGNED_BYTE,v);return v},up:function(){return l.toDataURL("image/jpeg")},vp:function(){Ba.$();w||(w=document.createElement("canvas"),n=w.getContext("2d"));d(w,l.width,l.height);for(var x=G.Bl(),f=n.createImageData(w.width,w.height),g=w.width,A=w.height,K=f.data,
k=0;k<A;++k)for(var p=A-k-1,h=0;h<g;++h){var H=4*(k*g+h),I=4*(p*g+h);K[H]=x[I];K[H+1]=x[I+1];K[H+2]=x[I+2];K[H+3]=x[I+3]}n.putImageData(f,0,0);return w.toDataURL("image/png")},Ih:function(x){!w&&x&&(w=document.createElement("canvas"),n=w.getContext("2d"));var f=x?w:document.createElement("canvas");d(f,l.width,l.height);(x?n:f.getContext("2d")).drawImage(l,0,0);return f},m:function(x){x=Object.assign({Sa:null,Sf:null,oa:null,Ie:null,width:512,height:512,premultipliedAlpha:!1,mm:!0,antialias:!1,debug:!1,
ip:!1},x);x.Sa?(b=x.Sa,l=x.Sa.canvas):x.Ie&&!x.oa?l=document.getElementById(x.Ie):x.oa&&(l=x.oa);l||(l=document.createElement("canvas"));l.width=x.width;l.height=x.height;if(b)r=b instanceof WebGL2RenderingContext;else{r=!0;var f={antialias:x.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:x.premultipliedAlpha,stencil:!1,depth:x.mm,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(f.antialias=!1);var g=e(f);g||!f.antialias||c()||(f.antialias=!1,g=e(f));g&&(b=l.getContext("webgl2",f));b?r=!0:((b=l.getContext("webgl",f))||(b=l.getContext("experimental-webgl",f)),r=!1)}if(!b)return a("WebGL1 and 2 are not enabled");x.Sf&&l.addEventListener&&(t=b.getExtension("WEBGL_lose_context"))&&(D=x.Sf,l.addEventListener("webglcontextlost",D,!1));if(!Ea.m())return a("Not enough GL capabilities");q(b);ba.m();Z.m();Gb.bh(b,Ea.yl());z.forEach(function(A){A(b)});z.splice(0);return!0},Yo:function(){return new Promise(function(x){b?
x(b):z.push(x)})},v:function(){b&&(Ea.v(),ba.v(),Gb.v());t&&D&&(l.removeEventListener("webglcontextlost",D,!1),t=D=null);b=v=n=w=l=null;z.splice(0)}};return G}(),pb=function(){function a(){null===c&&("undefined"!==typeof ba?c=ba:"undefined"!==typeof C&&(c=C))}var c=null;return{reset:function(){c=null},kj:function(d){c!==d&&(c&&c.H(),c=d)},Tb:function(){return c.Tb()},ac:function(){return c.ac()},bc:function(d){return c.bc(d)},Vd:function(){return c.Vd()},H:function(){return c.H()},set:function(d){a();
return c.set(d)},ub:function(d){a();return c.ub(d)},Td:function(d){a();return c.Td(d)}}}(),aa=function(){function a(m){b.bindTexture(b.TEXTURE_2D,m)}function c(m){var u=new Uint16Array(m.length);m.forEach(function(E,R){H[0]=E;var Q=I[0];var ea=Q>>16&32768;E=Q>>12&2047;var fa=Q>>23&255;Q=103>fa?ea:142<fa?ea|31744|((255==fa?0:1)&&Q&8388607):113>fa?(E|=2048,ea|(E>>114-fa)+(E>>113-fa&1)):(ea|fa-112<<10|E>>1)+(E&1);u[R]=Q});return u}function d(){if(null!==F.pf)return F.pf;var m=e(c([.5,.5,.5,.5]),!0);
return null===m?!0:F.pf=m}function e(m,u){if(!pb.Tb()||!G)return null;var E=null,R=Math.sqrt(m.length/4);try{var Q=b.getError();if("FUCKING_BIG_ERROR"===Q)return!1;E=B.instance({isFloat:!1,S:u,array:m,width:R});Q=b.getError();if(Q!==b.NO_ERROR)return!1}catch(ea){return!1}Ba.$();b.viewport(0,0,R,R);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);pb.set("s0");E.Oa(0);Z.l(!0,!0);m=4*R*R;u=new Uint8Array(m);b.readPixels(0,0,R,R,b.RGBA,b.UNSIGNED_BYTE,u);R=!0;for(Q=0;Q<m;++Q)R=R&&3>Math.abs(u[Q]-127);
E.remove();Ba.ba();return R}var q=0,l=null,w=0,n=null,t=null,r=null,v=null,D=null,z=null,G=!1,x=[],f={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,ha:null,Rh:null,nm:!1,S:!1,J:null,F:4,Lf:0},g=!1,A=null,K=null,k=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],p=!1,h=!1,H=new Float32Array(1),I=new Int32Array(H.buffer),F={pf:null,qf:null},B={m:function(){G||(D=[b.RGBA,null,
b.RGBA,b.RGBA],z=[b.RGBA,null,b.RGBA,b.RGBA],l=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],p="undefined"!==typeof ca,h="undefined"!==typeof Ea,n=[-1,-1,-1,-1,-1,-1,-1,-1],v=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],G=!0)},em:function(){if(!t){for(var m=new Float32Array(16384),u=0;16384>u;++u)m[u]=2*Math.random()-1;t={random:B.instance({isFloat:!0,isPot:!0,array:m,width:64}),zj:B.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}B.so()},
Qh:function(){return t.zj},so:function(){v[1]=Ea.$e(b)},Rn:function(){z=D=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},Qi:function(m){ba.set("s1");Ba.$();var u=m.M(),E=m.X();b.viewport(0,0,u,E);m.h(0);Z.l(!1,!1)},Wp:function(m,u){B.Qi(m);b.readPixels(0,0,m.M(),m.X(),b.RGBA,b.UNSIGNED_BYTE,u)},Xp:function(m,u){B.Qi(m);return Ea.bg(0,0,m.M(),m.X(),u)},Dh:function(m,u,E,R,Q,ea,fa){m.activeTexture(m.TEXTURE0);var ka=m.createTexture();m.bindTexture(m.TEXTURE_2D,ka);Q=Q instanceof Float32Array?Q:new Float32Array(Q);
m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,ea);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,E,R,0,m.RGBA,m.FLOAT,Q);m.bindTexture(m.TEXTURE_2D,null);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,!1);fa&&(Ba.ba(),ba.ub(m));m.viewport(0,0,E,R);m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,
m.TEXTURE_2D,u,0);m.bindTexture(m.TEXTURE_2D,ka);fa?Z.l(!0,!0):Z.Jb(m);m.deleteTexture(ka);G&&(n[0]=-1,r=null,q=0)},ue:function(m){m!==q&&(b.activeTexture(l[m]),q=m)},instance:function(m){function u(){na=void 0!==O.ha.videoWidth?O.ha.videoWidth:O.ha.width;Y=void 0!==O.ha.videoHeight?O.ha.videoHeight:O.ha.height}function E(da){var ma=b.getError();if("FUCKING_BIG_ERROR"===ma)return!1;b.texImage2D(b.TEXTURE_2D,0,bb,Ya,Za,da);ma=b.getError();ma!==b.NO_ERROR&&Ya!==b.RGBA&&(Ya=b.RGBA,b.texImage2D(b.TEXTURE_2D,
0,bb,Ya,Za,da));return!0}function R(){if(!X){a(ja);mb&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,mb);O.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,O.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,O.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));O.isAnisotropicFiltering&&"undefined"!==typeof T&&b.texParameterf(b.TEXTURE_2D,ca.Cl().TEXTURE_MAX_ANISOTROPY_EXT,
T.Yj);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,O.isLinear?b.LINEAR:b.NEAREST);O.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,O.isMipmap&&!xb?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,O.isMipmap&&!xb?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);Ya=D[O.F-1];bb=z[O.F-1];Za=v[y];if(Ea.ia()){var da=Ea.El();Ya===b.RGBA&&Za===b.FLOAT?O.isMipmap||O.isLinear?bb=Gb.Gl(b):Ea.ea()?da&&(bb=da):bb=b.RGBA16F||b.RGBA:Ya===b.RGB&&Za===b.FLOAT&&da&&(bb=da,Ya=
b.RGBA)}if(O.S&&!O.isFloat||O.isFloat&&O.isMipmap&&Gb.wm())bb=Ea.Fl(),Za=Ea.$e(b);O.Lf&&(Nb=O.Lf);O.isSrgb&&4===O.F&&(Ya=ca.Wl());if(O.ha)E(O.ha);else if(O.url)E(ua);else if(Pa){da=Pa;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,bb,na,Y,0,Ya,Za,da),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,bb,na,Y,0,Ya,Za,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,na,Y,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(V){b.texImage2D(b.TEXTURE_2D,0,bb,na,Y,0,Ya,
Za,null)}O.isKeepArray||(Pa=null)}else da=b.getError(),"FUCKING_BIG_ERROR"!==da&&(b.texImage2D(b.TEXTURE_2D,0,bb,na,Y,0,Ya,Za,null),da=b.getError(),da!==b.NO_ERROR&&(Ya=b.RGBA,O.S&&Za!==b.FLOAT&&(Za=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,bb,na,Y,0,Ya,Za,null))));if(O.isMipmap)if(!xb&&Ma)Ma.od(),Ob=!0;else if(xb){da=Math.log2(Math.min(na,Y));Fb=Array(1+da);Fb[0]=ja;for(var ma=1;ma<=da;++ma){var ab=Math.pow(2,ma),la=na/ab;ab=Y/ab;var N=b.createTexture();a(N);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,
b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,bb,la,ab,0,Ya,Za,null);a(null);Fb[ma]=N}Ob=!0}a(null);n[q]=-1;mb&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);ha=!0;O.J&&Ma&&(O.J(Ma),O.J=null)}}function Q(){for(var da=na*Y,ma=2*da,ab=3*da,la=0;la<da;++la)pa[0][la]=sb[la],pa[1][la]=sb[la+da],pa[2][la]=sb[la+ma],pa[3][la]=sb[la+ab]}function ea(){var da=na*Y*4;qa=[new Uint8Array(da),new Uint8Array(da),new Uint8Array(da),new Uint8Array(da)];pa=[new Float32Array(qa[0].buffer),
new Float32Array(qa[1].buffer),new Float32Array(qa[2].buffer),new Float32Array(qa[3].buffer)];Ha=new Uint8Array(4*da);sb=new Float32Array(Ha.buffer);oa=!0}function fa(){ka=new Uint8Array(na*Y*4);Kb=new Float32Array(ka.buffer);Cb=!0}var ka,O=Object.assign({},f,m),M=w++;null===O.isFlipY&&(O.isFlipY=O.url?!0:!1);O.data&&(O.array="string"===typeof O.data?qb(O.data):O.isFloat?new Float32Array(O.data):new Uint8Array(O.data),O.isFlipY=!1);var y=0,P=O.ha?!0:!1,J=null,U=null,ta=!1;O.S=O.S||O.isFloat;O.S&&
(y=1);!O.nm&&O.isFloat&&h&&!Ea.ea()&&(O.isFloat=!1);O.isFloat&&(y=2);O.isAnisotropicFiltering&&p&&!ca.vm()&&(O.isAnisotropicFiltering=!1);var ja=O.Rh||b.createTexture(),ua=null,Pa=!1,na=0,Y=0,ha=!1,X=!1,oa=!1,pa=null,qa=null,Ha=null,sb=null,bb=null,Ya=null,Za=null,mb=O.isFlipY,lc=(m=O.S&&O.isMipmap)&&Gb.Hk(),xb=m&&lc?!0:!1,Fb=null,Nb=-1,Ob=!1,Cb=!1,Kb=ka=null;O.width&&(na=O.width,Y=O.height?O.height:na);var Ma={get:function(){return ja},M:function(){return na},X:function(){return Y},Xl:function(){return O.url},
ki:function(){return O.isFloat},li:function(){return O.S},Mp:function(){return O.isLinear},od:function(){b.generateMipmap(b.TEXTURE_2D)},yk:function(da,ma){xb?(da||(da=Ma.Nh()),B.ue(ma),a(Fb[da]),n[ma]=-1):Ma.h(ma)},Nh:function(){-1===Nb&&(Nb=Math.log(na)/Math.log(2));return Nb},vl:function(da){if(xb){da||(da=Ma.Nh());ba.set("s12");B.ue(0);for(var ma=na,ab=Y,la=1;la<=da;++la)ma/=2,ab/=2,ba.O("u10",.25/ma,.25/ab),b.viewport(0,0,ma,ab),a(Fb[la-1]),b.framebufferTexture2D(Ba.sd(),b.COLOR_ATTACHMENT0,
b.TEXTURE_2D,Fb[la],0),Z.l(!1,1===la);n[0]=-1}else Ma.od()},kq:function(da){(P=!(Array.isArray(da)||da.constructor===Float32Array||da.constructor===Uint8Array))?(Pa=null,O.ha=da,u()):Pa=da},h:function(da){if(!ha)return!1;B.ue(da);if(n[da]===M)return!1;a(ja);n[da]=M;return!0},Oa:function(da){b.activeTexture(l[da]);q=da;a(ja);n[da]=M},o:function(){r=Ma;b.framebufferTexture2D(Ba.sd(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ja,0)},N:function(){r=Ma;b.viewport(0,0,na,Y);b.framebufferTexture2D(Ba.sd(),b.COLOR_ATTACHMENT0,
b.TEXTURE_2D,ja,0)},de:B.de,Kn:function(da,ma){na=da;Y=ma},resize:function(da,ma){Ma.Kn(da,ma);R()},clone:function(da){da=B.instance({width:na,height:Y,S:O.S,isFloat:O.isFloat,isLinear:O.isLinear,isMirrorY:O.isMirrorY,isFlipY:da?!mb:mb,isPot:O.isPot});pb.set("s0");Ba.ba();da.o();b.viewport(0,0,na,Y);Ma.h(0);Z.l(!0,!0);return da},Mc:function(){b.viewport(0,0,na,Y)},remove:function(){b.deleteTexture(ja);X=!0;x.splice(x.indexOf(Ma),1);Ma=null},refresh:function(){Ma.Oa(0);mb&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!0);P?b.texImage2D(b.TEXTURE_2D,0,bb,Ya,Za,O.ha):b.texImage2D(b.TEXTURE_2D,0,bb,na,Y,0,Ya,Za,Pa);mb&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Oi:function(){oa||ea();b.readPixels(0,0,na,4*Y,b.RGBA,b.UNSIGNED_BYTE,Ha);Q();return pa},fn:function(){oa||ea();return Ea.bg(0,0,na,4*Y,Ha).then(function(){Q();return pa})},hn:function(){Cb||fa();b.readPixels(0,0,na,Y,b.RGBA,b.UNSIGNED_BYTE,ka);return Kb},gn:function(){Cb||fa();return Ea.bg(0,0,na,Y,ka)},ph:function(da){Ba.$();ba.set("s13");Ma.h(0);if(da)b.viewport(0,
0,na,Y),ba.Wn("u11",.25,.25,.25,.25),Z.l(!1,!0);else for(da=0;4>da;++da)b.viewport(0,Y*da,na,Y),ba.xa("u11",k[da]),Z.l(!1,0===da)},Jg:function(da){var ma;if(ma=Za===v[0])null!==F.qf?ma=F.qf:(ma=e(new Uint8Array([127,127,127,127]),!1),ma=null===ma?!0:F.qf=ma),ma=!ma;a(ja);mb&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);ma?(ta||(J=document.createElement("canvas"),J.width=na,J.height=Y,U=J.getContext("2d"),U.createImageData(na,Y),ta=!0),null.data.set(da),U.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,
0,bb,Ya,Za,J)):b.texImage2D(b.TEXTURE_2D,0,bb,na,Y,0,Ya,Za,da);n[q]=M;mb&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},xq:function(da,ma){a(ja);ma&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,bb,Ya,Za,da);n[q]=M;ma&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Yb:function(da,ma){var ab=na*Y,la=4*ab;da=O.S?da?"RGBE":"JSON":"RGBA";ma&&(da=ma);ma=Ea.ia()&&!1;var N=null;switch(da){case "RGBE":N="s44";break;case "JSON":N=ma?"s0":"s13";break;case "RGBA":case "RGBAARRAY":N="s7"}oa||("RGBA"===
da||"RGBE"===da||"RGBAARRAY"===da?(qa=new Uint8Array(la),oa=!0):"JSON"!==da||ma||ea());Ba.$();ba.set(N);Ma.h(0);la=null;if("RGBA"===da||"RGBE"===da||"RGBAARRAY"===da){b.viewport(0,0,na,Y);Z.l(!0,!0);b.readPixels(0,0,na,Y,b.RGBA,b.UNSIGNED_BYTE,qa);if("RGBAARRAY"===da)return{data:qa};g||(A=document.createElement("canvas"),K=A.getContext("2d"),g=!0);A.width=na;A.height=Y;ab=K.createImageData(na,Y);ab.data.set(qa);K.putImageData(ab,0,0);la=A.toDataURL("image/png")}else if("JSON"===da)if(ma)la=new Float32Array(ab),
b.viewport(0,0,na,Y),Z.l(!0,!0),b.readPixels(0,0,na,Y,b.RGBA,b.FLOAT,la);else{for(la=0;4>la;++la)b.viewport(0,Y*la,na,Y),ba.xa("u11",k[la]),Z.l(!la,!la);Ma.Oi();la=Array(ab);for(ma=0;ma<ab;++ma)la[4*ma]=pa[0][ma],la[4*ma+1]=pa[1][ma],la[4*ma+2]=pa[2][ma],la[4*ma+3]=pa[3][ma]}return{format:da,data:la,width:na,height:Y,isMirrorY:O.isMirrorY,isFlipY:"RGBA"===da?O.isFlipY:!O.isFlipY}}};O.isMipmap&&!xb&&ha&&!Ob&&(Ma.od(),Ob=!0);if(O.url)a(ja),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,
null),ua=new Image,ua.hp="Anonymous",ua.crossOrigin="Anonymous",ua.src=O.url,ua.onload=function(){na=ua.width;Y=ua.height;R()};else if(O.ha){var Db=function(){u();na?R():setTimeout(Db,1)};Db()}else O.array?(O.S&&!O.isFloat?O.array instanceof Uint16Array?(Pa=O.array,R()):d()?(Pa=c(O.array),R()):(R(),B.Dh(b,ja,Ma.M(),Ma.X(),O.array,mb,!0)):(Pa=O.isFloat?O.array instanceof Float32Array?O.array:new Float32Array(O.array):O.array instanceof Uint8Array?O.array:new Uint8Array(O.array),R()),O.isKeepArray||
(Pa&&Pa!==O.array&&(Pa=null),delete O.array)):O.Rh?ha=!0:R();Ma.Dp=Ma.M;O.J&&ha&&(O.J(Ma),O.J=null);x.push(Ma);return Ma},$:function(m){m!==q&&(b.activeTexture(l[m]),q=m);n[m]=-1;a(null)},Ak:function(m){t.random.h(m)},de:function(){r=null;b.framebufferTexture2D(Ba.sd(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==q&&b.activeTexture(l[0]);for(var m=0;m<l.length;++m)n[m]=-1;q=-1},$p:function(){q=-1},Bj:function(){for(var m=0;m<l.length;++m)B.$(m)},L:function(){t&&(t.random.remove(),
t.zj.remove())},Oc:function(m,u){if("RGBA"===m.format||"RGBE"===m.format){var E=new Image;E.src=m.data;E.onload=function(){B.instance({isMirrorY:m.isMirrorY,isFlipY:m.isFlipY,isFloat:!1,ha:E,J:function(R){if("RGBA"===m.format)u(R);else{var Q=m.width,ea=m.height,fa=B.instance({isMirrorY:m.isMirrorY,isFloat:!0,width:Q,height:ea,isFlipY:m.isFlipY});Ba.ba();b.viewport(0,0,Q,ea);ba.set("s45");fa.o();R.h(0);Z.l(!0,!0);B.$(0);u(fa);Ea.flush();setTimeout(R.remove,50)}}})}}else"JSON"===m.format?u(B.instance({isFloat:!0,
isFlipY:m.isFlipY,width:m.width,height:m.height,array:new Float32Array(m.data)})):u(!1)},Nk:c,v:function(){r&&(Ba.ba(),B.de(),Ba.$());B.Bj();x.slice(0).forEach(function(m){m.remove()});x.splice(0);G=!1;w=0;"undefined"!==typeof Gb&&Gb.v();t=null}};return B}(),Hc={instance:function(a){var c=[aa.instance(a),aa.instance(a)],d=[c[1],c[0]],e=d,q={cj:function(l){e[1].o();e[0].h(l);q.oj()},Fn:function(l){e[1].N();e[0].h(l);q.oj()},oj:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},
h:function(l){e[0].h(l)},Oa:function(l){e[0].Oa(l)},zk:function(l){e[1].h(l)},yp:function(){return e[0]},Bp:function(){return e[1]},Jg:function(l){e[0].Jg(l);e[1].Jg(l)},remove:function(){e[0].remove();e[1].remove();e=null},sync:function(){q.Fn(0);ba.set("s0");Z.l(!1,!1)}};return q}},Z=function(){function a(t){var r={ga_:null,indices:null};r.ga_=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r.ga_);t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),t.STATIC_DRAW);r.indices=t.createBuffer();
t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indices);t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),t.STATIC_DRAW);return r}var c=null,d=0,e=!1,q=[],l=-2,w=-2,n={reset:function(){w=l=-2},m:function(){e||(c=a(b),n.$c(),e=!0)},instance:function(t){var r=d++,v=t.indices?t.indices.length:0,D="undefined"===typeof t.mode?b.STATIC_DRAW:t.mode,z=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,z);b.bufferData(b.ARRAY_BUFFER,t.ga_ instanceof Float32Array?t.ga_:new Float32Array(t.ga_),D);l=r;var G=null,
x=null,f=null;if(t.indices){G=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,G);var g=null;65536>t.indices.length?(g=Uint16Array,x=b.UNSIGNED_SHORT,f=2):(g=Uint32Array,x=b.UNSIGNED_INT,f=4);g=t.indices instanceof g?t.indices:new g(t.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,g,D);w=r}var A={tc:function(K){l!==r&&(b.bindBuffer(b.ARRAY_BUFFER,z),l=r);K&&pb.Vd()},wk:function(){w!==r&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,G),w=r)},bind:function(K){A.tc(K);A.wk()},U:function(){b.drawElements(b.TRIANGLES,
v,x,0)},Fa:function(K,k){b.drawElements(b.TRIANGLES,K,x,k*f)},remove:function(){b.deleteBuffer(z);t.indices&&b.deleteBuffer(G);A=null}};q.push(A);return A},$c:function(){-1!==l&&(b.bindBuffer(b.ARRAY_BUFFER,c.ga_),l=-1);-1!==w&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),w=-1)},l:function(t,r){t&&Z.$c();r&&pb.ac();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},Jb:function(t){t=t||b;var r=a(t);t.bindBuffer(t.ARRAY_BUFFER,r.ga_);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indices);pb.bc(t);t.clear(t.COLOR_BUFFER_BIT);
t.drawElements(t.TRIANGLES,3,t.UNSIGNED_SHORT,0);t.flush();t.bindBuffer(t.ARRAY_BUFFER,null);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);t.deleteBuffer(r.ga_);t.deleteBuffer(r.indices);n.reset();e&&(n.$c(),pb.ac())},L:function(){var t=b,r=c;t.deleteBuffer(r.ga_);t.deleteBuffer(r.indices)},v:function(){n.L();q.forEach(function(t){t.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);n.reset();e=!1;q.splice(0);d=0}};return n}(),Ba=function(){var a=null,c=null,d=null,
e=!1,q=[],l={la:-2,Ch:1},w={Tb:function(){return e},m:function(){if(!e){a=b.createFramebuffer();var n=Ea.ia();c=n&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=n&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},Dl:function(){return c},Jh:function(){return d},sd:function(){return b.FRAMEBUFFER},Cp:function(){return l},rp:function(){return a},instance:function(n){void 0===n.Ac&&(n.Ac=!1);var t=n.ja?n.ja:null,r=n.width,v=void 0!==n.height?n.height:n.width,D=a,z=null,G=!1,x=!1,f=0;
t&&(r=r?r:t.M(),v=v?v:t.X());var g={Xi:function(){G||(D=b.createFramebuffer(),G=!0,f=l.Ch++)},Vc:function(){g.Xi();g.o();z=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,z);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,r,v);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,z);b.clearDepth(1)},bind:function(A,K){f!==l.la&&(b.bindFramebuffer(c,D),l.la=f);t&&t.o();K&&b.viewport(0,0,r,v);A&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Xg:function(){f!==l.la&&(b.bindFramebuffer(c,
D),l.la=f)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Ee:function(){b.clear(b.COLOR_BUFFER_BIT)},eh:function(){b.clear(b.DEPTH_BUFFER_BIT)},Mc:function(){b.viewport(0,0,r,v)},o:function(){f!==l.la&&(b.bindFramebuffer(c,D),l.la=f)},rtt:function(A){t=A;l.la!==f&&(b.bindFramebuffer(b.FRAMEBUFFER,D),l.la=f);A.o()},$:function(){b.bindFramebuffer(c,null);l.la=-1},resize:function(A,K){r=A;v=K;z&&(b.bindRenderbuffer(b.RENDERBUFFER,z),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,
r,v))},remove:function(){D===a||x||(b.bindFramebuffer(c,D),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),z&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(D),z&&b.deleteRenderbuffer(z));x=!0}};n.Ac&&g.Vc();q.push(g);return g},$:function(){b.bindFramebuffer(c,null);l.la=-1},vq:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);Ea.lj();l.la=-1},reset:function(){l.la=-2},ba:function(){0!==
l.la&&(b.bindFramebuffer(c,a),l.la=0)},clear:function(){Ea.lj();b.clear(b.COLOR_BUFFER_BIT)},v:function(){w.$();q.forEach(function(n){n.remove()});null!==a&&(b.deleteFramebuffer(a),a=null);w.reset();e=!1;q.splice(0);l.Ch=1}};return w}(),Ea=function(){function a(){n="undefined"===typeof jb?ca:jb;t=!0}function c(k,p){for(var h=0;h<k.length;++h){var H=p.getExtension(k[h]);if(H)return H}return null}function d(){null!==g.ce&&(clearTimeout(g.ce),g.ce=null);g.Ob=!1}function e(k){if(0===g.rb.length){g.za=
b.PIXEL_PACK_BUFFER;g.rb.splice(0);g.td.splice(0);for(var p=0;p<g.vc;++p)g.rb.push(b.createBuffer()),g.td.push(-1);g.Pa=0;g.Rf=0}b.bindBuffer(g.za,g.rb[g.Pa]);k.byteLength!==g.td[g.Pa]&&(b.bufferData(g.za,k.byteLength,b.STREAM_READ),g.td[g.Pa]=k.byteLength);g.Ip=!0}function q(){b.bindBuffer(g.za,null)}function l(){g.Mb.forEach(function(k){b.deleteSync(k)});g.Mb.splice(0)}function w(){g.Pa=(g.Pa+1)%g.vc;++g.Rf}var n=null,t=!1,r={bi:!1,Bg:null,Cg:null,hi:!1,tm:!1,Dg:null,ii:!1,Eg:null,ci:!1,Fe:null,
km:!1,Ge:null,lm:!1},v=null,D={Ra:!0,Ta:!0,Ve:!0,Ni:!1},z=null,G=!0,x=null,f=null,g={Ok:1,vc:-1,Pa:0,Rf:0,Ob:!1,rb:[],Mb:[],td:[],za:null,ce:null},A="undefined"===typeof window?{}:window,K={m:function(){if(t)return!0;K.reset();t||a();var k=b;if(!v.bi){v.Bg=K.zh(k);A.GL_EXT_FLOAT=v.Bg;v.hi=v.Bg?!0:!1;if(v.hi||K.ia())v.Cg=K.Ah(k),v.tm=v.Cg?!0:!1,A.GL_EXT_FLOATLINEAR=v.Cg;v.bi=!0}if(!v.ci){v.Dg=K.kd(k);v.Dg&&(v.ii=!0,A.GL_EXT_HALFFLOAT=v.Dg);if(v.ii||K.ia())v.Eg=K.Bh(k),A.GL_EXT_HALFFLOATLINEAR=v.Eg;
v.Kp=v.Eg?!0:!1;v.ci=!0}v.Fe=K.xh(k);v.km=v.Fe?!0:!1;A.GL_EXT_COLORBUFFERFLOAT=v.Fe;v.Ge=K.yh(k);v.lm=v.Ge?!0:!1;A.GL_EXT_COLORBUFFERHALFFLOAT=v.Ge;Ba.m();aa.m();if(!K.$k())return!1;Z.m();aa.em();return!0},reset:function(){v=Object.assign({},r);z=Object.assign({},D)},M:function(){t||a();return n.M()},X:function(){t||a();return n.X()},ia:function(){t||a();return n.ia()},wh:function(k){K.xh(k);K.yh(k);K.zh(k);K.Ah(k);K.kd(k);K.Bh(k)},xh:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float",
"OES_color_buffer_float"]),yh:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),zh:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Ah:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),kd:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Bh:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear",
"WEBKIT_OES_texture_half_float_linear"]),$e:function(k){var p=K.kd(k);return p&&p.HALF_FLOAT_OES?p.HALF_FLOAT_OES:k.HALF_FLOAT||k.FLOAT},El:function(){return f||b.RGBA32F||b.RGBA},Fl:function(){return x||b.RGBA16F||b.RGBA},yl:function(){return z},ea:function(){return z.Ra},bp:function(){return z.Ta},Gk:function(){return z.Ve},Jk:function(){return z.Ni&&G},yj:function(k){G=k;!k&&g.Ob&&(l(),b.bindBuffer(g.za,null),g.Ob=!1)},Np:function(){return g.Ob},ae:function(k,p,h){function H(){k.bindTexture(k.TEXTURE_2D,
null);k.bindFramebuffer(I,null);k.deleteTexture(m);k.deleteFramebuffer(B)}var I=k.FRAMEBUFFER,F=k.NEAREST,B=k.createFramebuffer();k.bindFramebuffer(I,B);var m=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,m);k.pixelStorei(k.UNPACK_FLIP_Y_WEBGL,!1);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,F);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,
F);k.texImage2D(k.TEXTURE_2D,0,p,3,3,0,k.RGBA,h,null);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_2D,m,0);if(k.checkFramebufferStatus(k.READ_FRAMEBUFFER||k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)return H(),!1;pb.Td(k);k.clearColor(0,0,0,0);k.viewport(0,0,3,3);k.disable(k.DEPTH_TEST);k.clear(k.COLOR_BUFFER_BIT);Z.Jb(k);k.bindFramebuffer(I,null);pb.ub(k);k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,m);Z.Jb(k);p=new Uint8Array(36);k.readPixels(0,0,3,3,k.RGBA,k.UNSIGNED_BYTE,
p);H();for(h=0;36>h;++h)if(3!==h%4&&3<Math.abs(p[h]-127))return!1;return!0},Ne:function(k){var p={Ra:!1,Ta:!1};k.disable(k.BLEND);k.clearColor(0,0,0,0);k.clear(k.COLOR_BUFFER_BIT);k.RGBA32F&&K.ae(k,k.RGBA32F,k.FLOAT)&&(p.Ra=!0,f=k.RGBA32F);!p.Ra&&K.ae(k,k.RGBA,k.FLOAT)&&(p.Ra=!0,f=k.RGBA);var h=K.$e(k);x=null;k.RGBA16F&&K.ae(k,k.RGBA16F,h)&&(p.Ta=!0,x=k.RGBA16F);!p.Ta&&K.ae(k,k.RGBA,h)&&(p.Ta=!0,x=k.RGBA);return p},bl:function(){var k=Ba.instance({width:2});k.Xi();var p=aa.instance({width:2,isFloat:!0,
F:3});k.o();p.o();K.flush();b.checkFramebufferStatus(Ba.Jh())!==b.FRAMEBUFFER_COMPLETE?(aa.Rn(),z.Ve=!1):z.Ve=!0;k.remove();p.remove()},cl:function(){var k=!1;K.ia()&&(k="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(p){return"undefined"!==typeof b[p]}));z.Ni=k},$k:function(){var k=K.Ne(b);Object.assign(z,k);if(!z.Ra&&!z.Ta)return!1;K.bl();K.cl();return!0},jn:function(k,p,h,H,I){b.readPixels(k,p,h,H,b.RGBA,b.UNSIGNED_BYTE,
I);return Promise.resolve(I,!1)},bg:function(k,p,h,H,I,F,B){if(!K.Jk())return K.jn(k,p,h,H,I);g.vc=B||g.Ok;e(I);b.readPixels(k,p,h,H,b.RGBA,b.UNSIGNED_BYTE,0);g.Mb[g.Pa]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);K.flush();var m=!1;return new Promise(function(u,E){function R(){if(!g.Ob)return d(),q(),w(),E(),!1;var Q=(g.Pa+1)%g.vc;switch(b.clientWaitSync(g.Mb[Q],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(g.Mb[Q]),g.Mb[Q]=null,b.bindBuffer(g.za,g.rb[Q]),
b.getBufferSubData(g.za,0,I),q(),w(),u(I,m),!0}g.ce=setTimeout(R,0);return!1}d();g.Rf+1<g.vc?(q(),w(),u(I,!1)):(g.Ob=!0,R()||!F||m||(m=!0,F()))})},lj:function(){b.viewport(0,0,K.M(),K.X())},flush:function(){b.flush()},v:function(){d();l();aa.v();Ba.v();Z.v();g.rb.forEach(function(k){b.deleteBuffer(k)});g.rb.splice(0);pb.reset();t=!1}};return K}(),Gb=function(){function a(h,H,I,F){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,F?g.NEAREST_MIPMAP_NEAREST:g.LINEAR);var B=null;if(null!==I)try{B=g.getError();
if("FUCKING_BIG_ERROR"===B)return!1;g.texImage2D(g.TEXTURE_2D,0,h,4,4,0,g.RGBA,H,I);B=g.getError();if(B!==g.NO_ERROR)return!1}catch(m){return!1}F&&g.generateMipmap(g.TEXTURE_2D);g.clear(g.COLOR_BUFFER_BIT);Z.Jb(g);B=g.getError();if("FUCKING_BIG_ERROR"===B)return!1;g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,v);B=g.getError();B===g.INVALID_OPERATION&&"undefined"!==typeof g.PIXEL_PACK_BUFFER&&(g.bindBuffer(g.PIXEL_PACK_BUFFER,null),g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,v),B=g.getError());if(B!==
g.NO_ERROR)return!1;I=!0;for(F=0;16>F;++F)I=I&&4>Math.abs(v[F]-127);I&&(t.Ji=H,t.$h=h);return I}function c(h,H){return A.Ra&&a(h,g.FLOAT,new Float32Array(D),H)?(n=w.Ug,!0):!1}function d(h,H,I){if(!A.Ta)return!1;var F=aa.Nk(D),B=Ea.kd(g);if(B&&B.HALF_FLOAT_OES&&a(h,B.HALF_FLOAT_OES,F,H)||g.HALF_FLOAT&&a(h,g.HALF_FLOAT,F,H))return n=w.oc,!0;F=new Float32Array(D);if(a(h,g.FLOAT,F,H))return n=w.oc,!0;g.bindTexture(g.TEXTURE_2D,I);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,2,2,0,g.RGBA,g.UNSIGNED_BYTE,null);g.bindFramebuffer(t.ed,
p);aa.Dh(g,I,2,2,F,!1,!1);g.bindFramebuffer(t.ed,null);g.bindTexture(g.TEXTURE_2D,I);return a(h,null,null,H)?(n=w.oc,!0):!1}function e(h,H,I){r=!0;if(d(h,!0,I)||c(H,!0))return!0;r=!1;return d(h,!1,I)||c(H,!1)?!0:!1}function q(h){if(n===w.H){g=h||b;n=w.RGBA8;r=!0;Ea.wh(g);A||(A=Ea.Ne(g));Ba.reset();p=g.createFramebuffer();t.ed=g.DRAW_FRAMEBUFFER||g.FRAMEBUFFER;g.bindFramebuffer(t.ed,null);g.clearColor(0,0,0,0);g.viewport(0,0,2,2);ba.H();K=ba.ub(g);h=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,
h);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);k=h;var H=h=g.RGBA,I=g.RGBA16F,F=g.RGBA32F;F&&(h=F);I&&(H=I);if((I||F)&&e(H,h,k))return l(),!0;h=H=g.RGBA;if(e(H,h,k))return l(),!0;n=w.RGBA8;l();return!1}}function l(){g.deleteProgram(K.ma);g.deleteTexture(k);k=K=null}for(var w={H:-1,Ug:3,oc:2,RGBA8:0},n=w.H,t={Ji:null,$h:null,ed:null},r=!0,v=new Uint8Array(16),D=Array(64),
z=0;4>z;++z)for(var G=0;4>G;++G){var x=0===(G+z)%2?1:0,f=4*z+G;D[4*f]=x;D[4*f+1]=x;D[4*f+2]=x;D[4*f+3]=x}var g=null,A=null,K=null,k=null,p=null;return{Hk:function(h){q(h);return r},bh:function(h,H){n===w.H&&(typeof("undefined"!==H)&&(A=H),q(h));return n!==w.RGBA8},Lp:function(h){q(h);return n===w.Ug},wm:function(h){q(h);return n===w.oc},xp:function(h){q(h);return t.Ji},Gl:function(h){q(h);return t.$h},v:function(){g=null;r=!0;n=w.H;A=null}}}(),Uc={instance:function(a){var c=null,d=!1,e=!1,q=null,
l=!1,w=!1,n=null,t="undefined"===typeof a.preprocessing?!1:a.preprocessing,r="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,L&&void 0!==L.aa&&(a.mask=L.aa+a.mask),c=aa.instance({isFloat:!1,url:a.mask}));var v=!1;a.customInputShader&&(v="s46",ba.na({name:"_",id:v,g:a.customInputShader,wq:["uSource"],precision:"lowp"}),ba.j(v,[{type:"1i",name:"_",value:0}]));switch(t){case "sobel":n="s33";l=!0;break;case "meanNormalization":n="s34";l=!0;break;case "grayScale":n="s30";
l=!1;break;case "grayScaleTilt":n="s31";w=!0;l=!1;break;case "rgbGrayTilt":n="s32";w=!0;l=!1;break;case "copy":n=v?v:"s0";break;case "inputLightRegulation":n=v?v:"s30";q=id.instance({Zh:r,Di:a.size,yi:a.nBlurPass,Ad:!1});e=!0;break;case "inputMix0":n="none";q=jd.instance({ta:r,Hj:a.varianceMin,Yg:a.blurKernelSizePx,gain:a.gain||1,Ad:!1});e=!0;break;case "direct":case "none":n="abort";break;default:n="s4"}w&&ba.j(n,[{name:"u27",type:"1f",value:a.tilt}]);d&&(n+="Mask");var D=aa.instance({isFloat:!1,
isPot:!1,width:a.size}),z={M:function(){return r},af:function(){return z.M()},Kl:function(){return e?q.bf():D},wa:function(G){Ba.ba();"abort"!==n&&("none"!==n&&(ba.set(n),l&&ba.G("u28",1/a.size),D.N(),d&&c.h(1),Z.l(!1,!1),D.h(0),G=D),e&&q.process(G))},v:function(){D.remove();d&&c.remove()}};return z}},Vc={instance:function(a){function c(H){q.forEach(function(I,F){l[F][0]=H[0][I];l[F][1]=H[1][I];l[F][2]=H[2][I];l[F][3]=H[3][I]});return l}a.normalize=a.normalize||!1;var d={input:null,bias:null,sf:null,
Va:null,Kd:null,Uf:null,Vf:null},e=null,q=[],l=[],w=!1,n=null,t=!0,r=-1,v=a.isReorganize?a.isReorganize:!1,D=a.kernelsCount?!0:!1,z=["s27","s28","s29"][a.shiftRGBAMode||0],G={isEnabled:!1};a.qm?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Pd.af(),t=!1):"full"===a.connectivityUp&&(a.sparsity=a.Pd.af());var x={elu:"s16",elu01:"s17",relu:"s15",arctan:"s18",arctan2:"s19",sigmoid:"s14",copy:"s0"}[a.activation],f=a.sparsity*a.sparsity,g=!1,A=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K=
"s35";break;case 4:K="s36"}g=!0;A/=a.maxPooling.size;d.Uf=aa.instance({isFloat:!0,isPot:!1,width:A})}var k=-1,p=null;t&&(d.Va=aa.instance({isFloat:!0,isPot:!1,width:a.size}));d.bias=aa.instance(a.bias);var h={M:function(){return a.size},af:function(){return A},Gh:function(){return a.classesCount},xk:function(H){e.h(H)},$m:function(){a.remap&&a.remap.isEnabled&&(G={isEnabled:!0,Km:aa.instance(a.remap.maskTexture),Cd:a.remap.layers.map(function(H){return a.parent.Hl(H)}),depth:a.remap.depth})},Sn:function(){switch(a.connectivityUp){case "direct":p=
kd.instance(a.connectivity);break;case "square":p=ld.instance(a.connectivity);break;case "squareFast":p=md.instance(a.connectivity,a.activation);break;case "full":p=nd.instance(a.connectivity);break;case "conv":r=a.kernelsCount,p=od.instance(a.connectivity),v&&(d.Kd=aa.instance({width:A,isFloat:!0,isFlipY:!1,isPot:!1}))}if(p.fc){var H=a.size*a.sparsity;k=Math.log(H/a.size)/Math.log(2);d.input=aa.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:H,Lf:k});d.sf=aa.instance({isFloat:!0,isPot:!0,width:a.size})}},
wa:function(H,I){e=H;p.fc?(d.input.N(),D&&d.bias.h(2),p.wa(G),d.input.h(0),d.input.vl(k),d.sf.N(),D?ba.set("s0"):(ba.set(z),ba.G("u4",f),d.bias.h(1)),d.input.yk(k,0),Z.l(!1,!1),ba.set(x),d.Va.o(),d.sf.h(0),Z.l(!1,!1)):(d.Va.N(),d.bias.h(1),p.wa());if(t)return g?(d.Uf.N(),d.Va.h(0),ba.set(K),ba.O("u10",1/a.size,1/a.size),Z.l(!1,!1),I=d.Uf):I=d.Va,I.h(0),v&&(d.Kd.o(),ba.set("s21"),ba.O("u14",r,A/r),Z.l(!1,!1),I=d.Kd,d.Kd.h(0)),I;var F=d.Va;a.normalize&&(ba.set("gpuRawAvg"===w?"s9":"s8"),ba.G("u6",1/
a.size),d.Vf.N(),d.Va.h(0),Z.l(!1,!1),F=d.Vf);H=null;switch(w){case "cpuRGBA2Float":F.ph(!1);I?H=h.dn(F).then(n):(F=h.en(F),n(F));break;case "cpuMeanFloat":F.ph(!0);if(I)H=F.gn().then(n);else{F=F.hn();for(var B=0;B<F.length;++B);n(F)}break;case "gpuRawAvg":case "gpuRaw":F.h(0);case "none":null!==n&&n(F)}I&&null===H&&(H=Promise.resolve());return H},Qk:function(H){var I=!1;H&&(w=H.Wf||"none",n=H.Tf||null,I=H.Ci?!0:!1);d.Va=aa.instance({isFloat:!0,isPot:!0,isLinear:I,isMipmap:!1,width:a.size});H="undefined"!==
typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var F=I=0,B=0;I<H;++I)q.push(F+(a.size-1-B)*a.size),l.push([-1,-1,-1,-1]),++F,F===a.size&&(F=0,++B);a.normalize&&(d.Vf=aa.instance({isFloat:!0,isPot:!0,width:a.size}))},dn:function(H){return H.fn().then(c)},en:function(H){H=H.Oi();c(H);return l},v:function(){for(var H in d){var I=d[H];I&&I.remove()}p&&(p.v(),p=null)}};a.Pd&&h.Sn(a.Pd);return h}},kd={instance:function(a){var c=aa.instance(a.weights);return{fc:!0,rd:function(){return 1},
v:function(){c.remove()},Yl:function(){return c},wa:function(){ba.set("s26");c.h(1);Z.l(!1,!1)}}}},nd={instance:function(a){var c=a.fromLayerSize,d=aa.instance(a.weights);return{fc:!0,rd:function(){return c},v:function(){d.remove()},wa:function(e){if(e.isEnabled){ba.set("s24");e.Km.h(3);for(var q=Math.min(e.Cd.length,e.depth),l=0;l<q;++l)e.Cd[l].xk(4+l)}else ba.set("s23");ba.G("u18",a.toLayerSize);ba.G("u19",a.fromLayerSize);d.h(1);Z.l(!1,!1)}}}},ld={instance:function(a){for(var c=a.fromLayerSize,
d=a.toLayerSize,e=a.toSparsity,q=e*d,l=q/c,w=c/d,n=0,t=0,r=0,v=Array(e*d*e*d*4),D=Array(e*d*e*d*4),z=Array(c*c),G=0;G<z.length;++G)z[G]=0;G=Math.floor(e/2);for(var x=.5/d,f=.5/c,g=.5/q,A=0;A<d;++A)for(var K=Math.round(A*w),k=0;k<d;++k){var p=Math.round(k*w),h=A/d,H=k/d;h+=x;H+=x;for(var I=0;I<e;++I){var F=K+I-G;0>F&&(F+=c);F>=c&&(F-=c);for(var B=0;B<e;++B){var m=n/q,u=t/q,E=p+B-G;0>E&&(E+=c);E>=c&&(E-=c);var R=F/c,Q=E/c;u=1-u-1/q;R+=f;Q+=f;m+=g;u+=g;var ea=A*e+I,fa=k*e+B;fa=d*e-fa-1;ea=fa*d*e+ea;
v[4*ea]=m;v[4*ea+1]=u;v[4*ea+2]=R;v[4*ea+3]=Q;Q=z[E*c+F]++;ea=Q%l;R=F*l+ea;E=E*l+(Q-ea)/l;E=c*l-1-E;E=E*c*l+R;D[4*E]=m;D[4*E+1]=u;D[4*E+2]=h;D[4*E+3]=H;++n>=q&&(n=0,++t);++r}}}z=null;var ka=aa.instance(a.weights);delete a.weights.data;var O=aa.instance({width:q,isFloat:!0,array:new Float32Array(D),isPot:!0});D=null;var M=aa.instance({width:q,isFloat:!0,array:new Float32Array(v),isPot:!0});v=null;return{fc:!0,rd:function(){return l},v:function(){O.remove();M.remove();ka.remove()},wa:function(){ba.set("s22");
ka.h(1);M.h(2);Z.l(!1,!1)}}}},od={instance:function(a){var c=a.kernelsCount,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,q=a.inputScale||[1,1],l=aa.instance(a.weights);return{fc:!0,rd:function(){return e},Fp:function(){return d},Yl:function(){return l},v:function(){l.remove()},wa:function(){ba.set("s25");ba.og("u26",q);ba.G("u24",c);ba.G("u25",d);ba.G("u18",a.toLayerSize);ba.G("u19",a.fromLayerSize);l.h(1);Z.l(!1,!1)}}}},md={instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,q=a.toSparsity,
l=a.stride?a.stride:1,w=q*e/d,n=e<d,t=d/e,r=aa.instance(a.weights),v="s47"+[d.toString(),e.toString(),q.toString(),l.toString(),c].join("_");ba.sl(v)||(a=Xa(c),e=[{type:"1f",name:"u18",value:e},{type:"1f",name:"u30",value:l}],n&&e.push({type:"1f",name:"u19",value:d}),d=[(n?w:q).toFixed(1),a],n&&d.push(t.toFixed(1)),ba.gm(n?"s41":"s40",v,d),ba.j(v,e.concat([{type:"1i",name:"u16",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u15",value:3}])));return{fc:!1,rd:function(){return w},v:function(){r.remove()},
wa:function(){ba.set(v);r.h(3);Z.l(!1,!1)}}}},id={instance:function(a){var c=a.yi?a.yi:3,d=a.Zh?a.Zh:64,e=a.Di?a.Di:64,q=a.Ad?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var l=aa.instance(a),w=aa.instance(a),n=aa.instance(a),t=aa.instance(a),r=aa.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),v=1/d;return{process:function(D){ba.set("s37");t.o();Z.l(q,!1);ba.set("s38");for(var z=0;z<c;++z)l.o(),ba.O("u10",v,0),Z.l(q,!1),n.o(),t.h(0),Z.l(q,!1),w.o(),l.h(0),ba.O("u10",0,v),Z.l(q,!1),t.o(),n.h(0),
Z.l(q,!1),z!==c-1&&w.h(0);ba.set("s39");r.o();D.h(0);w.h(1);t.h(2);Z.l(q,!1);r.h(0)},bf:function(){return r}}}},jd={instance:function(a){function c(v){return aa.instance({isFloat:v,width:d.ta,isPot:!1,isFlipY:!1})}var d=Object.assign({Hj:.1,Yg:9,ta:128,gain:1,Ad:!1},a),e=c(!1),q=[c(!1),c(!1),c(!1)],l=[c(!1),c(!1),c(!1)],w=c(!0),n=[e,l[0],l[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.Yg-1)/2).toFixed(2)).replace("2.2222",(1/d.ta).toFixed(6));var t="uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.,1.,1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,i=texture2D(u35,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(j-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.Hj.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),r={u1:0};ba.ve([{id:"s49",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.,1.,1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",u:r,i:["u1"],precision:"lowp"},{id:"s50",name:"_",g:a,u:r,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",g:t,u:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){ba.set("s49");e.N();Z.l(d.Ad,!1);ba.set("s50");for(var v=0;3>v;++v)ba.O("u31",1,0),q[v].o(),
n[v].h(0),Z.l(!1,!1),ba.O("u31",0,1),l[v].o(),q[v].h(0),Z.l(!1,!1);ba.set("s51");w.o();e.h(0);l[0].h(1);l[1].h(2);l[2].h(3);Z.l(!1,!1);w.h(0)},bf:function(){return w}}}},Eb=function(){function a(f,g,A,K,k,p,h){if(!G)if(h===p.length)k();else{switch(p[h]){case "A":A();break;case "D":f();break;case "S":g().then(function(H,I){x.xj();a(f,g,A,I?null:K,k,p,++h)}).catch(function(H){console.log("An error occurred in the WebAR loop: ",H);k()});return;case "R":K&&K()}a(f,g,A,K,k,p,++h)}}var c={n:5,Qf:1,pi:0,
nd:[35,49],jd:[2,200],k:.7,qo:200,Um:.05},d=-1,e=null,q=-1,l=-1,w=0,n=-1,t=-1,r=0,v=0,D=c.jd[1],z=Math.log(2),G=!0,x={T:function(){switch(d){case -1:return-1;case 0:return t+e.pi;case 1:return r}},Hh:function(f){return Math.pow(Math.min(Math.max(n,0),e.n-1)/(e.n-1),f||1)},m:function(f){e=Object.assign({},c,f);n=t=e.Qf;d=0;x.reset()},xj:function(f){f=("undefined"===typeof f?Date.now():f)||0;var g=Math.min(Math.max(f-v,e.jd[0]),e.jd[1]);D=g;v=f;var A=-1===q?0:e.k;q=Math.min(Math.max(1E3/g,5),120)*(1-
A)+q*A;f-l>e.qo&&5<++w&&(g=e.k,n=n*(1-g)+(q<e.nd[0]?t-1:q>e.nd[1]?t+1:t)*g,Math.abs(n-t)>1-e.Um&&(g=Math.min(Math.max(Math.round(n),0),e.n-1),g!==t&&(n=t=g,q=(e.nd[1]-e.nd[0])/2)),l=f)},dg:function(f,g,A,K,k,p){G=!1;a(f,g,A,K,k,p,0)},stop:function(){G=!0},Mn:function(f){r=f;d=1},po:function(){d=0;x.reset()},reset:function(){D=c.jd[1];l=q=-1;w=0},qq:function(f,g,A){A=Math.exp(-z*D/A);return(1-A)*f+A*g},wp:function(){return D}};return x}(),Ic=function(){function a(D,z){var G=D[0]-.5;D=D[1]-.5;var x=
z[0]-.5;z=z[1]-.5;return G*G+D*D-(x*x+z*z)}var c={zi:4,Ld:[1.5,1.5,2],pa:[.1,.1,.1],Vi:1,ta:-1,mf:-1,jo:2,Rm:1,eg:!0,ql:.8},d=null,e=[],q=[],l=[],w=[0],n=[.5,.5,1],t=null,r=0,v=[0,0,0];return{m:function(D){d=Object.assign({},c,D);e.splice(0);q.splice(0);l.splice(0);r=0;D=d.Ld[0]*d.pa[0];var z=d.Ld[1]*d.pa[1],G=1/(1+d.Ld[2]*d.pa[2]),x=d.Vi*Math.min(d.ta,d.mf),f=x/d.ta;x/=d.mf;var g=.5*d.ql;g*=g;for(var A=0;A<d.zi;++A){var K=[];q.push(K);var k=Math.pow(G,A),p=f*k,h=x*k;k=p*d.Rm;l.push(k);var H=p*D,
I=h*z;p/=2;h/=2;for(var F=1+(1-p-p)/H,B=1+(1-h-h)/I,m=0;m<B;++m)for(var u=h+m*I,E=u-.5,R=0;R<F;++R){var Q=p+R*H,ea=Q-.5;ea*ea+E*E>g||(Q=[Q,u,k],e.push(Q),K.push(Q))}d.eg&&K.sort(a);t=e}d.eg&&e.sort(a)},get:function(D){var z=t.length;if(0===z)return n;for(;D>=w.length;)w.push(0);w[D]>=z&&(w[D]=0);var G=t[Math.floor(w[D])%z];w[D]=(w[D]+1/d.jo)%z;if(0===r)return G;v[0]=G[0];v[1]=G[1];v[2]=r;return v},Vp:function(D){D>=w.length||(w[D]=Math.floor(Math.random()*t.length))},jq:function(D){r=D;if(0===r)t=
e;else{for(var z=l.length,G=z-1,x=0;x<z;++x)if(l[x]<=D){G=x;break}t=q[G]}},reset:function(){for(var D=e.length/w.length,z=0;z<w.length;++z)w[z]=Math.floor(z*D);r=0;t=e}}}(),wb=function(){function a(){d(f+G.Mf);g.port.postMessage("DONE")}function c(){p.Wc=0===G.ya?K(d):K(e)}function d(B){k.Rb&&null!==x&&(B-=f,B=Math.min(Math.max(B,G.th[0]),G.th[1]),f+=B,l(),h.isEnabled&&h.Bc&&k.Ha&&f-h.xf>G.Tg&&(r(),h.xf=f),x(f))}function e(B){k.Rb&&(p.timeout=setTimeout(d.bind(null,B),G.ya))}function q(){x=null;k.Rb=
!1;l()}function l(){p.Wc&&(window.cancelAnimationFrame(p.Wc),p.Wc=null);p.timeout&&(window.clearTimeout(p.timeout),p.timeout=null)}function w(B){B&&!k.Ha?(k.Ha=!0,A&&Eb.po(),g.port.postMessage("STOP"),Ea.yj(!0),c()):!B&&k.Ha&&(k.Ha=!1,A&&Eb.Mn(1),Ea.yj(!1),g.port.postMessage("START"))}function n(B){B.target.hidden?I():H()}function t(B,m,u){m=B.createShader(m);B.shaderSource(m,u);B.compileShader(m);return m}function r(){h.Bc=!1;var B=h.Sa,m=h.ud,u=h.vd,E=h.za;B.uniform1f(h.Sh,Math.random());h.Sb?m.beginQueryEXT(E,
u):B.beginQuery(E,u);B.drawElements(B.POINTS,1,B.UNSIGNED_SHORT,0);h.Sb?m.endQueryEXT(E):B.endQuery(E);Ea.flush();D().then(function(R){0===R||isNaN(R)?(h.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",R)):(R=G.Nj*G.Sg*1E3/R,h.he=(h.he+1)%G.nc,h.yf[h.he]=R,++h.ni>G.nc&&(h.Bd.set(h.yf),h.Bd.sort(function(Q,ea){return Q-ea}),R=h.Bd[Math.floor(G.nc/2)],h.md=Math.max(h.md,R),G.Rg(R/h.md)),h.Bc=!0)}).catch(function(){h.Bc=!0})}function v(B){var m=
h.Sa,u=h.ud,E=h.vd;E=h.Sb?u.qp(E,u.QUERY_RESULT_AVAILABLE_EXT):m.getQueryParameter(E,m.QUERY_RESULT_AVAILABLE);m=m.getParameter(u.GPU_DISJOINT_EXT);E?B(!m):setTimeout(v.bind(null,B),.1)}function D(){return new Promise(function(B,m){v(function(u){if(u){u=h.Sa;var E=h.ud,R=h.vd;u=h.Sb?E.getQueryObjectEXT(R,E.QUERY_RESULT_EXT):u.getQueryParameter(R,u.QUERY_RESULT);B(u)}else m()})})}var z={di:!0,th:[1,200],Mf:20,ya:0,Sg:50,Nj:240,Tg:3E3,nc:3,Rg:null},G=null,x=null,f=0,g=null,A=!1,K=null,k={Ga:!1,Ha:!0,
wf:!1,vf:!1,uf:!1,Rb:!1},p={Wc:null,timeout:null},h={isEnabled:!1,Bc:!1,Sa:null,ud:null,vd:null,za:null,Sh:null,Sb:!0,xf:0,ni:0,yf:null,Bd:null,he:0,md:0},H=w.bind(null,!0),I=w.bind(null,!1),F={m:function(B){G=Object.assign(z,B);Object.assign(k,{Ha:!0,Ga:!0,Rb:!1});K=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==G.Rg){B=document.createElement("canvas");B.setAttribute("width","1");B.setAttribute("height","1");var m={antialias:!1};B=B.getContext("webgl2",m)||B.getContext("webgl",
m);if(m=B.getExtension("EXT_disjoint_timer_query")||B.getExtension("EXT_disjoint_timer_query_webgl2")){h.Sa=B;h.ud=m;h.isEnabled=!0;h.Sb=m.beginQueryEXT?!0:!1;var u=t(B,B.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),E=t(B,B.FRAGMENT_SHADER,"precision lowp float;uniform float u36;void main(){vec4 a=u36*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",G.Sg.toString())),R=B.createProgram();B.attachShader(R,u);B.attachShader(R,E);B.linkProgram(R);u=
B.getAttribLocation(R,"a0");h.Sh=B.getUniformLocation(R,"u36");B.useProgram(R);B.enableVertexAttribArray(u);R=B.createBuffer();B.bindBuffer(B.ARRAY_BUFFER,R);B.bufferData(B.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),B.STATIC_DRAW);B.vertexAttribPointer(u,4,B.FLOAT,!1,16,0);R=B.createBuffer();B.bindBuffer(B.ELEMENT_ARRAY_BUFFER,R);B.bufferData(B.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),B.STATIC_DRAW);B.disable(B.DEPTH_TEST);B.disable(B.DITHER);B.disable(B.STENCIL_TEST);B.viewport(0,0,1,1);R=h.Sb?
m.createQueryEXT():B.createQuery();h.vd=R;h.za=m.TIME_ELAPSED_EXT||B.TIME_ELAPSED;h.xf=-G.Tg;h.yf=new Float32Array(G.nc);h.Bd=new Float32Array(G.nc);h.md=0;h.he=0;h.ni=0;h.Bc=!0}}if(G.di){B=!1;try{if("undefined"===typeof SharedWorker){var Q=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
G.Mf.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),ea=new Worker(Q);ea.addEventListener("message",a);g={Mi:ea,port:ea};k.wf=!0}else{var fa=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
G.Mf.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ka=new SharedWorker(fa);ka.port.start();ka.port.addEventListener("message",a);g={Mi:ka,port:ka.port};k.vf=!0}B=!0}catch(O){}B&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",n):(window.addEventListener("blur",I),window.addEventListener("focus",H)),window.addEventListener("pagehide",
I),window.addEventListener("pageshow",H),k.uf=!0)}A="undefined"!==typeof Eb},v:function(){q();k.uf&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",n):(window.removeEventListener("blur",I),window.removeEventListener("focus",H)),window.removeEventListener("pagehide",I),window.removeEventListener("pageshow",H),k.uf=!1);k.vf?(g.port.close(),k.vf=!1):k.wf&&(g.Mi.terminate(),k.wf=!1);Object.assign(k,{Ha:!0,Ga:!1,Rb:!1});x=null},Qp:function(){return k.Ha},update:function(B){Object.assign(G,
B)},dg:function(B){k.Ga||F.m({});l();k.Rb=!0;x=B;k.Ha&&c()},stop:q};return F}(),tc={Ze:function(){return Date.now()},tp:function(){return performance.now()}},tb=function(){function a(X){switch(H){case h.movePinch:var oa=-X.deltaY;0===I&&f("pinch",-1,.001*oa,null)}X.deltaY;X.preventDefault()}function c(X){if(-1!==I)switch(H){case h.swipe:if(1!==I)break;t();v(X,B);var oa=B[0]-F[0];q(oa);X=oa/(20*K.offsetWidth/100);f("swipeMove",Math.min(Math.max(X,-1),1),X,null);break;case h.movePinch:if(2===I||3===
I){v(X,B);oa=B[0]-F[0];var pa=B[1]-F[1];2===I?(U+=Math.sqrt(oa*oa+pa*pa),10>U?(F[0]=B[0],F[1]=B[1]):(ua||(ua=!0,f("moveStart",null,null,null)),ta[0]=oa,ta[1]=pa,u[0]=oa-m[0],u[1]=pa-m[1],f("move",ta,u,null),m[0]=ta[0],m[1]=ta[1])):3===I&&(X=r(X)/ja,f("pinch",X,X-Pa,null),Pa=X)}}}function d(X){if(-1!==I)switch(H){case h.swipe:if(1!==I)break;t();v(X,B);X=B[0]-F[0];var oa=0>X;(X=20<100*Math.abs(X)/K.offsetWidth)&&oa?f("swipeLeft",E,null,null):X&&!oa&&f("swipeRight",E,null,null);var pa=function(){setTimeout(function(){n();
I=0;f("swipeEnd",null,null,null)},202)};X?(X=function(){var qa=(oa?-1:1)*K.width,Ha=(oa?1:-1)*qa/K.width;E.style.transitionDuration=(400).toString()+"ms";E.style.left=(ka[0]+qa).toString()+"px";E.style.top=ka[1].toString()+"px";E.style.transform="rotate( "+Ha.toString()+"rad )";pa()},fa?X():O=X):(E.style.transitionDuration=(200).toString()+"ms",E.style.opacity="0",E.style.left=ka[0].toString()+"px",E.style.top=ka[1].toString()+"px",E.style.transform="",pa());I=-1;break;case h.movePinch:if(2===I||
3===I)I===I.move?f("moveEnd",null,null,null):3===I&&f("pinchEnd",null,null,null),I=0}}function e(X){X.preventDefault();if(-1!==I)switch(H){case h.swipe:if(0!==I)break;t();I=1;M=setTimeout(function(){n();M=null;1===I&&(I=0,f("swipeEnd",null,null,null))},1E3);l();f("swipeStart",null,null,null);f("swipeGetCanvas",E,Q,R);v(X,F);break;case h.movePinch:0!==I?2!==I||ua||void 0===X.changedTouches&&void 0===X.touches||(ja=r(X),20<ja&&(I=3,Pa=1,f("pinchStart",null,null,null))):3!==I&&(ua=!1,v(X,F),m[0]=0,m[1]=
0,I=2,U=0)}}function q(X){var oa=0>X;E.style.left=ka[0]+X+"px";E.style.transformOrigin=oa?P:y;E.style.transform="rotate( "+((oa?1:-1)*X/K.width).toString()+"rad )"}function l(){fa=!1;var X=K.getBoundingClientRect();ka[0]=X.left;ka[1]=X.top;E.width=Math.round(K.width/4);E.height=Math.round(K.height/4);R.width=E.width;R.height=E.height;E.style.width=K.offsetWidth+"px";E.style.height=K.offsetHeight+"px";E.style.left=ka[0]+"px";E.style.top=ka[1]+"px";setTimeout(w,0)}function w(){Q.drawImage(K,0,0,E.width,
E.height);ea.drawImage(E,0,0);fa=!0;document.body.appendChild(E);O&&(O(),O=!1)}function n(){E.style.transitionDuration="0ms";E.style.opacity="1";E.style.transform="";fa&&(document.body.removeChild(E),fa=!1)}function t(){M&&(window.clearTimeout(M),M=null)}function r(X){D(X,na,0);D(X,Y,1);return Math.sqrt(na[0]*na[0]+Y[0]*Y[0])}function v(X,oa){void 0!==X.changedTouches||void 0!==X.touches?D(X,oa,0):(oa[0]=X.pageX,oa[1]=X.pageY)}function D(X,oa,pa){X.touches.length>pa?(oa[0]=X.touches[pa].pageX,oa[1]=
X.touches[pa].pageY):(oa[0]=X.changedTouches[pa].pageX,oa[1]=X.changedTouches[pa].pageY)}function z(){p.forEach(function(X){K.removeEventListener(X.type,X.mb,!1)});return p.splice(0,p.length)}function G(X){X.forEach(function(oa){x(oa.type,oa.mb)})}function x(X,oa){K.removeEventListener(X,oa,!1);E.removeEventListener(X,oa,!1);K.addEventListener(X,oa,!1);E.addEventListener(X,oa,!1);0===p.filter(function(pa){return pa.type===X&&pa.mb===oa}).length&&p.push({type:X,mb:oa})}function f(X,oa,pa,qa){k[X].forEach(function(Ha){Ha.mb(oa,
pa,qa)})}function g(X){return X[0]+"% "+(100-X[1]).toString()+"%"}var A=!1,K=null,k={swipeStart:[],swipeEnd:[],swipeLeft:[],swipeRight:[],swipeMove:[],swipeGetCanvas:[],pinch:[],pinchStart:[],pinchEnd:[],move:[],moveStart:[],moveEnd:[]},p=[],h={idle:0,swipe:1,movePinch:2},H=h.idle,I=0,F=[0,0],B=[0,0],m=[0,0],u=[0,0],E=document.createElement("canvas"),R=document.createElement("canvas"),Q=E.getContext("2d"),ea=R.getContext("2d");E.style.position="fixed";E.style.zIndex="800";E.style.cursor="move";E.style.pointerEvents=
"none";E.className="swipeImage";E.setAttribute("draggable",!1);var fa=!1,ka=[0,0],O=null,M=null,y=g([50,100]),P=g([50,0]),J=null,U=0,ta=[0,0],ja=0,ua=!1,Pa=1,na=[0,0],Y=[0,0],ha={init:function(X){if(A)ha.switch_canvas(X.oa);else return K=X.oa,x("mousedown",e),x("mouseup",d),x("mouseout",d),x("mousemove",c),x("mousemove",c),x("wheel",a),x("touchstart",e),x("touchend",d),x("touchmove",c),A=!0,ha},switch_canvas:function(X){if(!A)ha.init({oa:X});else if(K!==X){var oa=z();K=X;G(oa);for(var pa in k)for(X=
k[pa],oa=X.length-1;0<=oa;--oa)X[oa].ln&&X.splice(oa,1)}},get_mode:function(){for(var X in h)if(h[X]===H)return X;return!1},switch_mode:function(X){A&&"undefined"!==typeof h[X]&&(X=h[X],H!==X&&(t(),H=X,I=0))},add_listener:function(X,oa,pa){k[X].push({mb:oa,ln:"undefined"===typeof pa?!1:pa});return ha},remove_listener:function(X){k[X].splice(0,k[X].length);return ha},animate_swipe:function(X,oa){J&&(clearInterval(J),J=null);l();var pa=K.width/(oa/1E3)*("left"===X?-1:1),qa=0,Ha,sb=Date.now();J=setInterval(function(){J&&
(Ha=Date.now(),qa+=(Ha-sb)/1E3*pa,q(qa),sb=Ha,Math.abs(qa)>.75*K.width&&J&&(clearInterval(J),J=null,n()))},16)}};return ha}();window.CanvasListeners=tb;var S={VERSION:"3.5.9",Tc:[],Sc:[],se:!1,re:!1,te:!1,ready:!1,isBusy:!1},db={idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,FOVdesktop:60,rotate:0,FOVmobile:45,pe:10,oe:8E3},Kc={zd:!0,Id:"models3D",Hd:"materials",no:"tweakers",neuralNetworkPath:"built/jeefitNNC_60_0.json",neuralNetworkVersion:"60_0",aa:"",ua:"",
qe:"",ya:0,Xj:20,width:1024,height:1024,fi:!0,Tm:[2,3.5],Ti:300,Qc:[1,6],scanOverlapFactors:[2,2,3],scanNScaleLevels:2,scanScale0Factor:.7,pa:[.2,.2,.3],jc:[[.8,.5],[.8,.5],[1,1]],lo:30,Yk:.9,cn:[.2,.6],bn:1,mo:[.01,.035],un:[.003,.007],zg:[0,.6],ul:.2,Wa:[.698111,1.047166,.122169],wj:[-.1,0,0],Od:[0,-62,8],Ym:1.03,Ba:[0,-60,0],Pf:50,xc:.4,We:73,we:[.02,1],Vj:[4,1],Bk:[0,.5],wn:.15,tn:1,pn:[.5,4],Bo:20,op:!1,zc:145,lf:-18,jf:20,kf:3,Ec:[-110,0],dc:1,mj:.4,nj:3,Xd:[0,0,0],ec:[1.1,1],bd:0,Me:.95,Le:90,
Ke:50,Xc:30,Eb:.05,gf:!0,Ed:!0,Hf:"images/masks/target.jpg",If:!1,Dd:[1/255,175/255,236/255,0],Fd:-.001,Gf:3.14,Ae:0,ze:"images/masks/burka.png",xe:Math.PI-Math.PI/4,Je:Math.PI/4,cg:[.3,.2,.1],Ub:1,ri:[700,90],Em:[.2,.04],Co:"images/backgrounds/viewer3D.png",Qg:[0,0,0],Pg:[0,15,60],le:.3,Ko:50,Go:Rc?La:!1,Ho:Rc?La:!1,Jo:1E3,Mo:1E3,Io:40,Fo:[0,0,-400],ui:.1,Im:.5,vi:[.5,1.5],Gd:30,Hm:!0},L=Object.assign({},Kc);T.kh=!0;T.lh=!0;T.jh=!1;T.Ja=!0;var hb={gg:3.5,Xb:"images/debug/picsou.png",Qd:45,Df:.785,
Ef:.3925,Ff:5,Bf:2,Cf:0,Af:0,Do:"images/backgrounds/bg1.jpg",Eo:"images/backgrounds/bg1_light.jpg",Jj:1,Kj:2};L.fx=[4,50];L.Ec=[-110,0];L.mj=.25;L.nj=3;L.Xd=[0,-2,20];L.ec=[.95,1];T.Ic=2.1289;T.Xf=1;hb.gg=2.5858;hb.Df=.4388;hb.Ef=.118;hb.Xb="images/debug/hdri2.png";hb.Qd=180;hb.fg=.8065;hb.Ff=5.3887;hb.Bf=.5351;hb.Cf=-.3019;hb.Af=0;hb.Jj=3.5288;hb.Kj=6.2168;var Jc={element:null,vh:null,yd:!1,hh:null,ja:null,Fg:null,deviceId:-1,Kb:-1,hd:0,Ki:null,ke:-1},Ca=Object.assign({},Jc),fb=null,Sc=L.Tm,yc=window.devicePixelRatio?
window.devicePixelRatio:1;var kc={tl:Math.max(Sc[0],yc)/yc,Ue:Math.min(yc,Sc[1])};var gb=null;S.onLoad=function(a){S.ready?a():S.Tc.push(a)};S.onHalfLoad=function(a){S.load_model?a():S.Sc.push(a)};S.onWebcamAsk=function(a){S.se=a};S.onContextLost=function(a){S.re=a};S.onWebcamGet=function(a){S.te=a};S.get_onHalfLoadCallstack=function(){return S.Sc};S.set_size=function(a,c,d){d=d?kc.Ue:1;L.width=a*d;L.height=c*d};S.get_videoDevices=function(a){Wc(a)};S.set_videoDevice=function(a){Ca.deviceId=a};S.set_videoSizes=
function(a,c,d,e,q,l){db.idealWidth=a;db.idealHeight=c;db.minWidth=d;db.maxWidth=e;db.minHeight=q;db.maxHeight=l};S.set_loading=function(a,c,d){a&&(L.If=!0,L.Hf=a);"number"===typeof c&&(a=new Ub(c),L.Dd=[a.r,a.W,a.b,0]);"number"===typeof d&&(L.Fd=d)};S.set_settings=function(a,c,d){a&&Object.assign(L,a);c&&Object.assign(db,c);d&&Object.assign(hb,d)};S.get_size=function(){return{width:L.width,height:L.height}};S.get_cv=function(){return jb.ob()};S.set_NNCPath=function(a){L.qe=a};S.set_materialsPath=
function(a){L.Hd=a};S.set_modelsPath=function(a){L.Id=a};S.destroy=function(){return gb?gb.v():Promise.resolve()};S.init2=function(a){var c=Object.assign({basePath:null,modelsPath:null,materialsPath:null,materialTextureBasePath:null,cv:null,isRequestCamera:!0,width:512,height:512,isMirror:!0,isApplyOverSampling:!1},a);L.zd=c.isRequestCamera;S.set_size(c.width,c.height,c.isApplyOverSampling);c.modelsPath&&(L.Id=c.modelsPath);c.materialsPath&&(L.Hd=c.materialsPath);c.materialTextureBasePath&&(T.xi=
c.materialTextureBasePath);L.fi=c.isMirror;return new Promise(function(d,e){S.onHalfLoad(d);S.init(c.basePath,function(){},e,c.cv)})};S.init=function(a,c,d,e){gb=Xc();S.jb=d?function(q,l){d(q,l);S.jb=!1}:function(){};S.So=gb;a&&(L.aa=a);c&&S.Tc.push(c);gb.ko();a=gb.Ml();if(!jb.m({Ie:"jeefitCanvas",oa:e,width:a.width,height:a.height,debug:!1,Sf:function(){S.re&&S.re()},premultipliedAlpha:!0}))return S.jb&&S.jb("GL_INCOMPATIBLE","Cannot init Context"),!1;L.zd?$c():ad();return!0};window.JEELIZVTO=S;
var Gc=function(){function a(){Ba.$();b.viewport(0,0,1,1);ba.set("s64");e.h(0);Z.l(!1);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,l);c(0<l[0])}var c=null,d=!1,e=null,q=!1,l=null,w={m:function(n){if(q)return!1;e=n;ba.ve([{id:"s64",name:"_",g:"uniform sampler2D u38;const vec2 e=vec2(.16,.5);void main(){vec4 a=texture2D(u38,e);float b=step(1.99,a.r);gl_FragColor=vec4(b,0.,0.,1.);}",i:["u38"],precision:"lowp"}]);ba.j("s64",[{type:"1i",name:"u38",value:0}]);l=new Uint8Array(4);return q=!0},start:function(n,
t){w.stop();c=t;d=window.setInterval(a,n)},stop:function(){d&&(window.clearInterval(a),d=!1)}};return w}(),oc=oc||{};Ub.prototype={constructor:Ub,r:1,W:1,b:1,set:function(a){a instanceof Ub?this.K(a):"number"===typeof a?Mc(this,a):"string"===typeof a&&bd(this,a);return this},zn:function(){function a(c,d,e){0>e&&(e+=1);1<e&&--e;return e<1/6?c+6*(d-c)*e:.5>e?d:e<2/3?c+6*(d-c)*(2/3-e):c}return function(c,d,e){c=oc.Math.pp(c,1);d=oc.Math.De(d,0,1);e=oc.Math.De(e,0,1);0===d?this.r=this.W=this.b=e:(d=.5>=
e?e*(1+d):e+d-e*d,e=2*e-d,this.r=a(e,d,c+1/3),this.W=a(e,d,c),this.b=a(e,d,c-1/3));return this}}(),clone:function(){return new this.constructor(this.r,this.W,this.b)},K:function(a){this.r=a.r;this.W=a.W;this.b=a.b;return this},add:function(a){this.r+=a.r;this.W+=a.W;this.b+=a.b;return this},multiply:function(a){this.r*=a.r;this.W*=a.W;this.b*=a.b;return this},Aa:function(a){this.r*=a;this.W*=a;this.b*=a;return this},lb:function(a,c){void 0===c&&(c=0);this.r=a[c];this.W=a[c+1];this.b=a[c+2];return this}};
var cd={};mc.prototype={constructor:mc,get x(){return this.B},set x(a){this.B=a},get y(){return this.C},set y(a){this.C=a},get z(){return this.D},set z(a){this.D=a},get w(){return this.P},set w(a){this.P=a},set:function(a,c,d,e){this.B=a;this.C=c;this.D=d;this.P=e;return this},clone:function(){return new this.constructor(this.B,this.C,this.D,this.P)},K:function(a){this.B=a.x;this.C=a.y;this.D=a.z;this.P=a.w;return this},inverse:function(){this.B*=-1;this.C*=-1;this.D*=-1;this.normalize();return this},
dd:function(a){return this.B*a.B+this.C*a.C+this.D*a.D+this.P*a.P},zf:function(){return this.B*this.B+this.C*this.C+this.D*this.D+this.P*this.P},length:function(){return Math.sqrt(this.B*this.B+this.C*this.C+this.D*this.D+this.P*this.P)},normalize:function(){var a=this.length();0===a?(this.D=this.C=this.B=0,this.P=1):(a=1/a,this.B*=a,this.C*=a,this.D*=a,this.P*=a);return this},multiply:function(a,c){return void 0!==c?(console.warn("JETHREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),
Nc(this,a,c)):Nc(this,this,a)},lb:function(a,c){void 0===c&&(c=0);this.B=a[c];this.C=a[c+1];this.D=a[c+2];this.P=a[c+3];return this}};Vb.prototype={constructor:Vb,get width(){return this.x},set width(a){this.x=a},get height(){return this.y},set height(a){this.y=a},set:function(a,c){this.x=a;this.y=c;return this},Yi:function(a){this.x=a;return this},Zi:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y)},K:function(a){this.x=a.x;this.y=a.y;return this},add:function(a,
c){if(void 0!==c)return console.warn("JETHREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.Uc(a,c);this.x+=a.x;this.y+=a.y;return this},Uc:function(a,c){this.x=a.x+c.x;this.y=a.y+c.y;return this},sub:function(a,c){if(void 0!==c)return console.warn("JETHREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.ab(a,c);this.x-=a.x;this.y-=a.y;return this},ab:function(a,c){this.x=a.x-c.x;this.y=a.y-c.y;return this},multiply:function(a){this.x*=
a.x;this.y*=a.y;return this},Aa:function(a){isFinite(a)?(this.x*=a,this.y*=a):this.y=this.x=0;return this},Pe:function(a){return this.Aa(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);return this},De:function(a,c){this.x=Math.max(a.x,Math.min(c.x,this.x));this.y=Math.max(a.y,Math.min(c.y,this.y));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},
ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},dd:function(a){return this.x*a.x+this.y*a.y},zf:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.Pe(this.length())},lb:function(a,c){void 0===c&&(c=0);this.x=a[c];this.y=a[c+1];return this}};Sa.prototype={constructor:Sa,set:function(a,c,d){this.x=
a;this.y=c;this.z=d;return this},Yi:function(a){this.x=a;return this},Zi:function(a){this.y=a;return this},clone:function(){return new this.constructor(this.x,this.y,this.z)},K:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,c){if(void 0!==c)return console.warn("JETHREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.Uc(a,c);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},Uc:function(a,c){this.x=a.x+c.x;this.y=a.y+c.y;this.z=a.z+c.z;
return this},sub:function(a,c){if(void 0!==c)return console.warn("JETHREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.ab(a,c);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},ab:function(a,c){this.x=a.x-c.x;this.y=a.y-c.y;this.z=a.z-c.z;return this},multiply:function(a,c){if(void 0!==c)return console.warn("JETHREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.x=a.x*c.x,this.y=a.y*c.y,this.z=a.z*c.z,this;
this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},Aa:function(a){isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):this.z=this.y=this.x=0;return this},Pe:function(a){return this.Aa(1/a)},min:function(a){this.x=Math.min(this.x,a.x);this.y=Math.min(this.y,a.y);this.z=Math.min(this.z,a.z);return this},max:function(a){this.x=Math.max(this.x,a.x);this.y=Math.max(this.y,a.y);this.z=Math.max(this.z,a.z);return this},De:function(a,c){this.x=Math.max(a.x,Math.min(c.x,this.x));this.y=Math.max(a.y,Math.min(c.y,this.y));
this.z=Math.max(a.z,Math.min(c.z,this.z));return this},floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},dd:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},zf:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*
this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.Pe(this.length())},lb:function(a,c){void 0===c&&(c=0);this.x=a[c];this.y=a[c+1];this.z=a[c+2];return this}};Wb.Mj="XYZ";Wb.prototype={constructor:Wb,get x(){return this.B},set x(a){this.B=a},get y(){return this.C},set y(a){this.C=a},get z(){return this.D},set z(a){this.D=a},get order(){return this.Na},set order(a){this.Na=a},set:function(a,c,d,e){this.B=a;this.C=c;this.D=d;this.Na=e||this.Na;return this},clone:function(){return new this.constructor(this.B,
this.C,this.D,this.Na)},K:function(a){this.B=a.B;this.C=a.C;this.D=a.D;this.Na=a.Na;return this},lb:function(a){this.B=a[0];this.C=a[1];this.D=a[2];void 0!==a[3]&&(this.Na=a[3]);return this}};vc.prototype={constructor:vc,set:function(a,c){this.min.K(a);this.max.K(c);return this},clone:function(){return(new this.constructor).K(this)},K:function(a){this.min.K(a.min);this.max.K(a.max);return this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},size:function(a){return(a||
new Sa).ab(this.max,this.min)},getParameter:function(a,c){return(c||new Sa).set((a.x-this.min.x)/(this.max.x-this.min.x),(a.y-this.min.y)/(this.max.y-this.min.y),(a.z-this.min.z)/(this.max.z-this.min.z))},translate:function(a){this.min.add(a);this.max.add(a);return this}};Xb.prototype={constructor:Xb,set:function(a,c,d,e,q,l,w,n,t,r,v,D,z,G,x,f){var g=this.elements;g[0]=a;g[4]=c;g[8]=d;g[12]=e;g[1]=q;g[5]=l;g[9]=w;g[13]=n;g[2]=t;g[6]=r;g[10]=v;g[14]=D;g[3]=z;g[7]=G;g[11]=x;g[15]=f;return this},clone:function(){return(new Xb).lb(this.elements)},
K:function(a){this.elements.set(a.elements);return this},multiply:function(a,c){return void 0!==c?(console.warn("JETHREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),Pc(this,a,c)):Pc(this,this,a)},Aa:function(a){var c=this.elements;c[0]*=a;c[4]*=a;c[8]*=a;c[12]*=a;c[1]*=a;c[5]*=a;c[9]*=a;c[13]*=a;c[2]*=a;c[6]*=a;c[10]*=a;c[14]*=a;c[3]*=a;c[7]*=a;c[11]*=a;c[15]*=a;return this},setPosition:function(a){var c=this.elements;c[12]=a.x;c[13]=a.y;c[14]=a.z;
return this},translate:function(){console.error("JETHREE.Matrix4: .translate() has been removed.")},scale:function(a){var c=this.elements,d=a.x,e=a.y;a=a.z;c[0]*=d;c[4]*=e;c[8]*=a;c[1]*=d;c[5]*=e;c[9]*=a;c[2]*=d;c[6]*=e;c[10]*=a;c[3]*=d;c[7]*=e;c[11]*=a;return this},lb:function(a){this.elements.set(a);return this}};wc.prototype={constructor:wc,clone:function(){return(new this.constructor).K(this)},K:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.Ka.K(a.Ka);this.color.K(a.color);this.Vb=a.Vb;for(var c=
0,d=a.je.length;c<d;c++)this.je[c]=a.je[c].clone();c=0;for(d=a.Ng.length;c<d;c++)this.Ng[c]=a.Ng[c].clone();return this}};var C=function(){function a(p,h,H){h=p.createShader(h);p.shaderSource(h,H);p.compileShader(h);return p.getShaderParameter(h,p.COMPILE_STATUS)?h:!1}function c(p,h){ca.ia()&&(h.g=h.g.replace(/gl_FragData\[([0-3])\]/g,"gbuf$1"));h.ff=a(p,p.VERTEX_SHADER,h.s,h.name+" VERTEX");h.ef=a(p,p.FRAGMENT_SHADER,h.g,h.name+" FRAGMENT");var H=p.createProgram();p.attachShader(H,h.ff);p.attachShader(H,
h.ef);p.linkProgram(H);return H}function d(p){p.s="#version 300 es\n"+p.s.replace(/varying/g,"out");p.g="#version 300 es\n"+p.g.replace(/varying/g,"in");p.s=p.s.replace(/texture2D\(/g,"texture(");p.g=p.g.replace(/texture2D\(/g,"texture(");p.ca||(p.g=p.g.replace(/void main/g,"out vec4 FragColor;\nvoid main"),p.g=p.g.replace(/gl_FragColor/g,"FragColor"));var h=0,H=[];p.s=p.s.replace(/attribute ([a-z]+[0-4]*) ([_a-zA-Z,0-9\s]+);/g,function(I,F,B){var m="";B.split(",").forEach(function(u){u=u.trim();
m+="layout(location = "+h+") in "+F+" "+u+";\n";H.push(u);++h});return m});p.Rj=H}function e(p){return["float","sampler2D","int"].map(function(h){return"precision "+p+" "+h+";\n"}).join("")}function q(p,h){if(h.Yh)return!1;var H=ca.ia();T.Jp||H||p.enableVertexAttribArray(0);void 0===h.ca&&(h.ca=!1);h.ca&&(h.Rc=H?3:2);h.id=K++;void 0===h.Rc&&(h.Rc=2);void 0===h.precision&&(h.precision="highp");h.ca&&(h.g=(ca.ia()?"precision highp float;\n          layout(location = 0) out vec4 gbuf0;\n          layout(location = 1) out vec4 gbuf1;\n          layout(location = 2) out vec4 gbuf2;\n          layout(location = 3) out vec4 gbuf3;\n":
"#extension GL_EXT_draw_buffers : require\n")+h.g);void 0===h.s&&(h.s="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");var I=e(h.precision);h.g=I+h.g;h.s=I+h.s;H&&3<=h.Rc&&d(h);h.Ca&&h.Ca.forEach(function(F){h.s=h.s.replace(F.search,F.replace);h.g=h.g.replace(F.search,F.replace)});h.ma=c(p,h);h.A={};h.i.forEach(function(F){h.A[F]=p.getUniformLocation(h.ma,F)});h.attributes={};h.va=[];h.Mg=0;void 0===h.I&&(h.I=["a0"]);void 0===
h.R&&(h.R=[2]);h.I.forEach(function(F,B){var m=H&&3<=h.Rc?h.Rj.indexOf(F):p.getAttribLocation(h.ma,F);h.attributes[F]=m;h.va.push(m);h.Mg+=4*h.R[B]});h.set=function(){g!==h.id&&(-1!==g&&A.H(),g=h.id,A=h,p.useProgram(h.ma),h.va.forEach(function(F){0!==F&&p.enableVertexAttribArray(F)}))};h.H=function(){g=-1;h.va.forEach(function(F){0!==F&&p.disableVertexAttribArray(F)})};h.Yh=!0}function l(p,h){q(p,h);h.set();g=-1;return h}function w(){return{name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
i:["u1"],precision:"highp"}}function n(){k.j("s93",[{type:"1i",name:"u1",value:0}]);k.j("s94",[{type:"1i",name:"u150",value:0}]);k.j("s95",[{type:"1i",name:"u71",value:0}])}function t(){var p="u38 u140 u141 u142 u143 u39 u75".split(" ").concat(G,x);f.s96={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",s:"attribute vec3 a0;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u146,u147,u142,u143,u149;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,p);vec2 f=u82*e;vec3 c=u82*o;vec2 t=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,q).rgb+vec3(u76,0.,0.),u79,c);float u=mix(texture2D(u38,r).r,0.,u82);a.z+=u;mat3 v=s(a);vec3 w=mix(u140,u80,c);float x=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u78,1.,u82);vec2 j=u77/t;vec3 k=a0;float A=max(0.,-a0.z-u142)*u143;k.x+=A*sign(a0.x)*(1.-u82);vec3 l=v*(k+w)*x+b;vec2 B=j*z;vec3 C=vec3(g*B,-j)+l*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(C,1.)),vv0=l,vv1=smoothstep(u146,u147,a0.z);}",
i:["u146","u147"].concat(p),I:["a0"],precision:"highp"};f.s97={name:"_",g:"uniform sampler2D u1;uniform vec3 u144;uniform float u70;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u144,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u144,b,u70),a.a);gl_FragColor=c;}",s:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u142,u143,u149;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,n);vec2 f=u82*e;vec3 c=u82*m;vec2 r=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,o).rgb+vec3(u76,0.,0.),u79,c);float s=mix(texture2D(u38,p).r,0.,u82);a.z+=s;mat3 t=q(a);vec3 u=mix(u140,u80,c);float v=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u78,1.,u82);vec2 j=u77/r;vec3 k=a0;float y=max(0.,-a0.z-u142)*u143;k.x+=y*sign(a0.x)*(1.-u82);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u144"].concat(D,p),I:["a0","a1"],R:[3,2],precision:"lowp"};f.s98={name:"_",g:"uniform vec3 u144;void main(){gl_FragColor=vec4(u144,0.);}",s:"attribute vec3 a0;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u142,u143,u149;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,m);vec2 f=u82*e;vec3 c=u82*l;vec2 q=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,n).rgb+vec3(u76,0.,0.),u79,c);float r=mix(texture2D(u38,o).r,0.,u82);a.z+=r;mat3 s=p(a);vec3 t=mix(u140,u80,c);float u=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u78,1.,u82);vec2 j=u77/q;vec3 k=a0;float x=max(0.,-a0.z-u142)*u143;k.x+=x*sign(a0.x)*(1.-u82);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(A,1.));}",
i:["u144"].concat(p),R:[3],precision:"lowp"};f.s99={name:"_",g:"uniform vec4 u9;varying vec3 vv0;varying float vv1;void main(){float a=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv1);gl_FragColor=vec4(normalize(vv0),a);}",s:"attribute vec3 a0,a2;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u142,u143,u149;varying vec3 vv0;varying float vv1;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 D=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,p);vec2 f=u82*e;vec3 c=u82*o;vec2 t=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,q).rgb+vec3(u76,0.,0.),u79,c);float u=mix(texture2D(u38,r).r,0.,u82);a.z+=u;mat3 h=s(a);vec3 v=mix(u140,u80,c);float w=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 x=mat2(i,j,-j,i);b.xy=x*b.xy;float y=mix(u78,1.,u82);vec2 k=u77/t;vec3 l=a0;float z=max(0.,-a0.z-u142)*u143;l.x+=z*sign(a0.x)*(1.-u82);vec3 A=h*(l+v)*w+b;vec2 B=k*y;vec3 C=vec3(g*B,-k)+A*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(C,1.)),vv0=h*a2*vec3(1.,-1.,-1.),vv1=a0.y;}",
i:["u9","u75"].concat(p),I:["a0","a2"],precision:"highp"};f.s100={name:"_",g:"uniform sampler2D u150;uniform vec4 u9;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=vec3(0.,0.,-1.),c=normalize(vv1),b=texture2D(u150,vv2).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv1:a;float m=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv3);gl_FragColor=vec4(a,m);}",s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u142,u143,u149;varying vec4 vv0;varying vec3 vv1;varying vec2 vv2;varying float vv3;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 F=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,r);vec2 f=u82*e;vec3 c=u82*q;vec2 v=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,s).rgb+vec3(u76,0.,0.),u79,c);float w=mix(texture2D(u38,t).r,0.,u82);a.z+=w;mat3 h=u(a);vec3 x=mix(u140,u80,c);float y=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u78,1.,u82);vec2 k=u77/v;vec3 l=a0;float B=max(0.,-a0.z-u142)*u143;l.x+=B*sign(a0.x)*(1.-u82);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv0=a3,vv2=a1,vv3=a0.y;}",
i:["u9","u75","u150"].concat(p),I:["a3","a0","a2","a1"],R:[4,3,3,2],precision:"highp"};f.s101={name:"_",g:"uniform vec4 u108;uniform float u145;void main(){float b=u145;vec4 a=u108;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",s:"attribute vec3 a0;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u142,u143,u149;const vec2 e=vec2(1.);const vec3 l=vec3(1.);const vec2 B=vec2(-1.,1.),m=vec2(.16,.5),n=vec2(.5,.5),o=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 p(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,m);vec2 f=u82*e;vec3 c=u82*l;vec2 q=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,n).rgb+vec3(u76,0.,0.),u79,c);float r=mix(texture2D(u38,o).r,0.,u82);a.z+=r;mat3 s=p(a);vec3 t=mix(u140,u80,c);float u=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 v=mat2(h,i,-i,h);b.xy=v*b.xy;float w=mix(u78,1.,u82);vec2 j=u77/q;vec3 k=a0;float x=max(0.,-a0.z-u142)*u143;k.x+=x*sign(a0.x)*(1.-u82);vec3 y=s*(k+t)*u+b;vec2 z=j*w;vec3 A=vec3(g*z,-j)+y*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(A,1.));}",
i:["u108","u145"].concat(p),precision:"lowp"};f.s102={name:"_",g:"uniform sampler2D u71;uniform vec4 u108,u72;uniform float u145;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u145;vec4 a=u108,d=texture2D(u71,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u72*e),c=mix(c,l,u72.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
s:"attribute vec3 a0;attribute vec2 a1;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u142,u143,u149;varying vec2 vv0;const vec2 e=vec2(1.);const vec3 m=vec3(1.);const vec2 C=vec2(-1.,1.),n=vec2(.16,.5),o=vec2(.5,.5),p=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 q(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,n);vec2 f=u82*e;vec3 c=u82*m;vec2 r=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,o).rgb+vec3(u76,0.,0.),u79,c);float s=mix(texture2D(u38,p).r,0.,u82);a.z+=s;mat3 t=q(a);vec3 u=mix(u140,u80,c);float v=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 w=mat2(h,i,-i,h);b.xy=w*b.xy;float x=mix(u78,1.,u82);vec2 j=u77/r;vec3 k=a0;float y=max(0.,-a0.z-u142)*u143;k.x+=y*sign(a0.x)*(1.-u82);vec3 z=t*(k+u)*v+b;vec2 A=j*x;vec3 B=vec3(g*A,-j)+z*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(B,1.)),vv0=a1;}",
i:["u108","u145"].concat(z,p),I:["a0","a1"],R:[3,2],precision:"lowp"};p=["u133","u121","u134"];f.s103={name:"_",g:"varying vec3 vv0;varying float vv1;void main(){gl_FragColor=vec4(vv0,vv1);}",s:"attribute vec3 a0;uniform mat4 u133,u121,u134;varying vec3 vv0;varying float vv1;void main(){vec4 a=u134*vec4(a0,1.);gl_Position=u133*u121*a,vv0=a.xyz,vv1=1.;}",i:p,precision:"highp"};f.s104={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(normalize(vv0),1.);}",s:"attribute vec3 a0,a2;uniform mat4 u133,u121,u134;varying vec3 vv0;varying float vv1;void main(){vec4 a=u134*vec4(a2,0.);gl_Position=u133*u121*u134*vec4(a0,1.),vv0=a.xyz,vv1=a0.y;}",
i:p,I:["a0","a2"],precision:"highp"};f.s94={name:"_",g:"uniform sampler2D u150;uniform vec3 u151;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;const vec3 i=vec3(1.,1.,1.);void main(){vec3 j=normalize(vv1+u151),c=normalize(vv2),b=texture2D(u150,vv3).xyz;b=normalize(b*255./127.-1.007874*i);vec3 d=vv0.xyz,k=cross(c,d)*vv0.w;mat3 l=mat3(d,k,c);vec3 a=l*b;a=dot(a,j)>0.?vv2:a,gl_FragColor=vec4(a,1.);}",s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u133,u121,u134;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;void main(){vec4 b=u134*vec4(a2,0.),a=u134*vec4(a0,1.);gl_Position=u133*u121*a,vv0=a3,vv2=b.xyz,vv3=a1,vv1=a.xyz;}",
i:["u150","u151"].concat(p),I:["a0","a2","a1","a3"],precision:"highp"};f.s93={name:"_",g:"uniform sampler2D u1;uniform vec3 u144;uniform float u70;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);vec3 b=mix(u144,a.rgb,a.a);vec4 c=vec4(mix(a.rgb*u144,b,u70),a.a);gl_FragColor=c;}",s:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u133,u121,u134;varying vec2 vv0;const vec4 f=vec4(0.,0.,5e-4,0.);void main(){gl_Position=u133*u121*u134*vec4(a0,1.)+f,vv0=a1;}",i:["u144"].concat(D,p),I:["a0","a1"],
Ca:[{search:"0.0005",replace:Ea.ea()?"0.0005":"0.0"}],precision:"lowp"};f.s105={name:"_",g:"uniform vec4 u108;uniform float u145;void main(){float b=u145;vec4 a=u108;float c=floor(15.99*b),d=floor(15.99*a.b);a.b=(c+16.*d)/255.,gl_FragColor=a;}",s:"attribute vec3 a0;uniform mat4 u133,u121,u134;void main(){gl_Position=u133*u121*u134*vec4(a0,1.);}",i:["u108"].concat(p),precision:"highp"};f.s95={name:"_",g:"uniform sampler2D u71;uniform vec4 u108,u72;uniform float u145;varying vec2 vv0;vec2 i(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float c=u145;vec4 a=u108,d=texture2D(u71,vv0);vec2 b=i(d.b,4.);float f=1.-b.x,g=b.y;b=i(d.a,1.);float h=b.x,e=b.y;vec4 k=vec4(d.rg,g,h);float l=f;a=mix(a,k,u72*e),c=mix(c,l,u72.b*e);float m=floor(15.99*c),n=floor(15.99*a.b);a.b=(m+16.*n)/255.,gl_FragColor=a;}",
s:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u133,u121,u134;varying vec2 vv0;void main(){gl_Position=u133*u121*u134*vec4(a0,1.),vv0=a1;}",i:["u108"].concat(z,p),I:["a0","a1"],R:[3,2],precision:"highp"}}function r(){for(var p in f)q(b,f[p])}var v=!1,D=["u1","u70"],z=["u71","u72"],G="u73 u74 u75 u76 u77 u78".split(" "),x="u79 u80 u81 u82 u83 u84".split(" "),f={},g=-1,A=null,K=0,k={na:function(p,h){f[p]=h;v&&q(b,f[p])},Zp:function(p,h){f[p]=h;h.Yh=!1;q(b,f[p])},Tb:function(){return v},m:function(){f.s0=
w();f.s1={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],precision:"lowp"};f.s65={name:"_",g:"uniform sampler2D u1,u8;uniform float u9;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){gl_FragColor=vec4(mix(texture2D(u8,vv0).rgb,texture2D(u1,vv0).rgb,u9*f),1.);}",i:["u1","u8","u9"],precision:"highp"};f.s66={name:"_",g:"uniform sampler2D u1,u8;uniform float u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){gl_FragColor=mix(texture2D(u8,vv0),texture2D(u1,vv0),u9*f);}",
i:["u1","u8","u9"],precision:"highp"};f.s12={name:"_",g:"uniform sampler2D u1,u85;uniform vec2 u86;uniform float u87,u88;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 b=texture2D(u85,vv0*u86),c=texture2D(u1,vv0*u86);float a=smoothstep(u87,0.,vv0.y);a+=smoothstep(1.-u87,1.,vv0.y),gl_FragColor=pow(mix(c,b,a*f),u88*f);}",i:["u1","u86","u85","u87","u88"]};f.s67={name:"_",g:"uniform sampler2D u1,u85;uniform vec2 u86;uniform float u87,u88;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),f=exp2(c);vec3 g=clamp(b/f,0.,1.);return vec4(g,(c+128.)/256.);}void main(){vec2 a=vv0*u86;float c=floor(a.x),d=mod(c,2.);a.x=mod(a.x,1.),a.x=mix(a.x,1.-a.x,d);vec3 f=texture2D(u85,a).rgb,g=texture2D(u1,a).rgb;float b=smoothstep(u87,0.,vv0.y);b+=smoothstep(1.-u87,1.,vv0.y);vec3 j=mix(g,f,b*h);vec4 k=i(pow(j,u88*h));gl_FragColor=k;}",
i:["u1","u86","u85","u87","u88"],precision:"highp"};f.s68={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);if(a.a<.5)discard;gl_FragColor=a;}",i:["u1"],precision:"lowp"};f.s69={name:"_",g:"uniform sampler2D u1,u89;uniform vec2 u10;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u10*f).rgb+texture2D(u1,a+u10*g).rgb+texture2D(u1,a+u10*h).rgb+texture2D(u1,a+u10*i).rgb;gl_FragColor=vec4(b/5.,1.);}",
i:["u1","u10"],precision:"lowp"};f.s70={name:"_",g:"uniform sampler2D u1,u89,u38;uniform vec2 u10,u90;varying vec2 vv0;const vec3 k=vec3(1.,1.,1.);const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4);void main(){vec2 a=vv0;vec3 b=texture2D(u1,a).rgb+texture2D(u1,a+u10*f).rgb+texture2D(u1,a+u10*g).rgb+texture2D(u1,a+u10*h).rgb+texture2D(u1,a+u10*i).rgb;float c=texture2D(u38,vec2(.5,.5)).a,d=u90.x+pow(c,2.)*(u90.y-u90.x);vec3 j=mix(b/5.,texture2D(u89,a).rgb,d);gl_FragColor=vec4(j,1.);}",
i:["u1","u89","u10","u38","u90"],precision:"lowp"};f.s71={name:"_",g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const vec3 f=vec3(.299,.587,.114);const float m=.007813,n=.125,h=8.;void main(){vec2 x=vv0;vec3 o=texture2D(u1,vv0+vec2(-1.,-1.)*u10).xyz,p=texture2D(u1,vv0+vec2(1.,-1.)*u10).xyz,q=texture2D(u1,vv0+vec2(-1.,1.)*u10).xyz,r=texture2D(u1,vv0+vec2(1.,1.)*u10).xyz,s=texture2D(u1,vv0).xyz;float b=dot(o,f),c=dot(p,f),e=dot(q,f),g=dot(r,f),i=dot(s,f),t=min(i,min(min(b,c),min(e,g))),u=max(i,max(max(b,c),max(e,g)));vec2 a;a.x=-(b+c-(e+g)),a.y=b+e-(c+g);float v=max((b+c+e+g)*(.25*n),m),w=1./(min(abs(a.x),abs(a.y))+v);a=min(vec2(h,h),max(vec2(-h,-h),a*w))*u10;vec3 j=.5*(texture2D(u1,vv0+a*-.166667).rgb+texture2D(u1,vv0+a*.166667).rgb),k=j*.5+.25*(texture2D(u1,vv0+a*-.5).rgb+texture2D(u1,vv0+a*.5).rgb);float l=dot(k,f);gl_FragColor=l<t||l>u?vec4(j,1.):vec4(k,1.);}",
i:["u1","u10"],precision:"lowp"};f.s44={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(0.,0.,0.);vec4 g(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),h=exp2(c);vec3 i=clamp(b/h,0.,1.);return vec4(i,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=g(max(a,f));}",i:["u1"],precision:"highp"};f.s72={name:"_",g:"uniform sampler2D u91,u92;uniform float u93,u94;varying vec2 vv0;void main(){vec3 a=texture2D(u92,vv0).rgb,b=texture2D(u91,vv0).rgb;gl_FragColor=vec4(b*u94+u93*a,1.);}",
i:["u91","u92","u93","u94"],precision:"highp"};f.s73={name:"_",g:"uniform sampler2D u95,u96;uniform float u88;varying vec2 vv0;const int j=8888;const float e=3.141592;const vec2 k=vec2(0.,0.);const vec3 n=vec3(1.,1.,1.),o=vec3(0.,0.,0.);void main(){float p=e*(vv0.x*2.-1.),q=e/2.*(vv0.y*2.-1.),b,c,r,l,m;vec4 d;vec3 f=o;vec2 g=k,a=k;for(int h=0;h<j;h+=1)a.x=float(h),a.y=floor(a.x/64.),d=texture2D(u96,a/64.),b=e*d.r,c=2.*asin(sqrt(.25+d.g*.25)),l=p+c*cos(b),m=q+c*sin(b),g.x=.5+.5*l/e,g.y=.5+m/e,f+=pow(texture2D(u95,g).rgb,u88*n);f/=float(j),gl_FragColor=vec4(f,1.);}",
i:["u95","u96","u88"],precision:"lowp",Ca:[{search:"8888",replace:T.jm[ca.T()]}]};f.s74={name:"_",g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);float b=.031496*texture2D(u1,vv0-3.*u10).a+.110236*texture2D(u1,vv0-2.*u10).a+.220472*texture2D(u1,vv0-u10).a+.275591*a.a+.220472*texture2D(u1,vv0+u10).a+.110236*texture2D(u1,vv0+2.*u10).a+.031496*texture2D(u1,vv0+3.*u10).a;gl_FragColor=vec4(a.rgb,4.*b);}",i:["u1","u10"],precision:"lowp"};f.s75={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);float b=.3*pow(a.a,2.);gl_FragColor=vec4(a.rgb+b*f,1.);}",
i:["u1"],precision:"lowp"};f.s76={name:"_",g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){vec4 a=.031496*texture2D(u1,vv0-3.*u10)+.110236*texture2D(u1,vv0-2.*u10)+.220472*texture2D(u1,vv0-u10)+.275591*texture2D(u1,vv0)+.220472*texture2D(u1,vv0+u10)+.110236*texture2D(u1,vv0+2.*u10)+.031496*texture2D(u1,vv0+3.*u10);gl_FragColor=a;}",i:["u1","u10"],precision:"lowp"};f.s77={name:"_",g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0-3.*u10)+texture2D(u1,vv0-2.*u10)+texture2D(u1,vv0-u10)+texture2D(u1,vv0)+texture2D(u1,vv0+u10)+texture2D(u1,vv0+2.*u10)+texture2D(u1,vv0+3.*u10);gl_FragColor=a/7.;}",
i:["u1","u10"],precision:"lowp"};f.s78={name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec4 g=vec4(0.,0.,0.,0.);const float e=256.;void main(){vec4 b=g;float c=0.;vec2 d;for(float a=0.;a<e;a+=1.)d=vec2((a+.5)/e,vv0.y),b+=texture2D(u1,d),c+=1.;gl_FragColor=b/c;}",i:["u1"],precision:"highp"};f.s79={name:"_",g:"uniform sampler2D u1,u85;varying vec2 vv0;const vec4 h=vec4(1.,1.,1.,1.);const float f=0.,g=.3;void main(){vec4 b=texture2D(u85,vv0),c=texture2D(u1,vv0);float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=mix(c,b,a*h);}",
i:["u1","u85"],precision:"highp"};f.s80={name:"_",g:"uniform sampler2D u1,u85;varying vec2 vv0;const vec3 h=vec3(1.,1.,1.);const float f=0.,g=.3;vec4 i(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),j=exp2(c);vec3 k=clamp(b/j,0.,1.);return vec4(k,(c+128.)/256.);}void main(){vec3 b=texture2D(u85,vv0).rgb,c=texture2D(u1,vv0).rgb;float a=smoothstep(g,f,vv0.y);a+=smoothstep(1.-g,1.-f,vv0.y),gl_FragColor=i(mix(c,b,a*h));}",i:["u1","u85"],precision:"highp"};f.s81=
{name:"_",g:"uniform sampler2D u1,u97,u2,u98;uniform vec4 u99;uniform vec2 u100;uniform float u101,u102,u103,u104;varying vec2 vv0;const vec2 g=vec2(1.,1.),h=vec2(.5,.5);const float e=3.141592;void main(){vec4 d=texture2D(u1,vv0),i=texture2D(u97,vec2(1.-vv0.x,vv0.y));float j=step(texture2D(u98,vec2(.25,.5)).r,1.);vec2 a=vv0*2.-g;float k=texture2D(u2,a*u100*.5+h).r,l=atan(a.x,a.y),m=-(mod(u101,2.*e)-e),b=mod(l-m+e,2.*e)-e,n=smoothstep(0.,u102,b),c=.5+u104*(.5-n);c*=(sign(b)+1.)/2.;vec4 o=i+c*u99*k;gl_FragColor=mix(d,o,j*u103);}",
i:"u1 u2 u98 u97 u99 u101 u102 u103 u100 u104".split(" "),precision:"lowp"};var p="u105 u106 u107 u108 u95 u109 u3 u110 u97 u111 u112 u113 u114 u115 u10".split(" ");T.da&&(f.s82={name:"_",g:"uniform sampler2D u105,u106,u107,u108,u95,u109,u116,u97;uniform vec3 u110,u113;uniform vec2 u10;uniform float u3,u117,u112,u114,u111;varying vec2 vv0;const float j=3.141592;const vec3 u=vec3(0.,0.,0.),v=vec3(.299,.587,.114);const float w=2.;vec3 l(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 x(vec3 a){float b=atan(a.x,a.z),c=acos(-a.y);return vec2(.5-.5*b/j,1.-c/j);}vec2 y(vec3 a,float b){vec2 d=vec2(1.,.5)/pow(2.,b),f=vec2(0.,1.-pow(.5,b));float g=atan(a.x,a.z),h=acos(-a.y),c=.5+.5*g/j,i=h/j,k=pow(2.,b)/u111;c=(1.-k)*c;return f+vec2(c,i)*d;}void main(){vec4 c=texture2D(u105,vv0);vec3 k=texture2D(u97,vec2(1.-vv0.x,vv0.y)).rgb;if(c.a<.01){gl_FragColor=vec4(k,0.);return;}float z=c.a;vec3 A=c.rgb,B=A+u110;vec4 b=texture2D(u108,vv0),m=texture2D(u106,vv0);vec3 d=m.rgb;float f=m.a;vec4 n=texture2D(u107,vv0);vec3 C=n.rgb;float o=b.r,D=b.g,p=floor(b.b*255.),g=floor(p/16.),E=(p-16.*g)/16.;g/=16.;float F=b.a;f=1.-(1.-f)*(1.-n.a);vec2 G=x(-d);vec3 q=(1.-F)*l(texture2D(u109,G)),r=normalize(B),h=u,s=reflect(-r,d);vec2 H=y(s,floor(D*u3));float I=acos(-s.z),J=smoothstep(u112-u114,u112+u114,I);h=mix(l(texture2D(u95,H)),u113,J);float a=o+(E-o)*pow(1.-dot(d,-r),g*16.);a=clamp(a,0.,1.);float t=1.-u117*texture2D(u116,vv0).r;h*=pow(t,2.),q*=t;vec3 i=C*mix(q,h,a),M=mix(k,i,z*(f*(1.-a)+a));float K=dot(i,v),L=max(0.,(K-1.)/(w-1.));gl_FragColor=vec4(i,L);}",
i:p.concat(["u116","u117"]),precision:"highp"});f.s83={name:"_",g:"uniform sampler2D u105,u106,u107,u108,u95,u109,u97;uniform vec3 u110,u113;uniform vec2 u10;uniform float u3,u112,u114,u115,u118,u119,u111,u120;varying vec2 vv0;const float g=3.141592;const vec3 G=vec3(0.),m=vec3(1.),H=vec3(.299,.587,.114);const float I=2.;vec3 r(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}vec2 J(vec3 a){float b=atan(a.x,-a.z),c=acos(-a.y);return vec2(.5-.5*b/g,1.-c/g);}vec2 K(vec3 a,float e){float b=pow(2.,e);vec2 f=vec2(1.,.5)/b,h=vec2(0.,1.-1./b);float i=atan(a.x,a.z),j=acos(-a.y),c=.5+.5*i/g,k=j/g,l=.5*b/u111;c=(1.-l)*c;return h+vec2(c,k)*f;}float n(vec3 a,vec3 b){return abs(acos(dot(a,b)));}float o(vec2 a){float b=texture2D(u105,a).a;return step(.01,b);}vec3 p(vec2 a){return texture2D(u97,vec2(1.-a.x,a.y)).rgb;}void main(){vec4 h=texture2D(u105,vv0);if(h.a<.01){gl_FragColor=vec4(p(vv0),0.);return;}float i=h.a;vec3 L=h.rgb,M=L+u110;vec4 c=texture2D(u108,vv0),s=texture2D(u106,vv0);vec3 a=s.rgb;float j=s.a;vec4 k=texture2D(u107,vv0);vec3 e=k.rgb;if(i>1.){gl_FragColor=vec4(mix(p(vv0),e,k.a),1.);return;}e=pow(e,u118*m);float t=c.r,N=c.g,O=c.a,u=floor(c.b*255.),l=floor(u/16.),P=(u-16.*l)/16.;l/=16.,j=1.-(1.-j)*(1.-k.a);vec2 v=vv0+vec2(-1.,0.)*u10,w=vv0+vec2(1.,0.)*u10,x=vv0+vec2(0.,1.)*u10,y=vv0+vec2(0.,-1.)*u10;vec3 Q=texture2D(u106,v).rgb,R=texture2D(u106,w).rgb,S=texture2D(u106,x).rgb,T=texture2D(u106,y).rgb;float U=n(a,Q)*o(v),V=n(a,R)*o(w),W=n(a,S)*o(x),X=n(a,T)*o(y),Y=2.*max(max(U,V),max(W,X)),Z=1.2*clamp(Y/g,0.,1.),_=max(N,Z);vec2 aa=J(a);vec3 ba=r(texture2D(u109,aa)),ca=(1.-O)*ba,z=normalize(M),A=G,B=reflect(-z,a);float da=floor(_*u3);vec2 ea=K(B,da);float fa=acos(-B.z),ga_=smoothstep(u112-u114,u112+u114,fa);vec3 ha=r(texture2D(u95,ea));A=mix(ha,u113,ga_*u115);float b=t+(P-t)*pow(1.+dot(a,z),l*15.);b=clamp(b,0.,1.);vec2 C=vv0;vec3 D=refract(vec3(0.,0.,-1.),a,.666667);float ia=smoothstep(.1,.3,length(D.xy)),E=sqrt(u10.y/u10.x),ja=smoothstep(.3,.8,i);C+=ja*D.xy*vec2(1./E,E)*ia*.03;vec3 ka=e*mix(ca,A,b);float q=i*(j*(1.-b)+b);vec3 f=mix(p(C),pow(ka,m/u118),q);float F=dot(f,H),la=max(0.,(F-1.)/(I-1.));f=mix(F*m,f,mix(1.,u119,q)*m);float ma=mix(la,q,u120);gl_FragColor=vec4(f,ma);}",
i:p.concat(["u120","u118","u119"]),precision:"highp"};T.da&&(f.s84={name:"_",g:"uniform sampler2D u105,u106;uniform mat4 u121;uniform vec2 u122,u10,u123;uniform float u124,u125,u126,u127,u128,u129,u130,u131,u117;varying vec2 vv0;const float PI=3.141593,HALFPI=1.570796,N=8888.8;void main(){vec2 uvt=vv0+u123;vec4 pos=texture2D(u105,uvt);if(pos.a<.01){gl_FragColor=vec4(0.,0.,0.,1.);return;}vec3 co0=pos.rgb;float c=cos(u124),s=sin(u124);vec3 no0=texture2D(u106,uvt).rgb;float zv=(u121*vec4(co0,1.)).z;vec3 co;vec2 scale=u122/abs(zv),uv,duv=u10*vec2(c,s)*scale;vec3 dp,dpn;float dzMax=0.,angleMin=0.,angle;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u105,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u130,u131,length(dp)),angleMin=max(angleMin,angle),dzMax=max(dzMax,sin(angle)*length(dp));float angleMinInv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u105,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u130,u131,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMinInv=max(angleMinInv,angle);duv=u10*vec2(s,c)*scale;float angleMin2=0.;for(float i=0.;i<N;i+=1.)uv=uvt+i*duv,co=texture2D(u105,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u130,u131,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2=max(angleMin2,angle);float angleMin2Inv=0.;for(float i=0.;i<N;i+=1.)uv=uvt-i*duv,co=texture2D(u105,uv).rgb,dp=co-co0,dpn=normalize(dp),angle=atan(dot(no0,dpn),length(cross(no0,dpn))),angle*=1.-smoothstep(u130,u131,length(dp)),dzMax=max(dzMax,sin(angle)*length(dp)),angleMin2Inv=max(angleMin2Inv,angle);float omegaMin=PI/4.*(angleMin+angleMinInv)*(angleMin2+angleMin2Inv),dzFactor=clamp(dzMax/u127,u128,1.),ao=dzFactor*clamp(u126*omegaMin*u129,0.,u117);gl_FragColor=vec4(ao,ao,ao,u125);}",
i:"u105 u106 u126 u125 u124 u10 u132 u127 u128 u129 u130 u131 u121 u122 u117".split(" "),Ca:[{search:"8888.8",replace:T.kk[ca.T()].toFixed(1)}],precision:"lowp"},f.s85={name:"_",g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const vec2 f=vec2(-.9,.4),g=vec2(.4,.9),h=vec2(-.4,-.9),i=vec2(.9,-.4),j=vec2(-1.9,.9),k=vec2(.9,1.9),l=vec2(-.9,-1.9),m=vec2(1.9,-.9);void main(){vec2 a=vv0;vec4 b=texture2D(u1,a)+texture2D(u1,a+u10*f)+texture2D(u1,a+u10*g)+texture2D(u1,a+u10*h)+texture2D(u1,a+u10*i);b+=texture2D(u1,a+u10*j)+texture2D(u1,a+u10*k)+texture2D(u1,a+u10*l)+texture2D(u1,a+u10*m),gl_FragColor=b/9.;}",
i:["u1","u10"],precision:"lowp"});f.s86={name:"_",g:"varying vec3 vv0;void main(){gl_FragColor=vec4(vv0,1.);}",s:"attribute vec3 a0;uniform mat4 u133,u121,u134;varying vec3 vv0;void main(){vec4 a=u133*u121*u134*vec4(a0,1.);gl_Position=a,vv0=a.xyz/a.w;}",i:["u133","u121","u134"],precision:"lowp"};f.s87={name:"_",g:"uniform sampler2D u135,u109,u96;uniform mat4 u133,u136;uniform vec2 u137;uniform float u138;varying vec2 vv0;const float n=8888.8,o=9999.9,p=25.,v=50.,w=1.2,e=3.141592;const vec4 x=vec4(0.,0.,0.,0.),A=vec4(1.,1.,1.,1.);const vec2 f=vec2(.5,.5);vec2 y(vec3 a){float b=atan(a.x,a.z),c=acos(a.y);return vec2(.5-.5*b/e,1.-c/e);}void main(){float d,a,q;vec2 z=vec2(vv0.x,1.-vv0.y),b;vec3 r=vec3(u137*(z-f),0.),B=vec3(u136*vec4(r,1.)),g,s;vec4 t=x,h,c,u;vec3 i;int j;for(float k=0.;k<n;k+=1.){b.x=k,b.y=floor(b.x/64.),c=texture2D(u96,b/64.),d=e*c.r,a=2.*asin(sqrt(.25+c.g*.25)),g=vec3(cos(d)*sin(a),sin(d)*sin(a),-cos(a)),q=p+(.5+.5*c.b)*(v-p),j=0;for(float l=0.;l<=o;l+=1.){u=vec4(r+g*q*pow(l/o,w),1.),h=u133*u,i=h.xyz/h.w;if(texture2D(u135,f+f*i.xy).z<i.z){j=1;break;}}if(j==1)continue;s=vec3(u136*vec4(g,0.)),t+=texture2D(u109,y(s));}gl_FragColor=vec4(u138*t.rgb/n,1.);}",
i:"u135 u109 u96 u133 u136 u137 u138".split(" "),Ca:[{search:"8888.8",replace:T.co[ca.T()].toFixed(1)},{search:"9999.9",replace:T.eo[ca.T()].toFixed(1)}],precision:"lowp"};f.s88={name:"_",g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){vec4 a=.285714*texture2D(u1,vv0-u10)+.428571*texture2D(u1,vv0)+.285714*texture2D(u1,vv0+u10);gl_FragColor=a;}",i:["u1","u10"],precision:"lowp"};f.s89={name:"_",g:"uniform sampler2D u1,u139;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
s:"attribute vec3 a0;attribute vec2 a1;uniform mat4 u133,u121;varying vec2 vv0;void main(){vec4 a=u133*u121*vec4(a0,1.);gl_Position=a,vv0=a1;}",i:["u133","u121","u1"],I:["a0","a1"],precision:"lowp"};if(ca.Y()){p="u38 u140 u141 u142 u143 u39 u108 u144 u145 u9 u146 u147 u75".split(" ").concat(G,x);ca.ji()||(f.s90={name:"_",s:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,0.,0.),gl_FragData[2]=vec4(0.,0.,0.,0.),gl_FragData[3]=vec4(0.,0.,0.,0.);}",
i:[],precision:"lowp",ca:!0});f.s91={name:"_",s:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform vec4 color;void main(){gl_FragData[0]=color,gl_FragData[1]=color,gl_FragData[2]=color,gl_FragData[3]=color;}",i:["color"],ca:!0};f.s92NNGLcolor={name:"_",g:"uniform vec4 u108,u9;uniform vec3 u144;uniform float u145;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv3),c=u145;vec4 a=u108;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u144,0.),gl_FragData[3]=a;}",
s:"attribute vec3 a0,a2;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u146,u147,u142,u143,u149;varying vec3 vv0,vv1;varying float vv2,vv3;const vec2 e=vec2(1.);const vec3 r=vec3(1.);const vec2 F=vec2(-1.,1.),s=vec2(.16,.5),t=vec2(.5,.5),u=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 v(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,s);vec2 f=u82*e;vec3 c=u82*r;vec2 w=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,t).rgb+vec3(u76,0.,0.),u79,c);float x=mix(texture2D(u38,u).r,0.,u82);a.z+=x;mat3 h=v(a);vec3 y=mix(u140,u80,c);float z=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 A=mat2(i,j,-j,i);b.xy=A*b.xy;float B=mix(u78,1.,u82);vec2 k=u77/w;vec3 l=a0;float C=max(0.,-a0.z-u142)*u143;l.x+=C*sign(a0.x)*(1.-u82);vec3 m=h*(l+y)*z+b;vec2 D=k*B;vec3 E=vec3(g*D,-k)+m*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(E,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv2=smoothstep(u146,u147,a0.z),vv0=m,vv3=a0.y;}",
i:p,I:["a0","a2"],R:[3,3],ca:!0};f.s92NNGLtexture={name:"_",g:"uniform sampler2D u1;uniform vec4 u108,u9;uniform vec3 u144;uniform float u145,u70;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv4),d=u145;vec4 b=u108;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u144,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u144,l,u70),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
s:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u146,u147,u142,u143,u149;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,t);vec2 f=u82*e;vec3 c=u82*s;vec2 x=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,u).rgb+vec3(u76,0.,0.),u79,c);float y=mix(texture2D(u38,v).r,0.,u82);a.z+=y;mat3 h=w(a);vec3 z=mix(u140,u80,c);float A=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u78,1.,u82);vec2 k=u77/x;vec3 l=a0;float D=max(0.,-a0.z-u142)*u143;l.x+=D*sign(a0.x)*(1.-u82);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u146,u147,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(D),I:["a0","a2","a1"],R:[3,3,2],ca:!0};f.s92NNGLtextureNormalMap={name:"_",g:"uniform vec4 u108,u9;uniform vec3 u144;uniform sampler2D u1,u150;uniform float u145,u70;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u150,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u145;vec4 c=u108;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u144,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u144,t,u70),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u146,u147,u142,u143,u149;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,u);vec2 f=u82*e;vec3 c=u82*t;vec2 y=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,v).rgb+vec3(u76,0.,0.),u79,c);float z=mix(texture2D(u38,w).r,0.,u82);a.z+=z;mat3 h=x(a);vec3 A=mix(u140,u80,c);float B=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u78,1.,u82);vec2 k=u77/y;vec3 l=a0;float E=max(0.,-a0.z-u142)*u143;l.x+=E*sign(a0.x)*(1.-u82);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u146,u147,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(D,["u150"]),I:["a3","a0","a2","a1"],R:[4,3,3,2],ca:!0};f.s92NNGLtextureParamsMap={name:"_",g:"uniform sampler2D u1,u71;uniform vec4 u108,u9,u72;uniform vec3 u144;uniform float u145,u70;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv4),d=u145;vec4 a=u108,e=texture2D(u71,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u72*f),d=mix(d,r,u72.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u144,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u144,u,u70),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
s:"attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u146,u147,u142,u143,u149;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;const vec2 e=vec2(1.);const vec3 s=vec3(1.);const vec2 G=vec2(-1.,1.),t=vec2(.16,.5),u=vec2(.5,.5),v=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 w(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,t);vec2 f=u82*e;vec3 c=u82*s;vec2 x=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,u).rgb+vec3(u76,0.,0.),u79,c);float y=mix(texture2D(u38,v).r,0.,u82);a.z+=y;mat3 h=w(a);vec3 z=mix(u140,u80,c);float A=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 B=mat2(i,j,-j,i);b.xy=B*b.xy;float C=mix(u78,1.,u82);vec2 k=u77/x;vec3 l=a0;float D=max(0.,-a0.z-u142)*u143;l.x+=D*sign(a0.x)*(1.-u82);vec3 m=h*(l+z)*A+b;vec2 E=k*C;vec3 F=vec3(g*E,-k)+m*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(F,1.)),vv1=h*a2*vec3(1.,-1.,-1.),vv3=smoothstep(u146,u147,a0.z),vv2=a1,vv0=m,vv4=a0.y;}",
i:p.concat(D,z),I:["a0","a2","a1"],R:[3,3,2],ca:!0};f.s92NNGLtextureNormalParamsMap={name:"_",g:"uniform sampler2D u1,u150,u71;uniform vec4 u108,u9,u72;uniform vec3 u144;uniform float u145,u70;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u150,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u145;vec4 a=u108,f=texture2D(u71,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u72*l),e=mix(e,z,u72.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u144,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u144,C,u70),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u148;uniform float u141,u146,u147,u142,u143,u149;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec2 e=vec2(1.);const vec3 t=vec3(1.);const vec2 H=vec2(-1.,1.),u=vec2(.16,.5),v=vec2(.5,.5),w=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 x(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,u);vec2 f=u82*e;vec3 c=u82*t;vec2 y=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,v).rgb+vec3(u76,0.,0.),u79,c);float z=mix(texture2D(u38,w).r,0.,u82);a.z+=z;mat3 h=x(a);vec3 A=mix(u140,u80,c);float B=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 C=mat2(i,j,-j,i);b.xy=C*b.xy;float D=mix(u78,1.,u82);vec2 k=u77/y;vec3 l=a0;float E=max(0.,-a0.z-u142)*u143;l.x+=E*sign(a0.x)*(1.-u82);vec3 m=h*(l+A)*B+b;vec2 F=k*D;vec3 G=vec3(g*F,-k)+m*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(G,1.)),vv2=h*a2*vec3(1.,-1.,-1.),vv4=smoothstep(u146,u147,a0.z),vv0=a3,vv3=a1,vv1=m,vv5=a0.y;}",
i:p.concat(D,["u150"],z),I:["a3","a0","a2","a1"],R:[4,3,3,2],ca:!0};p="u133 u121 u134 u108 u144 u145 u9".split(" ");f.s92color={name:"_",g:"uniform vec4 u108,u9;uniform vec3 u144;uniform float u145;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){float b=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv3),c=u145;vec4 a=u108;float d=floor(15.99*c),i=floor(15.99*a.b);a.b=(d+16.*i)/255.,gl_FragData[0]=vec4(vv0,vv2),gl_FragData[1]=vec4(normalize(vv1),b),gl_FragData[2]=vec4(u144,0.),gl_FragData[3]=a;}",s:"attribute vec3 a0,a2;uniform mat4 u133,u121,u134;varying vec3 vv0,vv1;varying float vv2,vv3;void main(){vec4 a=u134*vec4(a0,1.),b=u134*vec4(a2,0.);gl_Position=u133*u121*a,vv0=a.xyz,vv1=b.xyz,vv2=1.,vv3=a0.y;}",
i:p,I:["a0","a2"],ca:!0};f.s92={name:"_",g:"uniform sampler2D u1;uniform vec4 u108,u9;uniform vec3 u144;uniform float u145,u70;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){float c=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv4),d=u145;vec4 b=u108;float j=floor(15.99*d),k=floor(15.99*b.b);b.b=(j+16.*k)/255.;vec4 a=texture2D(u1,vv2);vec3 l=mix(u144,a.rgb,a.a);vec4 m=vec4(mix(a.rgb*u144,l,u70),a.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),c),gl_FragData[2]=m,gl_FragData[3]=b;}",
s:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u133,u121,u134;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u134*vec4(a0,1.),b=u134*vec4(a2,0.);gl_Position=u133*u121*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(D),I:["a0","a2","a1"],ca:!0};var h=["u150","u151"];f.s92NormalMap={name:"_",g:"uniform sampler2D u1,u150;uniform vec4 u108,u9;uniform vec3 u151,u144;uniform float u145,u70;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 l=vec3(1.,1.,1.);void main(){float m=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv5);vec3 v=vec3(0.,0.,-1.),d=normalize(vv2),b=texture2D(u150,vv3).xyz;b=normalize(b*255./127.-1.007874*l);vec3 g=vv0.xyz,n=cross(d,g)*vv0.w;mat3 o=mat3(g,n,d);vec3 p=o*b;float q=u145;vec4 c=u108;float r=floor(15.99*q),s=floor(15.99*c.b);c.b=(r+16.*s)/255.;vec4 a=texture2D(u1,vv3);vec3 t=mix(u144,a.rgb,a.a);vec4 u=vec4(mix(a.rgb*u144,t,u70),a.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(p,m),gl_FragData[2]=u,gl_FragData[3]=c;}",
s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u133,u121,u134;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u134*vec4(a0,1.),b=u134*vec4(a2,0.);gl_Position=u133*u121*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(D,h),I:["a0","a2","a1","a3"],ca:!0};f.s92ParamsMap={name:"_",g:"uniform sampler2D u1,u71;uniform vec4 u108,u9,u72;uniform vec3 u144;uniform float u145,u70;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;vec2 j(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float g=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv4),d=u145;vec4 a=u108,e=texture2D(u71,vv2);vec2 b=j(e.b,4.);float h=1.-b.x,o=b.y;b=j(e.a,1.);float p=b.x,f=b.y;vec4 q=vec4(e.rg,o,p);float r=h;a=mix(a,q,u72*f),d=mix(d,r,u72.b*f);float s=floor(15.99*d),t=floor(15.99*a.b);a.b=(s+16.*t)/255.;vec4 c=texture2D(u1,vv2);vec3 u=mix(u144,c.rgb,c.a);vec4 v=vec4(mix(c.rgb*u144,u,u70),c.a);gl_FragData[0]=vec4(vv0,vv3),gl_FragData[1]=vec4(normalize(vv1),g),gl_FragData[2]=v,gl_FragData[3]=a;}",
s:"attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u133,u121,u134;varying vec3 vv0,vv1;varying vec2 vv2;varying float vv3,vv4;void main(){vec4 a=u134*vec4(a0,1.),b=u134*vec4(a2,0.);gl_Position=u133*u121*a,vv2=a1,vv0=a.xyz,vv1=b.xyz,vv3=1.,vv4=a0.y;}",i:p.concat(D,z),I:["a0","a2","a1"],ca:!0};f.s92NormalParamsMap={name:"_",g:"uniform sampler2D u1,u150,u71;uniform vec4 u108,u9,u72;uniform vec3 u151,u144;uniform float u145,u70;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;const vec3 q=vec3(1.,1.,1.);vec2 k(float d,float e){float f=floor(d*255.+.01),a=pow(2.,e),g=256./a,b=f/a,c=floor(b),h=(b-c)*a;return vec2(c/(g-1.),h/(a-1.));}void main(){float r=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv5);vec3 E=vec3(0.,0.,-1.),g=normalize(vv2),d=texture2D(u150,vv3).xyz;d=normalize(d*255./127.-1.007874*q);vec3 h=vv0.xyz,s=cross(g,h)*vv0.w;mat3 t=mat3(h,s,g);vec3 u=t*d;float e=u145;vec4 a=u108,f=texture2D(u71,vv3);vec2 b=k(f.b,4.);float v=1.-b.x,w=b.y;b=k(f.a,1.);float x=b.x,l=b.y;vec4 y=vec4(f.rg,w,x);float z=v;a=mix(a,y,u72*l),e=mix(e,z,u72.b*l);float A=floor(15.99*e),B=floor(15.99*a.b);a.b=(A+16.*B)/255.;vec4 c=texture2D(u1,vv3);vec3 C=mix(u144,c.rgb,c.a);vec4 D=vec4(mix(c.rgb*u144,C,u70),c.a);gl_FragData[0]=vec4(vv1,vv4),gl_FragData[1]=vec4(u,r),gl_FragData[2]=D,gl_FragData[3]=a;}",
s:"attribute vec4 a3;attribute vec3 a0,a2;attribute vec2 a1;uniform mat4 u133,u121,u134;varying vec4 vv0;varying vec3 vv1,vv2;varying vec2 vv3;varying float vv4,vv5;void main(){vec4 a=u134*vec4(a0,1.),b=u134*vec4(a2,0.);gl_Position=u133*u121*a,vv0=a3,vv3=a1,vv1=a.xyz,vv2=b.xyz,vv4=1.,vv5=a0.y;}",i:p.concat(D,h,z),I:["a0","a2","a1","a3"],ca:!0}}else t();r();p=[{type:"1i",name:"u1",value:0}];k.j("s0",p);k.j("s1",p);k.j("s65",[{type:"1i",name:"u8",value:1}].concat(p));k.j("s66",[{type:"1i",name:"u8",
value:1}].concat(p));k.j("s12",[{type:"1i",name:"u85",value:1}].concat(p));k.j("s67",[{type:"1i",name:"u85",value:1}].concat(p));k.j("s68",p);k.j("s69",p);k.j("s70",[{type:"1i",name:"u89",value:1},{type:"1i",name:"u38",value:2}].concat(p));k.j("s71",p);k.j("s44",p);k.j("s72",[{type:"1i",name:"u91",value:0},{type:"1i",name:"u92",value:1}]);k.j("s73",[{type:"1i",name:"u95",value:0},{type:"1i",name:"u96",value:1}]);k.j("s74",p);k.j("s75",p);k.j("s76",p);k.j("s77",p);k.j("s78",p);k.j("s79",[{type:"1i",
name:"u85",value:1}].concat(p));k.j("s80",[{type:"1i",name:"u85",value:1}].concat(p));T.da&&(k.j("s84",[{type:"1i",name:"u105",value:0},{type:"1i",name:"u106",value:1},{type:"1f",name:"u127",value:T.Zj},{type:"1f",name:"u128",value:T.$j},{type:"1f",name:"u129",value:T.lk},{type:"1f",name:"u130",value:T.ck},{type:"1f",name:"u131",value:T.dk},{type:"1f",name:"u126",value:1},{type:"1f",name:"u117",value:1}]),k.j("s85",p));h=[{type:"1i",name:"u105",value:0},{type:"1i",name:"u106",value:1},{type:"1i",
name:"u107",value:2},{type:"1i",name:"u95",value:3},{type:"1i",name:"u109",value:4},{type:"1i",name:"u108",value:6},{type:"1i",name:"u97",value:7},{type:"1f",name:"u115",value:0},{type:"1f",name:"u112",value:0},{type:"1f",name:"u114",value:0}];T.da&&k.j("s82",h.concat([{type:"1f",name:"u117",value:T.bk[ca.T()]},{type:"1i",name:"u116",value:5}]));k.j("s83",h.concat([{type:"1f",name:"u118",value:T.Ic},{type:"1f",name:"u119",value:T.Xf},{type:"1f",name:"u120",value:0}]));k.j("s87",[{type:"1i",name:"u135",
value:0},{type:"1i",name:"u109",value:1},{type:"1i",name:"u96",value:2},{type:"1f",name:"u138",value:T.bo}]);k.j("s88",p);k.j("s89",p);k.j("s81",[{type:"1i",name:"u2",value:1},{type:"1i",name:"u98",value:2},{type:"1i",name:"u97",value:3},{type:"1f",name:"u103",value:1},{type:"2f",name:"u100",value:[0,0]}].concat(p));ca.Y()?(k.j("s92",p),k.j("s92NormalMap",[{type:"1i",name:"u150",value:1}].concat(p)),k.j("s92ParamsMap",[{type:"1i",name:"u71",value:1}].concat(p)),k.j("s92NormalParamsMap",[{type:"1i",
name:"u150",value:1},{type:"1i",name:"u71",value:2}].concat(p))):n();v=!0},Qn:function(){t();r();n()},qd:function(){return A.id},cf:function(){return G},df:function(){return x},set:function(p){pb.kj(k);f[p].set()},ub:function(p){return l(p,w())},Td:function(p){return l(p,{name:"_",g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:"highp"})},Tn:function(p){return l(p,{name:"_",g:"const vec4 d=vec4(.5,.5,.5,.5);void main(){gl_FragData[0]=d,gl_FragData[1]=d,gl_FragData[2]=d,gl_FragData[3]=d;}",
i:[],precision:"highp",ca:!0})},H:function(){-1!==g&&A.H()},Vd:function(){var p=0;A.va.forEach(function(h,H){H=A.R[H];b.vertexAttribPointer(h,H,b.FLOAT,!1,A.Mg,p);p+=4*H})},ac:function(){k.bc(b)},bc:function(p){p.vertexAttribPointer(A.va[0],2,p.FLOAT,!1,8,0)},eq:function(){b.vertexAttribPointer(A.attributes.a0,3,b.FLOAT,!1,12,0)},La:function(){b.vertexAttribPointer(A.attributes.a0,3,b.FLOAT,!1,32,0)},Xa:function(){b.vertexAttribPointer(A.attributes.a0,3,b.FLOAT,!1,24,0)},dj:function(){b.vertexAttribPointer(A.attributes.a2,
3,b.FLOAT,!1,32,12)},ej:function(){b.vertexAttribPointer(A.attributes.a2,3,b.FLOAT,!1,24,12)},Kc:function(){b.vertexAttribPointer(A.attributes.a1,2,b.FLOAT,!1,32,24)},fq:function(){b.vertexAttribPointer(A.attributes.a0,3,b.FLOAT,!1,20,0);b.vertexAttribPointer(A.attributes.a1,2,b.FLOAT,!1,20,12)},Gn:function(){b.vertexAttribPointer(A.attributes.a0,3,b.FLOAT,!1,32,0);b.vertexAttribPointer(A.attributes.a2,3,b.FLOAT,!1,32,12);b.vertexAttribPointer(A.attributes.a1,2,b.FLOAT,!1,32,24)},Hn:function(){b.vertexAttribPointer(A.attributes.a0,
3,b.FLOAT,!1,32,0);b.vertexAttribPointer(A.attributes.a2,3,b.FLOAT,!1,32,12)},In:function(){b.vertexAttribPointer(A.attributes.a0,3,b.FLOAT,!1,24,0);b.vertexAttribPointer(A.attributes.a2,3,b.FLOAT,!1,24,12)},Rd:function(){b.vertexAttribPointer(A.attributes.a3,4,b.FLOAT,!1,16,0)},Ud:function(p,h){b.uniform1i(A.A[p],h)},G:function(p,h){b.uniform1f(A.A[p],h)},O:function(p,h,H){b.uniform2f(A.A[p],h,H)},og:function(p,h){b.uniform2fv(A.A[p],h)},pg:function(p,h,H,I){b.uniform3f(A.A[p],h,H,I)},qg:function(p,
h){b.uniform3fv(A.A[p],h)},xa:function(p,h){b.uniform4fv(A.A[p],h)},Xn:function(p,h){b.uniformMatrix2fv(A.A[p],!1,h)},Yn:function(p,h){b.uniformMatrix3fv(A.A[p],!1,h)},Lc:function(p,h){b.uniformMatrix4fv(A.A[p],!1,h)},j:function(p,h){k.set(p);h.forEach(function(H){switch(H.type){case "4f":b.uniform4fv(A.A[H.name],H.value);break;case "3f":b.uniform3fv(A.A[H.name],H.value);break;case "2f":b.uniform2fv(A.A[H.name],H.value);break;case "1f":b.uniform1f(A.A[H.name],H.value);break;case "1i":b.uniform1i(A.A[H.name],
H.value);break;case "mat2":b.uniformMatrix2fv(A.A[H.name],!1,H.value);break;case "mat4":b.uniformMatrix4fv(A.A[H.name],!1,H.value)}})},L:function(){for(var p in f){var h=f[p];b.detachShader(h.ma,h.ff);b.detachShader(h.ma,h.ef);b.deleteShader(h.ff);b.deleteShader(h.ef);b.deleteProgram(h.ma)}},v:function(){b.disableVertexAttribArray(0);k.H();k.L();K=0;v=!1;A=null;g=-1}};return k}(),Ua=function(){var a={},c=[],d=!1,e=0,q=0,l=-1,w=-1,n=-1,t=1,r=null,v=!1,D=null,z=!1,G=!1,x=!1,f=!1,g=!1,A=!1,K=!1,k=!1,
p=null,h=null,H=-1,I=-1,F=null,B=-1,m,u=null,E=null,R=null,Q=null,ea=null,fa=null,ka=null,O=[{type:"1f",name:"u82",value:0},{type:"1f",name:"u146",value:0},{type:"1f",name:"u147",value:0},{type:"1f",name:"u77",value:1},{type:"1f",name:"u74",value:0},{type:"1f",name:"u84",value:1}],M={m:function(y,P){a.sg=y;ca.Ig();zc.Te();Pb.Te(y.le);l=y.We;w=y.Lo;n=y.Pf;t=y.ke;var J=[{type:"1f",name:"u77",value:l},{type:"1f",name:"u74",value:n},{type:"1f",name:"u78",value:y.xn},{type:"mat4",name:"u73",value:y.an},
{type:"2f",name:"u39",value:y.Lj}];y.Gg=J;var U=[{type:"3f",name:"u79",value:[0,0,0]},{type:"3f",name:"u80",value:y.Qg},{type:"3f",name:"u81",value:y.Pg},{type:"1f",name:"u82",value:0},{type:"1f",name:"u83",value:y.le},{type:"1f",name:"u84",value:1}];y.Cj=U;M.fm(y,P);d||void 0!==y.Ba||(y.Ba=[0,0,120]);k=K=L.gf;if(!d&&K){P=1*ca.qb();var ta=1*ca.pb(),ja={isLinear:!0,isPot:!1,width:P,height:ta};p=aa.instance(ja);h=aa.instance(ja);H=1/P;I=1/ta}J=[{type:"1i",name:"u38",value:1},{type:"3f",name:"u75",value:y.Ba},
{type:"1f",name:"u142",value:y.Xc},{type:"1f",name:"u143",value:y.Eb}].concat(J,U);r=y.Ec;U=[{type:"1f",name:"u146",value:r[0]},{type:"1f",name:"u147",value:r[1]}];ca.Y()?(P=[{type:"1i",name:"u1",value:0}],ta=[{type:"1i",name:"u150",value:2}],C.j("s92NNGLcolor",J.concat(U)),C.j("s92NNGLtexture",[].concat(P,J,U)),C.j("s92NNGLtextureNormalMap",[].concat(P,ta,J,U)),C.j("s92NNGLtextureParamsMap",[{type:"1i",name:"u71",value:2}].concat(P,J,U)),C.j("s92NNGLtextureNormalParamsMap",[{type:"1i",name:"u71",
value:3}].concat(P,ta,J,U))):(C.j("s96",J.concat(U)),C.j("s97",[{type:"1i",name:"u1",value:0}].concat(J)),C.j("s98",J),C.j("s99",J),C.j("s100",J.concat([{type:"1i",name:"u150",value:0}])),C.j("s101",J),C.j("s102",J.concat([{type:"1i",name:"u71",value:0}])));C.j("s70",[{type:"2f",name:"u90",value:y.zg}]);C.j(T.da?"s82":"s83",[{type:"1f",name:"u112",value:y.xe},{type:"3f",name:"u113",value:y.cg},{type:"1f",name:"u114",value:y.Je},{type:"1f",name:"u115",value:1},{type:"3f",name:"u110",value:y.Pj}]);
if(m=y.Ed)F=y.Gm,B=y.Fd,C.j("s81",[{type:"4f",name:"u99",value:y.Dd},{type:"1f",name:"u102",value:y.Gf},{type:"2f",name:"u100",value:y.Fm},{type:"1f",name:"u104",value:Math.sign(B)}]);c.forEach(function(ua){ua.$i(y)});d=!0},Zb:function(y){G&&za.ka.Zb(y);f&&za.qa.Zb(y)},fm:function(y,P){void 0!==za.ka&&y.dc&&ca.Y()&&(za.ka.m(y),z=!0,P.push(function(J){za.ka.Zb(J);G=!x}));void 0!==za.qa&&y.bd&&(za.qa.m(y),P.push(function(J){za.qa.Zb(J);f=!0}));void 0!==za.mc&&y.Ae&&(za.mc.m(y),A=g=!0);void 0!==za.ib&&
(za.ib.m(y),D=za.ib.hm({width:y.zc,height:2*y.zc,depth:1.5*y.zc,pl:-y.lf,Qa:y.jf,Tk:y.kf}),v=!0)},Vn:function(y,P,J,U){y&&(ka=y,z&&za.ka.$b(y),f&&za.qa.$b(y),g&&za.mc.$b(y),c.forEach(function(ta){ta.$b(y)}));J&&(Q=J);U&&(ea=U)},vb:function(y){ca.Y()?(C.j("s92NNGLcolor",y),C.j("s92NNGLtexture",y),C.j("s92NNGLtextureNormalMap",y),C.j("s92NNGLtextureParamsMap",y),C.j("s92NNGLtextureNormalParamsMap",y)):(C.j("s96",y),C.j("s97",y),C.j("s98",y),C.j("s99",y),C.j("s100",y),C.j("s101",y),C.j("s102",y))},Za:function(y,
P,J){var U=[y[0]+P[0],y[1]+P[1],y[2]+P[2]];U=[U[0]+J[0],U[1]+J[1],U[2]+J[2]];a.Od=U;a.Mm=P;a.zo=J;M.vb([{type:"3f",name:"u140",value:U}]);ca.Y()&&(z&&za.ka.Za(y,P,J),f&&za.qa.Za(U));v&&za.ib.Za(y)},$a:function(y,P,J){var U=y*P*J;a.Nm=P;a.Ao=J;a.Zl=y;M.vb([{type:"1f",name:"u141",value:U}]);ca.Y()&&(z&&za.ka.$a(y*P,J),f&&za.qa.$a(U));v&&za.ib.$a(y)},Ui:function(){M.Za(a.Od,a.Mm,a.zo);M.$a(a.Zl,a.Nm,a.Ao);M.ij(a.rx);M.m(a.sg);M.fj(a.uk,a.Eb)},ij:function(y){a.rx=y;M.vb([{type:"1f",name:"u76",value:y}]);
ca.Y()&&(z&&za.ka.mg(y),f&&za.qa.mg(y))},fj:function(y,P){a.uk=y;a.Eb=P;M.vb([{type:"1f",name:"u142",value:y},{type:"1f",name:"u143",value:P}])},On:function(y){r=y;0===e&&M.vb([{type:"1f",name:"u146",value:r[0]},{type:"1f",name:"u147",value:r[1]}])},Ya:function(y){function P(){v&&za.ib.toggle(!1);m&&C.j("s81",[{type:"1f",name:"u103",value:0}])}0>=y?(q=0,0!==e&&(e=0,Pb.rn(),v&&za.ib.toggle(!0),m&&C.j("s81",[{type:"1f",name:"u103",value:1}]))):1<=y?(q=1,1!==e&&(e=1,Pb.qj(!0)),P()):(q=y,2!==e&&(Pb.qj(!1),
e=2,P()));C.j("s83",[{type:"1f",name:"u115",value:1-y}]);O[0].value=q;O[1].value=r[0]*(1-y)+-300*y;O[2].value=r[1]*(1-y)+-300*y;O[3].value=l*(1-y)+y*w;O[4].value=n*(1-y);O[5].value=1-y+y*t;G&&za.ka.ng(q,O);f&&za.qa.ng(q,O);M.vb(O)},ml:function(y){ka.h(1);y.forEach(function(P){P.hl()});v&&D.U()},zm:function(){return 1===e},ye:function(y){ka.Oa(y)},Uj:function(y){c.push(y)},xg:function(y){x=!y;G=y&&z},wg:function(y){A=y&&g},jg:function(y){f&&ca.Y()&&za.qa.Zn(y)},wb:function(y){ca.Y()&&(z&&za.ka.wb(y),
f&&za.qa.wb(y))},jl:function(y,P){if(!k)return!1;p.N();y.h(0);C.set("s74");C.O("u10",0,I);Z.l(!1,!1);h.o();p.h(0);C.O("u10",H,0);Z.l(!1,!1);C.set("s75");P.N();h.h(0);Z.l(!1,!1);return!0},pj:function(y){k=y&&K},resize:function(y,P,J){K&&(y*=J,P*=J,p.resize(y,P),h.resize(y,P),H=1/y,I=1/P)},hg:function(y,P){var J=y.M(),U=y.X(),ta={width:J,height:U,isPot:!1};z&&(R&&R.remove(),R=aa.instance(ta));u=Ba.instance({width:J,height:U});g||f?(za.mc.ig(J,U),E&&E.remove(),E=aa.instance(ta)):E=y;z&&za.ka.ig(J,U);
P&&(fa&&fa.remove(),fa=aa.instance(ta))},fl:function(y){var P=null;switch(e){case 0:P=y;break;case 2:u.bind(!1,!0);fa.o();C.set("s65");C.G("u9",q);y.h(1);ea.h(0);Z.l(!0,!0);P=fa;break;case 1:P=ea}if(!G||1===e||!ca.Y())return P;P.Oa(0);A&&za.mc.U(P,E);u.bind(!1,!A);f&&(A?P.h(0):(E.o(),C.set("s1"),Z.l(!0,!0)),za.qa.U());E.h(0);Q.Oa(2);za.ka.U();R.o();C.set("s1");A||f?E.h(0):P.h(0);Z.l(!0,!T.da);za.ka.add();return R},kl:function(y,P){if(!m)return!1;C.set("s81");C.G("u101",y*B);F.h(1);Ua.ye(2);E?E.h(3):
P.h(3);return!0},v:function(){d=!1;q=e=0;n=w=l=-1;t=1;r=null;v=!1;D=null;A=g=f=x=G=z=!1;za.ka.v();za.Ma.v()}};return M}(),xa=function(){function a(){n.forEach(function(J){J.nl(R)})}function c(){n.forEach(function(J){J.fd(R)})}function d(){n.forEach(function(J){J.ll(R)})}function e(){n.forEach(function(J){J.gd(R)})}function q(){R?Ua.ml(n):n.forEach(function(J){J.il()})}function l(){m&&clearTimeout(m);m=setTimeout(function(){h=!1;m=null},16)}function w(J){J()}var n=[],t=[],r={fa:!1,position:!1,sb:!1},
v=[],D=[],z=null,G=0,x=null,f=null,g=null,A=null,K=!1,k=!1,p=!1,h=!1,H=!1,I=!1,F=null,B=null,m=null,u=null,E=!1,R=!1,Q=!1,ea=!1,fa=!0,ka=!1,O=!1,M=!1,y=!1,P={m:function(){b.enable(b.DEPTH_TEST);b.depthFunc(b.LEQUAL);b.clearDepth(1);T.Rk?(b.enable(b.CULL_FACE),b.frontFace("CCW"===T.Sk?b.CCW:b.CW),b.cullFace(b.BACK)):b.disable(b.CULL_FACE);P.ih();var J={isPot:!1,isLinear:!1,width:ca.qb(),height:ca.pb(),F:4,isFloat:!1};x=aa.instance(J);J=Object.assign({},J,{isLinear:!0,width:ca.M(),height:ca.X()});f=
aa.instance(J);g=aa.instance(J);T.Ja&&(J=Object.assign({},J,{isLinear:!1}),A=aa.instance(J));I=Ea.ea();T.Ja||(z=dc.instance({Db:T.Db,rc:T.rc,sc:T.sc,qc:T.qc}));K=!0},ih:function(){ca.Y()?r=pc.instance({}):(r.fa=Hb.instance({cc:T.Ja?!1:"s93",isFloat:!1,Pb:!0,clearColor:[0,0,0,0],F:4}),r.position=Hb.instance({cc:T.Ja?!1:"s103",isFloat:!0,Pb:!0,clearColor:[0,0,0,0],F:4}),r.sb=Hb.instance({cc:!1,isFloat:!0,Pb:!0,clearColor:[0,0,0,0],F:4}),r.Fc=Hb.instance({cc:!1,isFloat:!1,Pb:!0,clearColor:[0,0,0,0],
F:4}))},Il:function(){return z},ra:function(J){z=J},uq:function(){},wb:function(J){Ua.wb(J)},$i:function(J){Ua.m(J,v);ca.Y()||(r.fa.jj(!1),r.position.jj("s96"));R=ea=!0},aq:function(){Ua.Ui()},To:function(J){Ua.Uj(J)},Cn:function(J,U,ta){Ua.Za(J,U,ta)},Dn:function(J,U,ta){Ua.$a(J,U,ta)},An:function(J,U){Ua.fj(J,U)},Bn:function(J){Ua.On(J)},En:function(J){Ua.ij(J)},Ya:function(J){Ua.Ya(J)},aj:function(J,U,ta,ja){Ua.Vn(J,U,ta,ja);U&&P.hg(U,ja?!0:!1);Q=!0},xg:function(J){Ua.xg(J)},jg:function(J){Ua.jg(J)},
wg:function(J){Ua.wg(J)},pj:function(J){Ua.pj(J)},Uo:function(J){E&&(O=!0,M=aa.instance({width:u.M(),height:u.X(),isPot:!1}),y=J)},hg:function(J,U){u="string"===typeof J?aa.instance({url:J,isFloat:!1}):J;R&&Ua.hg(u,U);E=!0},Tj:function(J){n.push(J);0!==v.length&&(v.forEach(function(U){U(J)}),v.splice(0,v.length))},mn:function(J){J=n.indexOf(J);-1!==J&&n.splice(J,1)},Vo:function(J){t.push(J)},Yp:function(J){J=t.indexOf(J);-1!==J&&t.splice(J,1)},$d:function(J){R&&(k=J)},animate:function(J){!T.Ja||R&&
Q?k&&(h||G>T.Om&&H?(F&&clearTimeout(F),++G,window.cancelAnimationFrame(P.animate),F=setTimeout(function(){window.requestAnimationFrame(P.animate)},16)):(P.Pi(J),++G,R||k&&window.requestAnimationFrame(P.animate))):setTimeout(P.animate,100)},Xo:function(J){D.push(J)},Pi:function(J){if((!T.Ja||R&&Q)&&K){D.forEach(w);ca.Y()?r.set()||ca.ia()?(R||uc.on(),q(),r.H(),I&&b.depthMask(!1)):(ca.oo(),P.ih(),Hb.Vc(),C.Qn(),T.Ja&&Ua.Ui(),b.flush(),window.requestAnimationFrame(P.animate)):(R&&Ua.ye(1),r.fa.set(!0,
!0,!0),c(),r.fa.H(),I&&b.depthMask(!1),r.Fc.set(!1,!I,!1),d(),r.Fc.H(),r.position.set(!0,!I,!1),nb.U(),a(),r.position.H(),r.sb.set(!1,!I,!1),e(),r.sb.H());b.disable(b.DEPTH_TEST);I||b.depthMask(!1);T.da&&yb.U();var U=P.Eh();null!==U&&(U.h(7),C.set(T.da?"s82":"s83"),C.O("u10",1/ca.qb(),1/ca.pb()),Hb.vk(),x.N(),ka?(b.enable(b.BLEND),b.clearColor(0,0,0,0),b.clear(b.COLOR_BUFFER_BIT),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),C.G("u120",1)):b.disable(b.BLEND),R||nb.Se(),r.position.h(0),r.sb.h(1),r.fa.h(2),
z.Yc(3),r.Fc.h(6),z.Zc(4),z.mh(),T.da&&yb.h(5),Z.l(!0,!0),ka&&C.G("u120",0),Ba.ba(),ka?(b.disable(b.BLEND),C.set("s106"),g.N(),x.h(0),Z.l(!1,!1),f.o(),g.h(0),Z.l(!1,!1),f.h(0)):(Ua.jl(x,f)||(C.set("s1"),f.N(),x.h(0),Z.l(!1,!1)),fa?(C.set("s71"),g.N(),f.h(0),Z.l(!1,!1),f.o(),g.h(0),ea&&R?(C.set("s70"),A.h(1),Ua.ye(2),Z.l(!1,!1),C.set("s1"),A.N(),f.h(0),Z.l(!1,!1)):(C.set("s69"),Z.l(!1,!1),f.h(0))):f.h(0)),Ba.$(),b.viewport(0,0,ca.M(),ca.X()),!ka&&R&&Ua.kl(J,U)||C.set("s1"),Z.l(!1,!1),b.enable(b.DEPTH_TEST),
b.depthMask(!0),b.flush())}},Eh:function(){if(!E||ka)return aa.Qh();if(!R)return u;if(O&&!Ua.zm()){C.set(y);Ba.ba();M.Mc();M.o();u.h(0);var J=M;Z.l(!0,!0)}else J=u;return Ua.fl(J)},ho:function(){T.Xk||k||(k=!0,P.animate(Date.now()),p||qc.io(),p||Pb.lc(!1),B&&clearTimeout(B),T.da&&yb.Sd(),B=setTimeout(P.sa,T.rk),p||ca.bm(),p=!0)},rq:function(){k&&(H=k=!1,cancelAnimationFrame(P.animate))},sa:function(){H||!p||h||T.kh||(H=h=!0,B&&clearTimeout(B),m&&clearTimeout(m),nb.Ye().Ri(),B=setTimeout(function(){ca.Kg(T.Sm);
T.da&&yb.Dj();G=0;l()},24))},wake:function(){H&&p&&!h&&(h=!0,H=!1,G=0,nb.Ye().Ri(),B&&clearTimeout(B),m&&clearTimeout(m),B=setTimeout(function(){ca.Kg(1);T.da&&yb.Sd();l()},16))},Gp:function(){},mp:function(){},Zd:function(J){ea=J},tq:function(J){fa=J},rj:function(J){ka=J},yq:function(){C.j("s83",[{type:"1f",name:"u118",value:T.Ic},{type:"1f",name:"u119",value:T.Xf}])},resize:function(J,U,ta){x.resize(J*ta,U*ta);f.resize(J,U);g.resize(J,U);T.Ja&&A.resize(J,U);Ua.resize(J,U,ta);J=[{type:"2f",name:"u10",
value:[1/J,1/U]}];C.j("s71",J);C.j("s69",J)},L:function(){F&&clearTimeout(F);B&&clearTimeout(B);m&&clearTimeout(m);n.concat(t).forEach(function(J){J.L()});n.splice(0,n.length);t.splice(0,t.length);r.fa.remove();r.sb.remove();r.Fc.remove();r.position.remove();x.remove();f.remove();g.remove();A&&A.remove();h=!0},v:function(){P.L();I=H=h=p=k=R=Q=h=!1}};return P}(),za={},ca=function(){function a(){Hb.resize(d*t,e*t);x.Y()&&pc.resize(d*t,e*t);xa.resize(d,e,t);T.da&&yb.resize(d*t,e*t,t);x.Ig()}var c=null,
d=0,e=0,q=-1,l=!1,w={be:!1,Ag:!1,Aj:!1,tg:!1,drawBuffers:!1,sm:!1,gi:!1,um:!1,Cc:!1,Ua:!1},n=Object.assign({},w),t=1,r=!1,v=!1,D=!1,z=!1,G=!1,x={m:function(f){void 0!==f.onload&&f.onload&&(v=f.onload);void 0===f.expand&&(f.expand=!1);void 0===f.xd&&(f.xd=!1);void 0===f.oa&&(f.oa=!1);void 0===f.Lb&&(f.Lb=!1);void 0===f.alpha&&(f.alpha=!1);void 0===f.preserveDrawingBuffer&&(f.preserveDrawingBuffer=!1);f.xd&&(l=!0);c=f.oa?f.oa:document.getElementById(f.Kk);f.expand&&x.expand();try{window.Qo=f.Lb?f.Lb.wl():
c.getContext("webgl",{antialias:!1,alpha:f.alpha,depth:!0,premultipliedAlpha:!1,stencil:!1,preserveDrawingBuffer:f.preserveDrawingBuffer});z=f.Lb?f.Lb.ia():!1;D=!z;8>b.getParameter(b.MAX_TEXTURE_IMAGE_UNITS)&&x.cd("too few texture image units");if(!Ea.m())return x.cd("invalid config");T.wo&&(n.Ag=b.getExtension("EXT_texture_filter_anisotropic"),n.Ag&&(n.gi=!0));T.xo&&(n.be=b.getExtension("WEBGL_compressed_texture_s3tc"),n.be&&void 0!==n.be.COMPRESSED_RGBA_S3TC_DXT5_EXT&&n.be.COMPRESSED_RGBA_S3TC_DXT5_EXT&&
(n.sm=!0));D&&(n.Aj=b.getExtension("OES_element_index_uint")||b.getExtension("MOZ_OES_element_index_uint")||b.getExtension("WEBKIT_OES_element_index_uint"),n.Aj&&(n.um=!0));!z&&T.yo&&(n.tg=b.getExtension("EXT_sRGB"),n.tg&&(n.Cc=!0));D?(n.drawBuffers=b.getExtension("WEBGL_draw_buffers"),n.drawBuffers&&!T.jh&&(n.Ua=!0)):n.Ua=4<=b.getParameter(b.MAX_DRAW_BUFFERS);if(n.Ua){var g=x.Zk();n.Ua=n.Ua&&g}}catch(A){return x.cd(A)}if(null===b||!b)return x.cd("NO_GL");f.expand&&window.addEventListener("resize",
x.expand,!1);c.addEventListener("contextmenu",function(A){A.preventDefault();return!1},!1);d=c.width;e=c.height;x.rf();return!0},rf:function(){q=l?3:2;Ea.ea()||(q=Math.min(q,1));Ea.Gk()||(q=Math.min(q,0));zc.m();Hb.m();for(var f in za)za[f].Jc();C.m();nb.m();Pb.m();xa.m();qc.m();T.da&&yb.m();"undefined"!==typeof FPSCounter&&FPSCounter.m();x.Ig();x.al();r=!0;v&&v();return!0},al:function(){if(n.Ua){var f=pc.instance({width:256,height:1});f.bind();b.viewport(0,0,256,1);C.set("s91");C.xa("color",[1,0,
0,1]);Z.l(!0,!0);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT||b.DEPTH_BUFFER_BIT);Ba.$();C.set("s1");f.sb.h(0);Z.l(!1,!1);f=new Uint8Array(1024);b.readPixels(0,0,256,1,b.RGBA,b.UNSIGNED_BYTE,f);G=1>=f[1020]}},Zk:function(){var f=pc.instance({width:1,height:1});if(!f.set())return f.remove(),!1;C.Tn(b);Z.Jb(b);b.bindFramebuffer(b.FRAMEBUFFER,null);C.ub(b);f.fa.Oa(0);Z.Jb(b);var g=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,g);f.remove();return 3<Math.abs(g[0]-127)?!1:!0},ia:function(){return z},
M:function(){return d},X:function(){return e},qb:function(){return t*x.M()},pb:function(){return t*x.X()},xl:function(){return d/e},T:function(){return q},xm:function(){return 3===q},ji:function(){return G},Y:function(){return n.Ua},oo:function(){n.Ua=!1},Op:function(){return!1},Ik:function(){return 0<x.T()},cp:function(){return x.Y()&&0<x.T()},Xe:function(f){var g=b,A="";z||(g=n.drawBuffers,A="_WEBGL");return[g["COLOR_ATTACHMENT0"+A],g["COLOR_ATTACHMENT1"+A],g["COLOR_ATTACHMENT2"+A],g["COLOR_ATTACHMENT3"+
A]].splice(0,f)},pd:function(f){return x.Xe(4)[f]},Wl:function(){return z?b.SRGB?b.SRGB:b.RGBA:n.Cc?n.tg.SRGB_ALPHA_EXT:b.RGBA},vm:function(){return n.gi},Cl:function(){return n.Ag},Jm:function(f){x.ia()?b.drawBuffers(x.Xe(f)):n.drawBuffers.drawBuffersWEBGL(x.Xe(f))},expand:function(){xa.wake();x.resize(window.innerWidth,window.innerHeight);xa.sa()},resize:function(f,g){!c||f===d&&g===e||(d=f,e=g,c.width=d,c.height=e,r&&(nb.resize(),a()))},Ig:function(){var f=[{type:"2f",name:"u10",value:[1/ca.qb(),
1/ca.pb()]}];C.j("s71",f);C.j("s69",f)},Kg:function(f){t=f;a()},Ea:function(f,g){c.addEventListener(f,g,!1)},cd:function(){q=-1;return!1},dh:function(){return 0<=q},Rp:function(){},bq:function(){},pq:function(){var f=document.getElementById("loading");f&&(f.style.display="block")},bm:function(){var f=document.getElementById("loading");f&&(f.style.display="none")},L:function(){x.dh()&&(aa.Bj(),xa.L(),Z.L(),Hb.L(),T.da&&yb.L(),dc.L(),qc.L(),C.L(),aa.L(),b.flush(),b=null)},v:function(){xa.v();Ua.v();
C.v();Object.assign(n,w);r=!1}};return x}(),nb=function(){var a=!1,c=!1,d=[];return{m:function(){},instance:function(e){void 0===e.Si&&(e.Si=!0);void 0===e.pe&&(e.pe=.1);void 0===e.oe&&(e.oe=100);void 0===e.direction&&(e.direction=[0,0,-1]);void 0===e.Kb&&(e.Kb=45);var q=new Xb,l=new Sa(50,-50,-400),w=null;q.setPosition(l);var n=new Int8Array(20),t=new Int8Array(20),r=0,v=0,D=0,z=0,G={U:function(){t[C.qd()]||(C.Lc("u121",q.elements),t[C.qd()]=1);n[C.qd()]||(C.Lc("u133",w),n[C.qd()]=1)},Re:function(){v||
(C.Lc("u121",q.elements),v=1);r||(C.O("u122",w[0],w[5]),r=1)},Se:function(){D||(C.pg("u110",l.x,l.y,l.z),D=1)},Gb:function(){z||(C.pg("u151",l.x,l.y,l.z),z=1)},fh:function(){var x=e.pe,f=e.oe,g=Math.tan(.5*e.Kb*Math.PI/180);w=[.5/g,0,0,0,0,.5*ca.xl()/g,0,0,0,0,-(f+x)/(f-x),-1,0,0,-2*f*x/(f-x),0];for(x=0;20>x;++x)n[x]=0;r=0},Pn:function(x,f){l.Yi(f[0]).Zi(f[1]).z=f[2];q.elements.set(x);for(x=0;20>x;++x)t[x]=0;z=D=v=0},Ri:function(){for(var x=z=D=0;20>x;++x)t[x]=0}};G.fh();a=G;c=!0;e.Si&&d.push(G);
return G},U:function(){c&&a.U()},Re:function(){c&&a.Re()},Se:function(){c&&a.Se()},Gb:function(){c&&a.Gb()},resize:function(){d.forEach(function(e){e.fh()})},Ye:function(){return a}}}(),Hb=function(){var a=[],c=null;return{m:function(){c=Ba.instance({width:ca.qb(),height:ca.pb(),Ac:!ca.Y()})},instance:function(d){void 0===d.width&&(d.width=ca.qb());void 0===d.height&&(d.height=ca.pb());void 0===d.isFloat&&(d.isFloat=!1);void 0===d.Pb&&(d.Pb=!1);void 0===d.clearColor&&(d.clearColor=[0,0,0,0]);void 0===
d.F&&(d.F=4);var e=aa.instance({isFloat:d.isFloat&&Ea.ea(),S:d.isFloat,width:d.width,height:d.height,isPot:!1,isLinear:!1,F:d.F}),q=void 0!==d.cc&&d.cc?!0:!1,l=d.cc,w={set:function(n,t,r){r&&c.bind(!1,r);e.o();n&&(b.clearColor(d.clearColor[0],d.clearColor[1],d.clearColor[2],d.clearColor[3]),c.Ee());t&&c.eh();q&&C.set(l)},jj:function(n){q=(l=n)?!0:!1},H:function(){e.de()},h:function(n){e.h(n)},resize:function(n,t){e.resize(n,t)},debug:function(){e.debug()},remove:function(){e.remove()}};d.Pb&&a.push(w);
return w},resize:function(d,e){c.resize(d,e);a.forEach(function(q){q.resize(d,e)})},vk:function(){c.Xg()},Vc:function(){c.Vc()},Mc:function(){c.Mc()},gp:function(){c.eh()},fp:function(){c.Ee()},ep:function(){c.clear()},L:function(){c.remove()}}}(),pc=function(){var a=[];return{instance:function(c){void 0===c.width&&(c.width=ca.qb());void 0===c.height&&(c.height=ca.pb());var d=b.createFramebuffer(),e=c.width,q=c.height,l=!0;c={isFloat:Ea.ea(),S:!0,width:e,height:q,isPot:!1,isLinear:!1,F:4};var w=aa.instance(c),
n=aa.instance(c),t=aa.instance(c),r=aa.instance(c),v=Ba.Dl(),D=Ba.Jh();b.bindFramebuffer(v,d);var z=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,z);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,e,q);b.framebufferRenderbuffer(v,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,z);b.clearDepth(1);b.framebufferTexture2D(v,ca.pd(0),b.TEXTURE_2D,w.get(),0);b.framebufferTexture2D(v,ca.pd(1),b.TEXTURE_2D,n.get(),0);b.framebufferTexture2D(v,ca.pd(2),b.TEXTURE_2D,r.get(),0);b.framebufferTexture2D(v,
ca.pd(3),b.TEXTURE_2D,t.get(),0);ca.Jm(4);b.bindFramebuffer(v,null);Ba.reset();var G={position:w,sb:n,Fc:t,fa:r,bind:function(){b.bindFramebuffer(v,d);Ba.reset()},set:function(){l&&b.checkFramebufferStatus(D);b.bindFramebuffer(v,d);Ba.reset();if(l){if(b.checkFramebufferStatus(D)!==b.FRAMEBUFFER_COMPLETE)return!1;l=!1}b.viewport(0,0,e,q);b.clearColor(0,0,0,0);C.Tb()&&!ca.ji()&&(C.set("s90"),Z.l(!1,!1));b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);return!0},H:function(){},resize:function(x,f){e=x;
q=f;w.resize(x,f);n.resize(x,f);r.resize(x,f);t.resize(x,f);b.bindRenderbuffer(b.RENDERBUFFER,z);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,e,q);b.bindRenderbuffer(b.RENDERBUFFER,null)},remove:function(){w.remove();n.remove();r.remove();t.remove();b.deleteRenderbuffer(z);b.deleteFramebuffer(d);var x=a.indexOf(G);-1!==x&&a.splice(x,1)}};a.push(G);return G},resize:function(c,d){a.forEach(function(e){e.resize(c,d)})}}}(),dc=function(){var a=[],c=T.Wg;return{instance:function(d){function e(){t?
q():(g=pd.instance({ja:D,rm:c}),n=T.sk[ca.T()],z=aa.instance({isFloat:Ea.ea(),S:!0,isPot:!0,isLinear:!1,Nb:!0,width:n,height:n/2,F:3}),G=aa.instance({isFloat:Ea.ea(),S:!0,isPot:!0,isLinear:!1,Nb:!0,width:n,height:n/2,F:3}),x=aa.instance({isFloat:Ea.ea(),S:!0,isPot:!0,width:1,height:n/2,F:3}),f=aa.instance({isFloat:Ea.ea()&&!c,S:!c,isPot:!1,isLinear:!0,Nb:!0,isMipmap:!1,width:n,height:n/2,F:c?4:3}),t=!0,q(),K.forEach(function(k){k()}),K.splice(0,K.length))}function q(){if(t){Ba.ba();g.kn();z.N();C.set("s73");
D.h(0);C.G("u88",T.Ic);aa.Ak(1);Z.l(!0,!0);for(var k=T.im[ca.T()],p=0;p<k;++p)G.o(),C.set("s76"),C.O("u10",1/n,0),z.h(0),Z.l(!1,!1),z.o(),C.O("u10",0,2/n),G.h(0),Z.l(!1,!1);x.N();C.set("s78");z.h(0);Z.l(!1,!1);C.set(c?"s80":"s79");f.N();z.h(0);x.h(1);Z.l(!1,!1);aa.$(0);aa.$(1)}}var l=Object.assign({Db:null,rc:null,qc:0,sc:0},d),w=0,n=0,t=!1,r=null,v=null,D=null,z=null,G=null,x=null,f=null,g=null,A=0,K=[];d={m:function(){function k(){2===++p&&(D=aa.instance({isFloat:Ea.ea(),S:!0,isPot:!1,isMipmap:!1,
isLinear:!1,Nb:!0,width:w,height:w/2,F:3}),Ba.ba(),D.N(),C.set("s72"),C.G("u93",l.sc),C.G("u94",l.qc),r.h(0),v.h(1),Z.l(!0,!0),e())}var p=0;w=T.tk[ca.T()];A=Math.log2(w)-1;l.Db&&(r=aa.instance({isPot:!1,url:l.Db,J:k,F:3,isFlipY:!1}),v=aa.instance({isPot:!1,url:l.rc,J:k,F:3,isFlipY:!1}))},gj:function(k){D=k;e()},Yc:function(k){t&&(g.h(k),C.G("u111",g.M()))},Zc:function(k){t&&f.h(k)},mh:function(){C.G("u3",A)},Fh:function(){return A},M:function(){return w},Fb:function(k){t?k():K.push(k)},L:function(){r&&
r.remove();v&&v.remove();z.remove();x.remove();G.remove();g.remove();f.remove();D.remove()}};a.push(d);d.m();return d},L:function(){a.forEach(function(d){d.L()})}}}(),Zc={instance:function(a){var c=a.Dm,d=a.Bm,e=0,q=c.M();a=T.Wg;var l=aa.instance({isFloat:Ea.ea()&&!a,S:!a,isLinear:!0,isMipmap:!1,isPot:!1,width:q,F:a?4:3,isFlipY:!1}),w=aa.instance({isFloat:Ea.ea()&&!a,S:!a,isPot:!1,isLinear:!0,Nb:!0,isMipmap:!1,width:q,height:q/2,F:a?4:3}),n=Ba.instance({width:q,height:q}),t=a?"s66":"s65";return{Un:function(r){e=
r;C.set(t);b.viewport(0,0,q,q);n.o();l.o();C.G("u9",e);c.Yc(1);d.Yc(0);Z.l(!0,!0);b.viewport(0,0,q,q/2);w.o();c.Zc(1);d.Zc(0);Z.l(!1,!1);b.flush()},Yc:function(r){l.h(r)},Zc:function(r){w.h(r)},mh:function(){C.G("u3",c.Fh()*(1-e)+d.Fh()*e)}}}},Pb=function(){function a(u){var E=(h-T.Ce)/(T.$g-T.Ce);E=1-Math.pow(1-E,T.Oo);h+=u*(1+E*T.Po);h=Math.min(Math.max(h,T.Ce),T.$g);m.lc()}function c(u){-1!==n&&(A=g=0,w(),a(T.No*u.deltaY/window.innerHeight),u.preventDefault())}function d(){k+=g;p+=A;p=Math.min(Math.max(p,
T.Wm),T.Vm);m.lc()}function e(u){if(0===n||-1===n)return!1;var E=void 0!==u.touches&&u.touches.length;u.preventDefault();if(2===n){var R=Qc(u.touches[0].pageX,u.touches[0].pageY,u.touches[1].pageX,u.touches[1].pageY);a(-(x-R)*T.Xm);x=R}else R=E?u.touches[0].clientX:u.clientX,u=E?u.touches[0].clientY:u.clientY,g=2*(R-z)*Math.PI/ca.M(),A=2*(u-G)*Math.PI/ca.X(),4===n?(B[0]+=g*T.Ei,B[1]-=A*T.Ei,B[0]=Math.min(Math.max(B[0],-T.Hi),T.Hi),B[1]=Math.min(Math.max(B[1],-T.Ii),T.Ii),m.lc()):d(),z=R,G=u}function q(){0!==
n&&-1!==n&&(0===g&&0===A||1!==n||!I?xa.sa():(w(),f=Date.now(),H=setInterval(m.Am,K)),n=0)}function l(u){if(2!==n&&-1!==n){A=g=0;w();xa.wake();var E=void 0!==u.changedTouches&&u.touches.length;u.preventDefault();E&&2===u.touches.length?(n=2,x=Qc(u.touches[0].pageX,u.touches[0].pageY,u.touches[1].pageX,u.touches[1].pageY)):(n=E||2!==u.button?1:4,z=E?u.touches[0].clientX:u.clientX,G=E?u.touches[0].clientY:u.clientY);return!1}}function w(){H&&(clearInterval(H),H=!1)}var n=0,t=!1,r=!1,v=!1,D=1,z=0,G=0,
x=0,f=0,g=0,A=0,K=16,k=T.vj,p=T.Gi,h=T.Be,H=!1,I=0,F=new Float32Array([0,0,0,0,0]),B=[T.Ek,T.Fk],m={m:function(){I=T.Wj[ca.T()];K=T.hd[ca.T()];ca.Ea("mousedown",l);ca.Ea("mouseup",q);ca.Ea("mouseout",q);ca.Ea("mousemove",e);ca.Ea("mousemove",e);ca.Ea("wheel",c);ca.Ea("touchstart",l);ca.Ea("touchend",q);ca.Ea("touchmove",e)},lc:function(u){t?(r[0]=-p,r[1]=k,v[1].value=D/T.Be*h,Ua.vb(v)):(F[0]=k,F[1]=p,F[2]=h,F[3]=B[0],F[4]=B[1],qc.yn(F,u))},Am:function(){if(1E-4>g&&1E-4>A||-1===n)w(),A=g=0,0===n&&
xa.sa();var u=Date.now(),E=u-f;f=u;u=Math.pow(I,E/K);g*=u;A*=u;d()},Te:function(u){t||(t=!0,n=-1,r=[0,0,0],v=[{name:"u79",type:"3f",value:r},{name:"u83",type:"1f",value:1}],D=u)},qj:function(u){-1===n&&u&&(n=0);u||(n=-1)},rn:function(){A=g=0;k=T.vj;p=T.Gi;h=T.Be;m.lc()},hq:function(u){h=u},iq:function(u){B[0]=u[0];B[1]=u[1];T.ah=u[2]},gq:function(u,E){k=u;p=E}};return m}(),uc=function(){var a={s92:!1,s92color:!1,s92NormalMap:!1,s92ParamsMap:!1,s92NormalParamsMap:!1};return{instance:function(c){function d(M){if(O){M.tweaker&&
window.JEELIZVTO&&"undefined"!==typeof S&&S.Vg(M.tweaker);B=M.partsNames||[];F.splice(0,F.length);F.push({n:0,offset:0});h.min.set(Infinity,Infinity,Infinity);h.max.set(-Infinity,-Infinity,-Infinity);var y=M.uvs;y&&(y=y.filter(function(pa){return pa}));fa=y&&0<y.length&&0<y[0].length?!0:!1;"undefined"!==typeof vb&&"string"===typeof M.faces&&(M.faces=vb(M.faces));"undefined"!==typeof rb&&("string"===typeof M.vertices&&(M.vertices=rb(M.vertices)),y&&y.length&&y.forEach(function(pa,qa){"string"===typeof pa&&
(y[qa]=rb(pa))}));var P=M.metadata.faces,J=1+(fa?1:0);P=(M.faces.length-P)/(M.metadata.faces*J);6!==P&&8!==P||fa||(++J,P/=2);if(4===P){P=6*J+2;for(var U=4*J+1,ta=Array(M.metadata.faces*P),ja=0;ja<M.metadata.faces;++ja)for(var ua=0;ua<J;++ua)ta[ja*P+4*ua]=M.faces[ja*U+5*ua],ta[ja*P+4*ua+1]=M.faces[ja*U+5*ua+1],ta[ja*P+4*ua+2]=M.faces[ja*U+5*ua+2],0===ua&&(ta[ja*P+3]=M.faces[ja*U+4]),ta[ja*P+4*ua+3*J+1]=M.faces[ja*U+5*ua],ta[ja*P+4*ua+3*J+2]=M.faces[ja*U+5*ua+2],ta[ja*P+4*ua+3*J+3]=M.faces[ja*U+5*ua+
3],0===ua&&(ta[ja*P+3*J+4]=M.faces[ja*U+4]);M.faces=ta;M.metadata.faces*=2}z=Array(M.metadata.vertices);for(P=0;P<M.metadata.vertices;++P)z[P]=new Sa(M.vertices[3*P],M.vertices[3*P+1],M.vertices[3*P+2]),dd(h,z[P]);G=Array(M.metadata.faces);J=3*J+1;for(P=0;P<M.metadata.faces;++P)G[P]=new wc(M.faces[J*P],M.faces[J*P+1],M.faces[J*P+2]),G[P].Vb=M.faces[J*P+3];u=3<z.length;O&&(O.visible=u);fd(z,G);x=gd(z,G);if(fa){J=Array(z.length);P=["a","b","c"];for(U=0;U<M.metadata.faces;++U)for(ta=0;3>ta;++ta)if(ja=
M.faces[7*U+ta],ua=M.faces[7*U+1+ta+3],"undefined"===typeof J[ja])J[ja]=[[ja,ua]];else if(J[ja][0][1]!==ua){for(var Pa=-1,na=1;na<J[ja].length;++na)if(J[ja][na][1]===ua){Pa=J[ja][na][0];break}na=-1;-1===Pa?(na=z.length,z.push(z[ja].clone()),x.push(x[ja].clone()),J[ja].push([na,ua]),J[na]=[[na,ua]]):na=Pa;M.faces[7*U+ta]=na;G[U][P[ta]]=na}f=Array(z.length);for(M=0;M<z.length;++M)P="undefined"===typeof J[M]?M:J[M][0][1],f[M]=new Vb(y[0][2*P],y[0][2*P+1])}var Y=nc(h);c.Bb&&(z.forEach(function(pa){pa.x-=
Y.x;pa.z-=Y.z;pa.y-=h.min.y}),h.min.x-=Y.x,h.max.x-=Y.x,h.min.z-=Y.z,h.max.z-=Y.z,h.max.y-=h.min.y,h.min.y=0);if(c.Cb){var ha=T.qk/Math.max(h.max.x-h.min.x,h.max.y-h.min.y,h.max.z-h.min.z);z.forEach(function(pa){pa.Aa(ha)});h.min.Aa(ha);h.max.Aa(ha)}M=fa?8:6;J=new Float32Array(z.length*M);for(P=0;P<z.length;++P)J[M*P]=z[P].x,J[M*P+1]=z[P].y,J[M*P+2]=z[P].z,J[M*P+3]=x[P].x,J[M*P+4]=x[P].y,J[M*P+5]=x[P].z,fa&&(J[M*P+6]=f[P].x,J[M*P+7]=f[P].y);G.sort(function(pa,qa){return pa.Vb-qa.Vb});var X=new (65536>
3*G.length?Uint16Array:Uint32Array)(3*G.length),oa=0;G.forEach(function(pa,qa){pa.Vb===oa?F[oa].n+=3:(F.push({n:3,offset:3*qa}),++oa);X[3*qa]=pa.a;X[3*qa+1]=pa.b;X[3*qa+2]=pa.c});g&&g.remove();g=Z.instance({ga_:J,indices:X});k=K=!1;ea&&O.gh();E=!0;O.Qe();c.J&&(c.J(O),c.J=null)}}function e(M){g.Fa(M.n,M.offset)}function q(M,y){Q[y]&&(C.set(Q[y].Rl()),g.bind(!1),fa?(C.La(),C.dj()):(C.Xa(),C.ej()),Q[y].Dc()&&(C.Kc(),K.tc(!1),C.Rd(),nb.Gb()),Q[y].dl(),Q[y].gd(),g.Fa(M.n,M.offset))}function l(M,y){Q[y]&&
(C.set(Q[y].Sl()),g.bind(!1),fa?(C.La(),C.dj()):(C.Xa(),C.ej()),Q[y].Dc()&&(C.Kc(),K.tc(!1),C.Rd(),nb.Gb()),O.yc(),Q[y].gd(),g.Fa(M.n,M.offset))}function w(M,y){ka&&Q[y]&&(Q[y].el(),g.Fa(M.n,M.offset))}function n(M,y){ka&&Q[y]&&(Q[y].gl(fa),g.Fa(M.n,M.offset))}function t(M,y){Q[y]&&(C.set(Q[y].Nl()),Q[y].rh(),g.Fa(M.n,M.offset))}function r(M,y){Q[y]&&(C.set(Q[y].Ol()),O.yc(),Q[y].rh(),g.Fa(M.n,M.offset))}function v(M,y){Q[y]&&(C.set(Q[y].Pl()),Q[y].Dc()&&(K.tc(!1),C.Rd(),nb.Gb()),g.bind(!1),Q[y].oh(fa),
g.Fa(M.n,M.offset))}function D(M,y){if(Q[y]){var P=Q[y].Ql();C.set(P);Q[y].Dc()&&(K.tc(!1),C.Rd(),nb.Gb(),g.bind(!1));a[P]||(O.yc(),g.bind(!1),a[P]=!0);Q[y].oh(fa);g.Fa(M.n,M.offset)}}if(!ca.dh())return!1;void 0===c.Bb&&(c.Bb=!1);void 0===c.Cb&&(c.Cb=!1);void 0===c.Zg&&(c.Zg=!1);var z=null,G=null,x=null,f=null,g=null,A=null,K=null,k=!1,p=new Xb,h=new vc,H=[],I=null,F=[{n:0,offset:0}],B=[],m=[],u=!1,E=!1,R=[],Q=[],ea=!1,fa=!1,ka=!1,O={visible:u,Pk:function(){return F.length},Ll:function(){return B},
gh:function(){!k&&fa&&(G=G.filter(function(M){return null!==M}),A=hd(z,x,f,G),K=Z.instance({ga_:A,indices:!1}),f=x=G=z=A=null,k=!0)},yc:function(){nb.U();O.qh()},qh:function(){C.Lc("u134",p.elements)},np:function(){u&&(O.qh(),g.bind(!1),fa?C.La():C.Xa(),g.U())},nl:function(M){u&&(M||O.yc(),g.bind(!1),fa?C.La():C.Xa(),g.U())},ol:function(){u&&(g.bind(!1),fa?C.La():C.Xa(),F.forEach(w))},nh:function(){u&&(g.bind(!1),fa?C.La():C.Xa(),m.forEach(e))},ll:function(M){ka&&u&&(g.bind(!1),fa?C.La():C.Xa(),M?
F.forEach(t):F.forEach(r))},fd:function(M){u&&(M||O.yc(),g.bind(!1),M||(C.La(),C.Kc()),ka&&F.forEach(n))},gd:function(M){ka&&u&&(M?F.forEach(q):F.forEach(l))},il:function(){ka&&u&&F.forEach(D)},hl:function(){ka&&u&&F.forEach(v)},Oh:function(){return I},Mh:function(){return R},uo:function(M,y){Q[M].update(y);O.Fj()},kg:function(M,y){function P(ja,ua){ja&&(ja.J=function(){O&&(++ta<U||J())},ja=zc.instance(ja),Q[ua]&&Q[ua].L(),Q[ua]=ja,ea=ea||ja.Dc())}function J(){ka=!0;ea&&O.Fb(O.gh,5);O.Qe();y&&O.Fb(function(){y(O)},
10)}R=M;ka=!1;var U=M.length,ta=0;Q=Array(U);ea=!1;M.forEach(function(ja,ua){"string"===typeof ja?xc(-1===ja.indexOf(".json")?ja+".json":ja,function(Pa){Pa.name=ja;P(Pa,ua,ja)}):P(ja,ua,!1)});O.Fb(function(){O.Fj();xa.wb(O);xa.$d(!0)},4)},Fj:function(){m.splice(0,m.length);F.forEach(function(M,y){Q[y]&&Q[y].ym()&&m.push(M)})},Fb:function(M,y){E&&ka?M(O):H.push({mb:M,order:y?y:0})},Qe:function(){E&&ka&&(H.sort(function(M,y){return 0>M.order-y.order?1:-1}),H.forEach(function(M){M.mb(O)}),H.splice(0,
H.length))},remove:function(){O.L();O=null},L:function(){u=E=!1;g&&g.remove();Q.forEach(function(M){M.L()});k&&K.remove()},Ul:function(){return h.size().x},Vl:function(){return h.size().y},Ep:function(){return h.size().z},zl:function(){return nc(h).x},Al:function(){return nc(h).y},sp:function(){return nc(h).z},Ap:function(){return h.min.y},replace:function(M,y,P){if(M===I)return y&&O&&(O.Qe(),y(O)),!1;I=M;xa.$d(!1);xc(M,function(J){d(J);y&&y(O)},P);return!0}};c.Gc&&O.kg(c.Gc,c.Zg);I=c.url;xc(c.url,
d);return O},on:function(){a.s92=!1;a.s92color=!1;a.s92NormalMap=!1;a.s92ParamsMap=!1;a.s92NormalParamsMap=!1}}}(),qc=function(){var a=null,c=!1,d=!1,e=null,q=new Float32Array(16),l=new Float32Array(3),w={data:0},n={m:function(){a=T.Hb?new Worker("js/worker.php"):{postMessage:function(t){w.data=t;Ac.Qm(w)},terminate:function(){}};a.onmessage=function(t){switch(t.data[0]){case 3:for(var r=0;16>r;++r)q[r]=t.data[r+1];for(r=0;3>r;++r)l[r]=t.data[r+17];nb.Ye().Pn(q,l);break;case 6:n.Jn(),c=!0,Pb.lc(!1),
T.da&&(yb.enable(),yb.Sd())}};e=new Float32Array(6);e[0]=2;T.Hb||Ac.Ln(a)},io:function(){T.lh||(d=!0)},sq:function(){d=!1},yn:function(t,r){if(r||c&&d)e[1]=t[0],e[2]=t[1],e[3]=t[2],e[4]=t[3],e[5]=t[4],a.postMessage(e)},Jn:function(){a.postMessage([5,T.ah])},L:function(){T.Hb&&a.terminate()}};return n}(),Ac=function(){var a=0,c=0,d=0,e=[0,0],q=new Xb,l=new mc,w=new mc,n=new Sa,t=new Sa,r=new Wb,v=0,D=new Float32Array(20);D[0]=3;var z=!1,G={data:!1},x={m:function(){"undefined"===typeof T&&(self.Ro=
{Hb:!0});T.Hb&&x.Yf([6])},Qm:function(f){switch(f.data[0]){case 2:x.lg(f.data);break;case 5:v=f.data[1]}},Yf:function(f){T.Hb?postMessage(f):(G.data=f,z.onmessage(G))},lg:function(f){a=f[1];c=f[2];d=f[3];e[0]=f[4];e[1]=f[5];n.set(e[0],e[1],-d);r.set(c,a,0,"XYZ");if(!1===r instanceof Wb)throw Error("JETHREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");f=Math.cos(r.B/2);var g=Math.cos(r.C/2),A=Math.cos(r.D/2),K=Math.sin(r.B/2),k=Math.sin(r.C/2),p=Math.sin(r.D/
2),h=r.order;"XYZ"===h?(l.B=K*g*A+f*k*p,l.C=f*k*A-K*g*p,l.D=f*g*p+K*k*A,l.P=f*g*A-K*k*p):"YXZ"===h?(l.B=K*g*A+f*k*p,l.C=f*k*A-K*g*p,l.D=f*g*p-K*k*A,l.P=f*g*A+K*k*p):"ZXY"===h?(l.B=K*g*A-f*k*p,l.C=f*k*A+K*g*p,l.D=f*g*p+K*k*A,l.P=f*g*A-K*k*p):"ZYX"===h?(l.B=K*g*A-f*k*p,l.C=f*k*A+K*g*p,l.D=f*g*p-K*k*A,l.P=f*g*A+K*k*p):"YZX"===h?(l.B=K*g*A+f*k*p,l.C=f*k*A+K*g*p,l.D=f*g*p-K*k*A,l.P=f*g*A-K*k*p):"XZY"===h&&(l.B=K*g*A-f*k*p,l.C=f*k*A-K*g*p,l.D=f*g*p+K*k*A,l.P=f*g*A+K*k*p);n.y-=v;f=q.elements;p=l.x;var H=
l.y,I=l.z;K=l.w;var F=p+p,B=H+H;k=I+I;g=p*F;A=p*B;p*=k;h=H*B;H*=k;I*=k;F*=K;B*=K;K*=k;f[0]=1-(h+I);f[4]=A-K;f[8]=p+B;f[1]=A+K;f[5]=1-(g+I);f[9]=H-F;f[2]=p-B;f[6]=H+F;f[10]=1-(g+h);f[3]=0;f[7]=0;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;q.setPosition(n);w.K(l).inverse();f=t.K(n);H=f.x;F=f.y;I=f.z;g=w.x;A=w.y;K=w.z;k=w.w;p=k*H+A*I-K*F;h=k*F+K*H-g*I;B=k*I+g*F-A*H;H=-g*H-A*F-K*I;f.x=p*k+H*-g+h*-K-B*-A;f.y=h*k+H*-A+B*-g-p*-K;f.z=B*k+H*-K+p*-A-h*-g;for(f=1;17>f;++f)D[f]=q.elements[f-1];D[17]=t.x;D[18]=t.y;
D[19]=t.z;x.Yf(D)},Ln:function(f){z=f;x.Yf([6])}};return x}();Ac.m();var zc=function(){function a(w){var n=w.split(":").shift();return"data"===n||"blob"===n?w:("undefined"!==typeof L&&L.aa?L:T).aa+T.xi+w}function c(w,n){return Math.min(n+w+n*w,1)}var d=!1,e=null,q=1,l={diffuseTexture:null,normalTexture:null,paramsTexture:null,colorTextureUsage:0,metalness:.5,roughness:.5,fresnelMin:0,fresnelMax:1,fresnelPow:5,alpha:1,diffuseColor:[255,255,255],paramsMapMask:[0,0,0,0],J:null};return{m:function(){e=
aa.instance({width:1,height:1,isMipmap:!1,F:4,array:new Uint8Array([255,255,255,255]),Cc:!1})},Te:function(){d=!0;q=2},instance:function(w){function n(m){function u(){++R===E&&m&&m()}var E=1,R=0;(r=G.normalTexture&&ca.Ik()?!0:!1)&&!g.Ka&&(++E,g.Ka=aa.instance({url:a(G.normalTexture),isLinear:!0,isMipmap:!0,ai:ca.xm(),isPot:!0,F:3,J:u}));(v=G.diffuseTexture&&""!==G.diffuseTexture?!0:!1)&&!g.fa?(++E,g.fa=aa.instance({url:a(G.diffuseTexture),isMipmap:!0,isLinear:!0,isPot:!0,ai:!0,Cc:!1,Nb:!1,om:!1,F:4,
J:u}),f="s97"):g.fa||(f="s98",g.fa=e);x=[G.diffuseColor[0]/255,G.diffuseColor[1]/255,G.diffuseColor[2]/255];(A=G.paramsTexture?!0:!1)&&!g.tb&&(G.paramsTexture===G.diffuseTexture?g.tb=g.fa:(++E,g.tb=aa.instance({url:a(G.paramsTexture),isMipmap:!0,isLinear:!0,isPot:!0,ai:!0,Cc:!1,Nb:!1,om:!1,F:4,J:u})));u()}function t(m){"number"===typeof G.alpha?(D[0]=G.alpha,D[1]=0,D[2]=0,D[3]=0):(D[0]=G.alpha[0],D[1]=G.alpha[1]-G.alpha[0],D[2]=G.alpha[2],D[3]=G.alpha[3]);var u=1<=G.fresnelPow?G.fresnelMin:G.fresnelMax;
z[0]=c(D[0],u);z[1]=c(D[1],u);z[2]=D[2];z[3]=D[3];K={Fi:G.fresnelMax,ti:[G.fresnelMin,G.roughness,G.fresnelPow/15,G.metalness],wi:G.paramsMapMask};m=G.J?G.J.bind(null,m):null;n(m);r||A||v?r||A?r&&!A?(k="s92NormalMap",p="s92NNGLtextureNormalMap"):!r&&A?(k="s92ParamsMap",p="s92NNGLtextureParamsMap"):(k="s92NormalParamsMap",p="s92NNGLtextureNormalParamsMap"):(k="s92",p="s92NNGLtexture"):(k="s92color",p="s92NNGLcolor");h=r?"s100":"s99";H=r?"s94":"s104";I=A?"s102":"s101";F=A?"s95":"s105"}var r,v,D=[1,
0,0,0],z=[0,0,0,0],G=Object.assign({},l,w),x=null,f=null,g={fa:null,Ka:null,tb:null},A=r=v=!1,K=null,k=null,p=null,h=null,H=null,I=null,F=null,B={update:function(m){Object.assign(G,m);t()},Dc:function(){return r},ym:function(){return.99>D[0]},Sl:function(){return H},Rl:function(){return h},Ol:function(){return F},Nl:function(){return I},Ql:function(){return k},Pl:function(){return p},gd:function(){r&&g.Ka.h(0)},gl:function(m){d&&C.set(f);m?C.La():C.Xa();v&&C.Kc();B.fd()},fd:function(){v&&(C.G("u70",
G.colorTextureUsage),g.fa.h(0));C.qg("u144",x)},rh:function(){A&&(g.tb.h(0),C.xa("u72",K.wi),C.Kc());C.xa("u108",K.ti);C.G("u145",K.Fi)},oh:function(m){A&&!r?g.tb.h(q):r&&(v||e.h(0),g.Ka.h(q),A&&g.tb.h(q+1));A&&C.xa("u72",K.wi);v||r?C.Gn():m?C.Hn():C.In();B.fd();C.xa("u9",D);C.xa("u108",K.ti);C.G("u145",K.Fi)},dl:function(){C.xa("u9",D)},el:function(){C.xa("u9",z)},L:function(){v&&g.fa.remove();r&&g.Ka.remove();A&&G.paramsTexture!==G.diffuseTexture&&g.tb.remove()}};setTimeout(t.bind(null,B),0);return B}}}(),
yb=function(){var a=0,c=0,d=0,e=0,q=0,l=0,w=T.nk,n=T.mk,t=T.pk,r=0,v=0,D=null,z=null,G=0,x=0,f=0,g=0,A=0,K=null,k=0,p=0,h=0,H=Date.now(),I=null,F=!1,B=!1,m=!1,u=1,E=!1,R={m:function(){a=T.ik[ca.T()];c=T.hk[ca.T()];d=T.gk[ca.T()];p=T.jk[ca.T()];e=T.ak[ca.T()];q=T.ek[ca.T()];f=T.fk[ca.T()];g=ca.M();A=ca.X();r=Math.round(g*a);v=Math.round(A*a);z=Ba.instance({width:r,height:v,Ac:!1});D=aa.instance({width:r,height:v,isPot:!1,isLinear:!0});K=aa.instance({width:r,height:v,isPot:!1,isLinear:!0,F:1});F=!0},
resize:function(Q,ea,fa){u=fa;g=Q;A=ea;r=Math.round(Q*a);v=Math.round(ea*a);z.resize(r,v);B=!0},U:function(){var Q=Math.exp(-(Date.now()-H)/p);k=m?h+(1-Q)*(1-h):h*Q;G=c+k*(d-c);x=e+(1-k)*(1-e);l=q+(1-k)*(1-q);aa.$(5);if(B&&F)aa.$(6),K.resize(r,v),C.set("s0"),C.Ud("u1",6),z.bind(!1,!0),K.o(),z.Ee(),D.h(6),Z.l(!0,!0),D.resize(r,v),D.o(),K.h(6),Z.l(!1,!1),C.Ud("u1",0),B=!1;else{b.enable(b.BLEND);b.blendFunc(b.CONSTANT_ALPHA,b.ONE_MINUS_SRC_ALPHA);Q=G/f;b.blendColor(Q,Q,Q,Q);b.colorMask(!0,!1,!1,!0);
C.set("s84");nb.Re();C.G("u125",G);p&&(C.G("u126",x),C.G("u117",l));var ea=u*(w+Math.pow(Math.random(),t)*(n-w));C.O("u10",ea/g,ea/A);z.Xg();z.Mc();D.o();ea=2*Math.PI*Math.random();for(var fa=!0,ka=0;ka<f;++ka)1===ka&&(b.blendFunc(b.SRC_ALPHA,b.ONE),C.G("u125",Q)),C.G("u124",ea+ka/f*(Math.PI/2)),C.O("u123",(Math.random()-.5)/g,(Math.random()-.5)/A),Z.l(fa,fa),fa=!1;b.disable(b.BLEND);C.set("s85");C.O("u10",1/r,1/v);K.o();D.h(7);Z.l(!1,!1);b.colorMask(!0,!0,!0,!0)}},h:function(Q){K.h(Q)},enable:function(){E=
!0},Zm:function(){if(m||!E)return!1;I&&clearTimeout(I);R.Sd();I=setTimeout(R.Dj,400)},Sd:function(){I&&(clearTimeout(I),I=!1);!m&&E&&(window.Oj.disable(),m=!0,H=Date.now(),h=k)},Dj:function(){m&&E&&(I&&(clearTimeout(I),I=null),window.Oj.enable(),m=!1,H=Date.now(),h=k)},L:function(){D.remove();K.remove();z.remove()}};R.Zm();return R}(),pd={instance:function(a){var c=a.ja.M(),d=a.rm?!0:!1,e=d?"s67":"s12",q=aa.instance({isFloat:a.ja.ki()&&Ea.ea()&&!d,S:a.ja.li()&&!d,isLinear:!0,isMipmap:!1,isPot:!1,
width:c,height:c,F:d?4:3}),l=aa.instance({isFloat:a.ja.ki()&&Ea.ea(),S:a.ja.li(),isPot:!0,width:1,height:c/2,F:3});l.o();C.set("s78");a.ja.h(0);Z.l(!0,!0);var w=Math.round(Math.log(c)/Math.log(2));q.kn=function(){q.o();C.set(e);C.G("u88",T.Ic);a.ja.h(0);l.h(1);for(var n=0,t=0;t<=w;++t){var r=Math.pow(2,w-t),v=r/2;b.viewport(0,n,c,v);C.O("u86",c/r,1);C.G("u87",Math.min(6/v,.6));n+=r/2;Z.l(0===t,0===t)}};q.nn=q.remove;q.remove=function(){q.nn();l.remove()};return q}};za.Ma=function(){var a={Qd:45,fg:1,
Xb:"../../images/debug/picsou.png",gg:.8,Df:3.14/6,Ef:.314,Ff:4,Bf:.5,Cf:-.25,Cm:1,ta:256,Af:.15},c={Ib:null,ld:null,screen:null},d=!1,e=!1,q=-1,l=null,w=null,n=null,t=Math.PI/180,r=[1,1],v={m:function(D){q=D.width;D={isFloat:Ea.ea(),S:!0,isPot:!1,isMipmap:!1,isLinear:!1,isMirrorY:!0,width:q,height:q/2,F:3};c.Ib=aa.instance(D);c.ld=aa.instance(D);C.j("s107",[{type:"1i",name:"u152",value:0}]);C.j("s108",[{type:"1i",name:"u157",value:0}]);v.vo()},vo:function(){C.j("s108",[{type:"1f",name:"u158",value:a.Df},
{type:"1f",name:"u159",value:a.Ef},{type:"1f",name:"u160",value:a.Ff},{type:"1f",name:"u161",value:a.Bf},{type:"1f",name:"u162",value:a.Cf}])},Pp:function(){return e},ra:function(D){l=D},Jc:function(){w="uniform sampler2D u152;uniform vec2 u153,u154,u6;uniform int u155;uniform float u156,u138;varying vec2 vv0;const float h=3.141593;const vec2 i=vec2(.5,.5);const float e=1.2;const vec3 g=vec3(1.,1.,1.);void main(){vec2 c=vec2(vv0.x*2.,-vv0.y+.5)*h,a=i+u6*(c-u153)/u154;float b=1.;if(u155==0){if(a.x<0.||a.x>1.||a.y<0.||a.y>1.)discard;}else b*=smoothstep(-e,0.,a.x),b*=1.-smoothstep(1.,1.+e,a.x),b*=smoothstep(-e,0.,a.y),b*=1.-smoothstep(1.,1.+e,a.y);vec3 d=mix(u156*g,texture2D(u152,a).rgb*u138,b*g);gl_FragColor=vec4(d,1.);}";
n="uniform sampler2D u157;uniform float u158,u159,u160,u161,u162;varying vec2 vv0;const float f=3.141593;const vec2 o=vec2(.5,.5);const vec3 h=vec3(1.,1.,1.);void main(){float i=(vv0.x*2.-1.)*f,c=(-vv0.y+.5)*f;vec4 a=texture2D(u157,vec2(.5,.5));float d=a.r,j=u160*a.g,k=u161*(a.b+u162),b=a.a,g=asin(cos(b)*cos(d)),l=atan(cos(b)*sin(d),-sin(b)),m=acos(sin(c)*sin(g)+cos(c)*cos(g)*cos(i-l)),n=1.-smoothstep(u158-u159,u158+u159,m);gl_FragColor=vec4(h*(max(k,0.)+max(j,0.)*n),1.);}";C.na("s107",{name:"_",
g:w,i:"u152 u153 u155 u154 u156 u138 u6".split(" "),precision:"highp"});C.na("s108",{name:"_",g:n,i:"u157 u158 u159 u160 u161 u162".split(" "),precision:"highp"})},vg:function(D,z,G,x,f,g,A){C.O("u153",z,G);C.Ud("u155",x?1:0);C.O("u154",f,f/g);C.og("u6",A);D.h(0);Z.l(!1,!1)},Sj:function(D){b.viewport(0,0,a.ta,a.ta/2);C.set("s108");D.h(0);Z.l(!1,!1)},Ph:function(){return c.Ib},Dk:function(D){v.m({width:a.ta});v.Gj(D,!1,1);e=!0},Ck:function(){d&&c.screen.Xl()===a.Xb||(d=!1,c.screen=aa.instance({url:a.Xb,
isFloat:!1,J:function(){d=!0}}))},lg:function(D){Object.assign(a,D)},Gj:function(D,z,G){var x=a.ta;Ba.ba();c.ld.N();C.set("s0");c.Ib.h(0);Z.l(!0,!0);c.Ib.o();C.set("s107");C.G("u156",a.Af);C.G("u138",a.Cm);v.vg(D,Math.PI,0,!0,90*t,D.M()/D.X(),r);d&&(C.G("u138",a.gg),b.viewport(0,0,x/2,x/2),v.vg(c.screen,0,0,!1,2*a.Qd*t,2*a.fg,r),b.viewport(x/2,0,x/2,x/2),v.vg(c.screen,2*Math.PI,0,!1,2*a.Qd*t,2*a.fg,r));b.enable(b.BLEND);b.blendFunc(b.ONE,b.ONE);z&&v.Sj(z);C.set("s0");b.blendColor(0,0,0,1-G);b.blendFunc(b.CONSTANT_ALPHA,
b.ONE_MINUS_CONSTANT_ALPHA);c.ld.h(0);Z.l(!1,!1);b.disable(b.BLEND);l.gj(c.Ib)},v:function(){Object.assign(c,{Ib:null,ld:null,screen:null});e=d=!1;q=-1;l=null}};return v}();za.ib=function(){var a=!1,c=!0,d=null,e=null,q={Jc:function(){ca.Y()&&(C.na("s109",{name:"_",s:"attribute vec3 a0;uniform sampler2D u38;uniform vec2 u39;uniform vec3 u140;const float l=1.,m=0.,n=0.,E=1.;const vec2 e=vec2(1.);const vec3 o=vec3(1.);const vec2 F=vec2(-1.,1.),p=vec2(.16,.5),q=vec2(.5,.5),r=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 s(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,p);vec2 f=u82*e;vec3 c=u82*o;vec2 t=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,q).rgb+vec3(u76,0.,0.),u79,c);float u=mix(texture2D(u38,r).r,0.,u82);a.z+=u;mat3 v=s(a);vec3 w=mix(u140,u80,c);float x=mix(l,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 y=mat2(h,i,-i,h);b.xy=y*b.xy;float z=mix(u78,1.,u82);vec2 j=u77/t;vec3 k=a0;float A=max(0.,-a0.z-m)*n;k.x+=A*sign(a0.x)*(1.-u82);vec3 B=v*(k+w)*x+b;vec2 C=j*z;vec3 D=vec3(g*C,-j)+B*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(D,1.));}",
g:"void main(){gl_FragData[0]=vec4(0.,0.,0.,0.),gl_FragData[1]=vec4(0.,0.,1.,1.),gl_FragData[2]=vec4(1.,0.,0.,0.),gl_FragData[3]=vec4(0.,.5,1.,0.);}",i:["u38","u39","u75","u140"].concat(C.cf(),C.df()),I:["a0"],R:[3],ca:!0}),a=!0)},m:function(l){a&&C.j("s109",[{type:"1i",name:"u38",value:1},{type:"3f",name:"u75",value:l.Ba},{type:"1f",name:"u76",value:0},{type:"1f",name:"u84",value:1}].concat(l.Gg))},$a:function(l){e=l;d&&q.Wh()},Za:function(l){d=l;e&&q.Wh()},Wh:function(){ca.Y()&&(C.j("s109",[{type:"3f",
name:"u140",value:[d[0]*e,d[1]*e,d[2]*e]}]),C.H())},hm:function(l){for(var w=l.width/2,n=l.height/2,t=l.depth,r=l.pl,v=l.height/4,D=l.Tk,z=2*D+4,G=[],x=[],f=-w+l.Qa,g=-r-l.Qa,A=w-l.Qa,K=-r-l.Qa,k=0;k<z;++k){var p=0,h=0;0===k?(p=-w,h=-r-t):1<=k&&k<=1+D?(h=(k-1)/D*Math.PI/2,p=f-Math.cos(h)*l.Qa,h=g+Math.sin(h)*l.Qa):k>=2+D&&k<=2+2*D?(h=(k-2-D)/D*Math.PI/2,p=A+Math.sin(h)*l.Qa,h=K+Math.cos(h)*l.Qa):k===z-1&&(p=w,h=-r-t);G.push(p,n+v,h,p,-n+v,h);0!==k&&x.push(2*k,2*k-2,2*k-1,2*k,2*k-1,2*k+1)}return q.instance({ga_:G,
indices:x})},toggle:function(l){c=l},instance:function(l){var w=Z.instance({ga_:l.ga_,indices:l.indices});return{U:function(){a&&c&&(C.set("s109"),w.bind(!0),w.U())}}}};return q}();za.ka=function(){var a={hf:-87,am:[85,95],Vh:[90,90],Uh:[85,70],ad:24,Uk:12,Vk:2,Zf:[-80,10],Th:[40,140],wd:[1,8],$l:80,Bi:[-120,-10],Pm:2,Wd:[0,-15],me:1024,fb:256,Jd:4,fo:[6,30],Ai:1.2};a.Li=a.Zf;var c=!1,d=!1,e=!1,q=null,l=null,w=null,n=null,t=null,r=null,v=!1,D=!1,z=null,G=null,x=null,f=null,g=.5,A=[{type:"1f",name:"u164",
value:1}],K=null,k=null,p=null,h=null,H=null,I={Tl:function(){return{name:"_",s:"attribute vec3 a0,a2;attribute vec2 a1;varying vec2 vv0;varying float vv1;uniform sampler2D u38;uniform vec2 u39;uniform float u141;uniform vec3 u140;const float o=0.,p=0.;const vec2 e=vec2(1.);const vec3 q=vec3(1.);const vec2 G=vec2(-1.,1.),r=vec2(.16,.5),s=vec2(.5,.5),t=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 u(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,r);vec2 f=u82*e;vec3 c=u82*q;vec2 v=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,s).rgb+vec3(u76,0.,0.),u79,c);float w=mix(texture2D(u38,t).r,0.,u82);a.z+=w;mat3 h=u(a);vec3 x=mix(u140,u80,c);float y=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float i=cos(a.z),j=sin(a.z);mat2 z=mat2(i,j,-j,i);b.xy=z*b.xy;float A=mix(u78,1.,u82);vec2 k=u77/v;vec3 l=a0;float B=max(0.,-a0.z-o)*p;l.x+=B*sign(a0.x)*(1.-u82);vec3 C=h*(l+x)*y+b;vec2 D=k*A;vec3 E=vec3(g*D,-k)+C*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(E,1.)),vv0=a1,gl_Position*=vec4(-1.,1.,1.,1.);vec3 F=h*a2;vv1=-F.z;}",
g:"uniform sampler2D u171,u157;uniform vec2 u86,u172;uniform float u173,u164;varying vec2 vv0;varying float vv1;void main(){vec2 b=u172*u173+u86*vv0;vec4 a=u164*texture2D(u171,b);a.r*=step(0.,vv0.y),gl_FragColor=vec4(0.,0.,0.,a.r*vv1);}",i:"u38 u171 u157 u39 u75 u173 u172 u141 u140 u86 u164".split(" ").concat(C.cf()).concat(C.df()),I:["a0","a2","a1"],R:[3,3,2],precision:"lowp"}},Jc:function(){C.na("s110",{name:"_",s:"attribute vec3 a0;uniform vec3 u140;uniform vec2 u165,u166;uniform float u141,u167,u168,u169;varying float vv0,vv1;void main(){vec3 a=(a0+u140)*u141;float b=atan(a.x,a.z-u167),d=2.*(a.y-u168)/(u169-u168)-1.;vv0=a0.y;float g=1.-u165.x*u165.x/(u165.y*u165.y),c=u165.x/sqrt(1.-g*pow(cos(b),2.));vec3 h=vec3(c*sin(b),a.y,c*cos(b)+u167);vv1=smoothstep(u166.x,u166.y,length(h-a)),gl_Position=vec4(b,d,0.,1.);}",
g:"uniform float u170;uniform vec4 u9;varying float vv0,vv1;void main(){float a=u9.x+u9.y*smoothstep(-u9.w,-u9.z,vv0),b=min(a,1.)*u170;gl_FragColor=vec4(b,vv1,1.,1.);}",i:"u141 u140 u165 u166 u167 u168 u169 u9 u170".split(" "),I:["a0"],R:[3],precision:"highp"});C.na("s111",I.Tl());C.na("s112",{name:"_",g:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u1,vv0-3.*u10),c=texture2D(u1,vv0-2.*u10),d=texture2D(u1,vv0-u10),f=texture2D(u1,vv0+u10),g=texture2D(u1,vv0+2.*u10),h=texture2D(u1,vv0+3.*u10);float j=.031496*b.r+.110236*c.r+.220472*d.r+.275591*a.r+.220472*f.r+.110236*g.r+.031496*h.r;vec2 i=b.gb*b.b+c.gb*c.b+d.gb*d.b+a.gb*a.b+f.gb*f.b+g.gb*g.b+h.gb*h.b;i/=b.b+c.b+d.b+a.b+f.b+g.b+h.b,gl_FragColor=vec4(mix(j,a.r,1.-i.x),i,1);}",
i:["u1","u10"],precision:"lowp"});c=!0},m:function(F){if(c){if(void 0===F.dc||!F.dc)return!1;if(d)I.bj(F);else{n=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:a.me,height:a.me/4,F:4});var B=a.fb/4,m={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:a.fb,height:B,F:4};w=aa.instance(m);r=aa.instance(m);t=aa.instance({isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!0,width:a.fb,height:B*a.Jd,F:4});B=.5-.5/F.ec[1];m=.5+.5/F.ec[1];for(var u=a.Uk+1,E=[],R=[],Q=new Float32Array(16*a.ad),ea=new Uint16Array(6*
(a.ad-1)),fa=0,ka=0,O=0,M=0;M<a.ad;++M){var y=2*M/(a.ad-1)-1;y=Math.sign(y)*Math.pow(Math.abs(y),a.Vk);y=Math.PI*(y+1)/2-Math.PI/2;var P=Math.sin(y),J=Math.cos(y),U=Math.sin(y*a.Ai),ta=Math.cos(y*a.Ai),ja=y/(Math.PI*F.ec[0])+.5,ua=a.Uh[0]*P,Pa=a.Li[0],na=a.Uh[1]*J+a.hf,Y=ja,ha=B,X=a.Vh[0]*P,oa=a.Li[1],pa=a.Vh[1]*J+a.hf,qa=m,Ha=16*M;Q[Ha]=X;Q[Ha+1]=oa;Q[Ha+2]=pa;Q[Ha+3]=U;Q[Ha+4]=0;Q[Ha+5]=ta;Q[Ha+6]=ja;Q[Ha+7]=qa;Q[Ha+8]=ua;Q[Ha+9]=Pa;Q[Ha+10]=na;Q[Ha+11]=U;Q[Ha+12]=0;Q[Ha+13]=ta;Q[Ha+14]=Y;Q[Ha+
15]=ha;0!==M&&(Y=2*M,ha=6*(M-1),ea[ha]=Y,ea[ha+1]=Y-1,ea[ha+2]=Y-2,ea[ha+3]=Y,ea[ha+4]=Y+1,ea[ha+5]=Y-1);ha=Math.pow(.5*(1+Math.cos(Math.min(Math.max(Math.PI/a.Th[0]*ua,-Math.PI),Math.PI))),a.Pm);Pa-=a.$l*ha;Y=a.Th[1]*ha;ua-=P*a.wd[0];na-=J*a.wd[1];X-=P*a.wd[0];pa-=J*a.wd[1];P=.001>ha?2:u;for(J=0;J<P;++J)ha=J/(P-1),ja=Pa*(1-ha)+oa*ha,qa=a.Bi[0],qa=Math.min(Math.max((ja-qa)/(a.Bi[1]-qa),0),1),qa=qa*qa*(3-2*qa),E.push(ua*(1-ha)+X*ha,ja,(na+Y*Math.exp(400*-Math.abs(y)*Math.pow(ha,4)))*(1-qa)+pa*qa,U,
0,ta,0,0);y=0===M?0:2<P&&2<ka?P-1:1;for(U=1;U<=y;++U)ta=P>ka?P-2:0,R.push(fa+U+ta,fa+U-1,O+U-1,O+U-1,O+U+(P<ka?ka-2:0),fa+U+ta);ka=P;O=fa;fa+=P}h=Z.instance({ga_:new Float32Array(E),indices:new Uint16Array(R)});H=Z.instance({ga_:Q,indices:ea});I.bj(F);C.j("s112",[{type:"1i",name:"u1",value:0}]);d=!0}}},bj:function(F){g=F.$n;f=F.Xd;K=[{type:"1i",name:"u38",value:1},{type:"1i",name:"u171",value:0},{type:"1i",name:"u157",value:2},{type:"3f",name:"u75",value:[F.Ba[0],F.Ba[1]-a.Wd[0],F.Ba[2]+a.Wd[1]]},
{type:"1f",name:"u173",value:F.ao},{type:"2f",name:"u86",value:[1,1/a.Jd]},{type:"2f",name:"u172",value:[0,1/a.Jd]},{type:"1f",name:"u164",value:1}].concat(F.Gg,F.Cj);C.j("s111",K)},$b:function(F){q=F},Zb:function(F){k=F;k.Fb(I.uc)},mi:function(){return e&&null!==k&&null!==p},uc:function(){if(!(e||D&&v)||null===k||null===p)return!1;b.viewport(0,0,a.me,a.me/4);Ba.ba();n.o();b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);C.j("s110",[{type:"1f",name:"u167",value:a.hf},{type:"1f",name:"u168",value:a.Zf[0]},
{type:"1f",name:"u169",value:a.Zf[1]},{type:"3f",name:"u140",value:[z[0]+G[0],z[1]+G[1],z[2]+G[2]]},{type:"1f",name:"u170",value:g},{type:"2f",name:"u165",value:a.am},{type:"2f",name:"u166",value:a.fo}]);k.ol();C.set("s1");var F=a.fb/4;b.viewport(0,0,a.fb,F);w.o();n.h(0);n.od();Z.l(!0,!0);for(var B=0;B<a.Jd;++B)C.set("s112"),0!==B&&b.viewport(0,0,a.fb,F),r.o(),w.h(0),C.O("u10",1/a.fb,0),Z.l(!1,!1),w.o(),r.h(0),C.O("u10",0,1/F),Z.l(!1,!1),a.Wk&&b.colorMask(0===B,1===B,2===B,!0),C.set("s1"),t.o(),w.h(0),
b.viewport(0,B*F,a.fb,F),Z.l(!1,!1),a.Wk&&b.colorMask(!0,!0,!0,!0);return e=!0},U:function(){I.mi()&&(p.bind(!1,!1),l.o(),b.clearColor(0,0,0,0),b.enable(b.DEPTH_TEST),b.depthMask(!0),b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT),C.set("s111"),q.h(1),t.h(0),h.bind(!0),h.U(),H.bind(!0),H.U(),b.disable(b.DEPTH_TEST),b.depthMask(!1))},add:function(){I.mi()&&(b.enable(b.BLEND),b.blendFunc(b.ONE,b.ONE_MINUS_SRC_ALPHA),l.h(0),Z.l(!1,!1),b.disable(b.BLEND))},ig:function(F,B){p=Ba.instance({width:F,height:B,
Ac:!0});l=aa.instance({width:F,height:B,isFloat:!1,isPot:!1});I.uc()},Za:function(F,B,m){F||(F=z,B=G,m=x);C.j("s111",[{type:"3f",name:"u140",value:[m[0]+f[0],m[1]+f[1]-a.Wd[0],m[2]+f[2]+a.Wd[1]]}]);z=F;G=B;x=m;D=!0;!e&&v&&I.uc();C.H()},$a:function(F,B){C.j("s110",[{type:"1f",name:"u141",value:F}]);C.j("s111",[{type:"1f",name:"u141",value:B}]);v=!0;!e&&D&&I.uc();C.H()},mg:function(F){C.j("s111",[{type:"1f",name:"u76",value:F}]);C.H()},wb:function(F){F&&(k=F);I.uc()},ng:function(F,B){A[0].value=1-F;
C.j("s111",A);C.j("s111",B)},L:function(){},v:function(){e=d=c=!1;r=t=n=w=l=q=null}};return I}();za.qa=function(){var a=!1,c=null,d=0,e=0,q=0,l=[{type:"1f",name:"u164",value:1}],w=null,n=null,t=null,r={Jc:function(){C.na("s113",{name:"_",s:"attribute vec3 a0;uniform vec2 u174,u175;varying vec2 vv0;void main(){vec2 a=2.*(a0.xy-u175)/u174;gl_Position=vec4(a,0.,1.),vv0=a0.xy;}",g:"uniform vec2 u176;uniform float u177,u178,u179;varying vec2 vv0;void main(){vec2 b=vec2(sign(vv0.x)*.5*u177,u178),a=vv0-b,c=u179*a,d=(c-a)*u176;gl_FragColor=vec4(d,0.,1.);}",
i:"u174 u175 u177 u178 u179 u176".split(" "),I:["a0"],R:[3],precision:"highp"});C.na("s114",{name:"_",s:"attribute vec3 a0;varying vec2 vv0,vv1;uniform sampler2D u38;uniform vec3 u140;uniform vec2 u39,u174,u175;uniform float u141;const float n=0.,o=0.;const vec2 e=vec2(1.);const vec3 p=vec3(1.);const vec2 F=vec2(-1.,1.),q=vec2(.16,.5),r=vec2(.5,.5),s=vec2(.84,.5);uniform mat4 u73;uniform vec3 u75,u79,u80,u81;uniform float u74,u82,u83,u76,u77,u78,u84;mat3 t(vec3 c){vec3 b=cos(c),a=sin(c);return mat3(b.y*b.z,b.y*a.z,a.y,-a.x*a.y*b.z+b.x*a.z,-a.x*a.y*a.z-b.x*b.z,a.x*b.y,b.x*a.y*b.z+a.x*a.z,b.x*a.y*a.z-a.x*b.z,-b.x*b.y);}void main(){vec4 d=texture2D(u38,q);vec2 f=u82*e;vec3 c=u82*p;vec2 u=mix(d.a*u39,e,f),g=(2.*d.gb-e)*(1.-f);g.x*=-1.;vec3 a=mix(texture2D(u38,r).rgb+vec3(u76,0.,0.),u79,c);float v=mix(texture2D(u38,s).r,0.,u82);a.z+=v;mat3 w=t(a);vec3 x=mix(u140,u80,c);float y=mix(u141,u83,u82);vec3 b=mix(u75,u81,c);b.x+=u74*sin(a.y);float h=cos(a.z),i=sin(a.z);mat2 z=mat2(h,i,-i,h);b.xy=z*b.xy;float A=mix(u78,1.,u82);vec2 j=u77/u;vec3 k=a0;float B=max(0.,-a0.z-n)*o;k.x+=B*sign(a0.x)*(1.-u82);vec3 C=w*(k+x)*y+b;vec2 D=j*A;vec3 E=vec3(g*D,-j)+C*vec3(1.,-1.,-1.);gl_Position=u73*(vec4(u84*e,e)*vec4(E,1.)),gl_Position*=vec4(-1.,1.,1.,1.),vv0=vec2(.5,.5)+(a0.xy-u175)/u174,vv1=vec2(.5,.5)+.5*gl_Position.xy/gl_Position.w;}",
g:"uniform sampler2D u180,u181;uniform float u164;varying vec2 vv0,vv1;void main(){vec2 a=u164*texture2D(u180,vv0).rg;gl_FragColor=texture2D(u181,a+vv1);}",i:"u164 u38 u180 u181 u174 u175 u39 u75 u141 u140".split(" ").concat(C.cf(),C.df()),I:["a0"],R:[3],precision:"lowp"});a=!0},m:function(v){if(a){if(void 0===v.dc||!v.bd)return!1;n=aa.instance({isFloat:!0,isPot:!1,isMipmap:!1,isLinear:!1,width:256,height:128,F:4});t=Ba.instance({width:256,height:128});C.j("s114",[{type:"1i",name:"u38",value:1},{type:"1i",
name:"u180",value:2},{type:"1i",name:"u181",value:0},{type:"3f",name:"u75",value:v.Ba},{type:"1f",name:"u164",value:1}].concat(v.Cj,v.Gg));e=v.Le;q=v.Ke;d=v.Me}},$b:function(v){c=v},Zb:function(v){w=v;w.Fb(r.He)},He:function(){b.viewport(0,0,256,128);t.o();n.o();var v=w.Ul(),D=w.Vl(),z=[{type:"2f",name:"u174",value:[v,D]},{type:"2f",name:"u175",value:[w.zl(),w.Al()]}];C.j("s113",z.concat([{type:"1f",name:"u177",value:e},{type:"1f",name:"u178",value:q},{type:"1f",name:"u179",value:d},{type:"2f",name:"u176",
value:[1/v,-1/D]}]));w.nh();C.j("s114",z)},U:function(){C.set("s114");c.h(1);n.h(2);w.nh()},Za:function(v){C.j("s114",[{type:"3f",name:"u140",value:v}]);C.H()},$a:function(v){C.j("s114",[{type:"1f",name:"u141",value:v}]);C.H()},mg:function(v){C.j("s114",[{type:"1f",name:"u76",value:v}]);C.H()},Zn:function(v){d=v;r.He();C.H();xa.animate(Date.now())},wb:function(v){v&&(w=v);r.He()},ng:function(v,D){l.u164=1-v;C.j("s114",l);C.j("s114",D)},L:function(){}};return r}();za.mc=function(){var a=[0,-.5],c=
!1,d=!1,e=null,q=null,l=null,w=null,n=null,t=-1,r=-1;return{Jc:function(){C.na("s115",{name:"_",s:"attribute vec2 a0;uniform sampler2D u38;uniform vec2 u39,u7;uniform float u6;varying vec2 vv0;const vec2 f=vec2(1.,1.);void main(){vec4 a=texture2D(u38,vec2(.25,.5));vec2 b=a.a*u39,c=2.*a.gb-f,d=u7+a0*u6;gl_Position=vec4(c+b*d,0.,1.),vv0=vec2(.5,.5)+.5*a0;}",g:"uniform sampler2D u182;varying vec2 vv0;void main(){gl_FragColor=texture2D(u182,vv0);}",i:["u38","u182","u39","u7","u6"],precision:"lowp"});
C.na("s116",{name:"_",g:"uniform sampler2D u2,u183,u184;varying vec2 vv0;const vec3 f=vec3(1.,1.,1.);void main(){float a=texture2D(u2,vv0).r;vec3 b=texture2D(u184,vv0).rgb,c=texture2D(u183,vv0).rgb;gl_FragColor=vec4(mix(b,c,a*f),1.);}",i:["u2","u184","u183"],precision:"lowp"});c=!0},m:function(v){c&&(n=aa.instance({isFloat:!1,isPot:!0,url:v.ze,J:function(){d=!0}}),C.j("s115",[{type:"1i",name:"u38",value:1},{type:"1i",name:"u182",value:0},{type:"2f",name:"u39",value:v.Lj},{type:"2f",name:"u7",value:a},
{type:"1f",name:"u6",value:3.8}]),C.j("s116",[{type:"1i",name:"u183",value:0},{type:"1i",name:"u2",value:1},{type:"1i",name:"u184",value:2}]))},$b:function(v){q=v},ig:function(v,D){var z={isFloat:!1,isPot:!1,isMipmap:!1,isLinear:!1,width:v,height:D,F:4};t=2/v;r=2/D;l=aa.instance(z);w=aa.instance(z);e=Ba.instance({width:v,height:D})},U:function(v,D){if(d){e.bind(!1,!0);C.set("s77");for(var z=0;2>z;++z){C.O("u10",t,0);l.o();0!==z&&w.h(0);var G=0===z&&!T.da;Z.l(G,G);C.O("u10",0,r);w.o();l.h(0);Z.l(!1,
!1)}C.set("s115");q.h(1);n.h(0);l.o();b.clearColor(1,0,0,1);b.clear(b.COLOR_BUFFER_BIT);Z.l(!1,!1);C.set("s116");D.o();w.h(0);l.h(1);v.h(2);Z.l(!1,!1)}},L:function(){}}}();var Ec=function(){var a={instance:function(c){var d=c.Of,e=c.Kf,q=c.wc,l=c.background?c.background:aa.Qh(),w=c.Ia,n={scale:1,offsetX:0,offsetY:0},t=null;c.Jf&&(n.scale=c.Jf.scale,n.offsetY=c.Jf.offsetY);return{Lh:function(){return w},Eh:function(){return l},set:function(){t=gb.Jl();gb.hj(n);gb.ee();gb.fe();xa.aj(q,l,!1,!1)},H:function(){gb.hj(t)},
Yb:function(){return{modelURL:d,materialsURLs:e,background:l.Yb(!1),wc:q.Yb(!1),Ia:w.Yb(!0)}},Wo:function(r){l.h(r)}}},Oc:function(c,d,e){function q(){if(3===++t&&d){var r=a.instance({Of:c.modelURL,Kf:c.materialsURLs,background:l,wc:w,Ia:n});d(r)}}var l=null,w=null,n=null,t=0;aa.Oc(c.background,function(r){!r&&e?e():(l=r,q())});aa.Oc(c.dataState,function(r){!r&&e?e():(w=r,q())});aa.Oc(c.light,function(r){!r&&e?e():(n=r,q())})}};return a}();return Ra||window.JEELIZVTO}();(function(W,Da){"function"===
typeof define&&define.amd?define(Da):"object"===typeof exports?module.exports=Da():W.ResizeSensor=Da()})("undefined"!==typeof window?window:this,function(){function W(La,Xa){var Ta=Object.prototype.toString.call(La),Jb=0,Ja=La.length;if("[object Array]"===Ta||"[object NodeList]"===Ta||"[object HTMLCollection]"===Ta||"[object Object]"===Ta||"undefined"!==typeof jQuery&&La instanceof jQuery||"undefined"!==typeof Elements&&La instanceof Elements)for(;Jb<Ja;Jb++)Xa(La[Jb]);else Xa(La)}if("undefined"===
typeof window)return null;var Da=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(La){return window.setTimeout(La,20)},Ka=function(La,Xa){function Ta(){var Ja=[];this.add=function(vb){Ja.push(vb)};var eb,qb;this.call=function(){eb=0;for(qb=Ja.length;eb<qb;eb++)Ja[eb].call()};this.remove=function(vb){var rb=[];eb=0;for(qb=Ja.length;eb<qb;eb++)Ja[eb]!==vb&&rb.push(Ja[eb]);Ja=rb};this.length=function(){return Ja.length}}function Jb(Ja,eb){if(Ja)if(Ja.resizedAttached)Ja.resizedAttached.add(eb);
else{Ja.resizedAttached=new Ta;Ja.resizedAttached.add(eb);Ja.resizeSensor=document.createElement("div");Ja.resizeSensor.className="resize-sensor";Ja.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;";Ja.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s;"></div></div><div class="resize-sensor-shrink" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;"><div style="position: absolute; left: 0; top: 0; transition: 0s; width: 200%; height: 200%"></div></div>';
Ja.appendChild(Ja.resizeSensor);Ja.resizeSensor.offsetParent!==Ja&&(Ja.style.position="relative");var qb=Ja.resizeSensor.childNodes[0],vb=qb.childNodes[0],rb=Ja.resizeSensor.childNodes[1],gc,Bb,Tb,Zb,$b=Ja.offsetWidth,ac=Ja.offsetHeight,bc=function(){vb.style.width="100000px";vb.style.height="100000px";qb.scrollLeft=1E5;qb.scrollTop=1E5;rb.scrollLeft=1E5;rb.scrollTop=1E5};bc();var hc=function(){Bb=0;gc&&($b=Tb,ac=Zb,Ja.resizedAttached&&Ja.resizedAttached.call())};eb=function(){Tb=Ja.offsetWidth;Zb=
Ja.offsetHeight;(gc=Tb!=$b||Zb!=ac)&&!Bb&&(Bb=Da(hc));bc()};var ic=function(cc,Lb,jc){cc.attachEvent?cc.attachEvent("on"+Lb,jc):cc.addEventListener(Lb,jc)};ic(qb,"scroll",eb);ic(rb,"scroll",eb)}}W(La,function(Ja){Jb(Ja,Xa)});this.detach=function(Ja){Ka.detach(La,Ja)}};Ka.detach=function(La,Xa){W(La,function(Ta){if(Ta){if(Ta.resizedAttached&&"function"==typeof Xa&&(Ta.resizedAttached.remove(Xa),Ta.resizedAttached.length()))return;Ta.resizeSensor&&(Ta.contains(Ta.resizeSensor)&&Ta.removeChild(Ta.resizeSensor),
delete Ta.resizeSensor,delete Ta.resizedAttached)}})};return Ka});var fc={glassesDBURL:"https://glassesdbcached.jeeliz.com/sku/",appstaticURL:"https://appstatic.jeeliz.com/"},lb={notLoaded:-1,init:0,realtime:2,loadingModel:3,paused:4},Oa={isRT:!0,sku:void 0,materialsReplacements:"",mode:lb.notLoaded},ib={displayWidth:-1,displayHeight:-1,cvWidth:-1,cvHeight:-1},Tc={cv:null,container:null,adjust:null,adjustNotice:null,adjustExit:null,loading:null,trackIframe:null},ya=Object.assign({},Tc),qd={ADJUST_START:null,
ADJUST_END:null,LOADING_START:null,LOADING_END:null},Bc=null,Sb={enabled:!1,callback:null,interval:1E3},rc={error:!1},ec=null,Yb=null,ub={start:function(W){console.log("INFO in JeelizVTOWidget.js: start()");if(Oa.mode!==lb.notLoaded)ub.resume();else{wa();if(W.settings)for(var Da in W.settings)fc[Da]=W.settings[Da];W.NNCPath&&Ra.set_NNCPath(W.NNCPath);W.faceDetectionCallback&&(Sb.enabled=!0,Sb.callback=W.faceDetectionCallback,Sb.interval="undefined"===typeof W.faceDetectionInterval?1E3:W.faceDetectionInterval);
Bc=Object.assign({},qd,W.callbacks||{});ya.container=W.placeHolder||document.getElementById("JeelizVTOWidget");if(!ya.container)throw Error("Cannot find a <div> element with id=JeelizVTOWidget to append the VTO widget.");ya.cv=W.canvas||document.getElementById("JeelizVTOWidgetCanvas");ya.cv||(ya.cv=document.createElement("canvas"),ya.container.appendChild(ya.cv));ya.loading=document.getElementById("JeelizVTOWidgetLoading");W.onError&&(rc.error=W.onError);Ab();if(!zb(ya.container))return Promise.reject("PLACEHOLDER_NULL_WIDTH");
if(!ra(ya.container))return Promise.reject("PLACEHOLDER_NULL_HEIGHT");kb();new ResizeSensor(ya.container,function(La){kb()});(W.searchImageMask||W.searchImageColor||W.searchImageRotationSpeed)&&Ra.set_loading(W.searchImageMask,W.searchImageColor,W.searchImageRotationSpeed);W.callbackReady&&(Yb=W.callbackReady);Oa.mode=lb.init;var Ka="undefined"===typeof W.assetsPath?fc.appstaticURL+"jeefit/":W.assetsPath;"undefined"!==typeof W.catalog&&(ec=W.catalog);if(W.onWebcamGet)Ra.onWebcamGet(W.onWebcamGet);
return new Promise(function(La,Xa){Ra.init(Ka,sa,function(){Oa.isRT=!1;$a("NO_ERROR_LABEL");Xa()},ya.cv);var Ta=W.sku?W.sku:null;Ra.onHalfLoad(function(){!1===W.isShadow&&Ra.switch_shadow(!1);ub.load(Ta,La,W.materialsReplacements)})})}},destroy:function(){return Ra.destroy().then(function(){Oa.mode=lb.notLoaded;Oa.sku=void 0;Oa.materialsReplacements="";Yb=ec=null;Object.assign(ya,Tc)})},pause:function(W){if(!Oa.isRT)return Promise.reject();Oa.mode=lb.paused;var Da=Ra.switch_sleep(!0,W);return W?Da:
Promise.resolve(Da)},resume:function(W){if(!Oa.isRT)return Promise.reject();Oa.mode=lb.realtime;var Da=Ra.switch_sleep(!1,W);return W?Da:Promise.resolve(Da)},set_videoRotation:function(W){Oa.isRT&&Ra.set_videoRotation(W)},set_videoSizes:function(W,Da,Ka,La,Xa,Ta){Oa.isRT&&Ra.set_videoSizes(W,Da,Ka,La,Xa,Ta)},resize:function(){kb()},set_scale:function(W){Ra.set_scale(W)},capture_image:function(W,Da,Ka){Ra&&Ra.ready?Ra.capture_image(W,Da,Ka,!1):Da(!1)},toggle_loading:function(W){W?(Fa(ya.loading),Ib("LOADING_START")):
(Qa(ya.loading),Ib("LOADING_END"))},load_modelStandalone:function(W,Da){if(!Oa.isRT)throw Error("Loading standalone models is only available in RT mode");Oa.mode===lb.paused&&ub.resume();Oa.mode=lb.loadingModel;var Ka="undef";"string"===typeof W?(Ka=W,Ga(W).then(function(La){Ra.set_modelStandalone(La,Da,Ka)}).catch(Na)):(Ka="RANDOM_SKU_"+Date.now().toString(),Ra.set_modelStandalone(W,Da,Ka));Oa.sku=Ka;Oa.materialsReplacements=""},load:function(W,Da,Ka){ub.toggle_loading(!0);Oa.isRT&&ub.load_RT(W,
Da,Ka)},load_RT:function(W,Da,Ka){var La=Ka?JSON.stringify(Ka):"";W===Oa.sku&&La===Oa.materialsReplacements?ub.toggle_loading(!1):(Oa.sku=W,Oa.materialsReplacements=La,Oa.mode=lb.loadingModel,Oa.mode===lb.paused&&ub.resume(),W?ec&&ec[W]?Qb(W,ec[W],Da,Ka):Ga(fc.glassesDBURL+W).then(function(Xa){if(Xa.error)return Na();Qb(W,Xa.intrinsic,Da,Ka)}).catch(Na):(Oa.mode=lb.realtime,ub.toggle_loading(!1),Ra.start_rendering(),Da&&Da()))},enter_adjustMode:Rb,exit_adjustMode:ob,set_LUT:function(W){return Ra&&
Ra.ready?Ra.set_LUT(W||null):Promise.reject("NOT_READY")}};return ub}();window.JEELIZVTO=JEELIZVTO;
window.JEELIZVTOWIDGET={VERSION:"2.3.9",start:JeelizVTOWidget.start,pause:JeelizVTOWidget.pause,resume:JeelizVTOWidget.resume,load:JeelizVTOWidget.load,load_modelStandalone:JeelizVTOWidget.load_modelStandalone,capture_image:JeelizVTOWidget.capture_image,set_videoRotation:JeelizVTOWidget.set_videoRotation,resize:JeelizVTOWidget.resize,set_scale:JeelizVTOWidget.set_scale,set_videoSizes:JeelizVTOWidget.set_videoSizes,destroy:JeelizVTOWidget.destroy,enter_adjustMode:JeelizVTOWidget.enter_adjustMode,exit_adjustMode:JeelizVTOWidget.exit_adjustMode,
set_LUT:JeelizVTOWidget.set_LUT};
